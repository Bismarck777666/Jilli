System.register("chunks:///main.js",["./index-95d6ba2c.js","cc"],(function(){"use strict";var t,e,i,n,o,r,a,s,l,c,u,m,h,p,_,d,f,y,g,S,b,w,v,C,E,N,T,O,k,A,I,L,x,P,B,R,F,M,D,z,G,V,W,H,U,j,J,X,Y,q,K,Z,Q,$,tt,et,it,nt,ot,rt,at,st,lt,ct,ut,mt,ht,pt,_t,dt,ft,yt,gt,St,bt,wt,vt,Ct,Et,Nt,Tt,Ot,kt,At,It;return{setters:[function(C){t=C._,e=C.a,i=C.b,n=C.c,o=C.n,r=C.d,a=C.e,s=C.f,l=C.g,c=C.h,u=C.S,m=C.i,h=C.j,p=C.C,_=C.k,d=C.l,f=C.m,y=C.o,g=C.p,S=C.q,b=C.r,w=C.s,v=C.t},function(t){C=t.cclegacy,E=t._decorator,N=t.sp,T=t.Label,O=t.CCFloat,k=t.Component,A=t.Color,I=t.ccenum,L=t.UITransform,x=t.Node,P=t.SpriteFrame,B=t.EventHandler,R=t.Vec3,F=t.Sprite,M=t.math,D=t.assetManager,z=t.lerp,G=t.UIRenderer,V=t.NodeEventType,W=t.TransformBit,H=t.CCString,U=t.Animation,j=t.Tween,J=t.tween,X=t.Button,Y=t.Material,q=t.Gradient,K=t.v4,Z=t.Texture2D,Q=t.clamp01,$=t.color,tt=t.EffectAsset,et=t.CCInteger,it=t.CCBoolean,nt=t.log,ot=t.ImageAsset,rt=t.Enum,at=t.error,st=t.instantiate,lt=t.AnimationClip,ct=t.v3,ut=t.ParticleSystem2D,mt=t.Vec2,ht=t.TweenSystem,pt=t.v2,_t=t.director,dt=t.Director,ft=t.UIOpacity,yt=t.RichText,gt=t.ScrollView,St=t.JsonAsset,bt=t.isValid,wt=t.CCClass,vt=t.SpriteAtlas,Ct=t.js,Et=t.Prefab,Nt=t.sys,Tt=t.settings,Ot=t.Settings,kt=t.VERSION,At=t.find,It=t.Size}],execute:function(){var Lt,xt,Pt,Bt,Rt,Ft,Mt,Dt,zt,Gt,Vt,Wt,Ht;C._RF.push({},"77acaFcNgVDULwRQEtO5wYa","BigWinComponent",void 0);var Ut,jt,Jt,Xt,Yt,qt,Kt,Zt,Qt,$t,te,ee,ie,ne,oe,re,ae,se,le,ce,ue,me,he,pe,_e,de,fe,ye,ge,Se,be,we,ve,Ce,Ee,Ne,Te,Oe,ke,Ae,Ie,Le,xe,Pe,Be,Re,Fe,Me,De="Start",ze="Loop",Ge="End",Ve={Start:"BigWin_Start",End:"BigWin_End"},We={Start:"MegaWin_Start",End:"MegaWin_End"},He={Start:"SuperWin_Start",End:"SuperWin_End"},Ue=E.ccclass,je=E.property;Lt=je({type:N.Skeleton,tooltip:"spine"}),xt=je({type:N.Skeleton,tooltip:"遮罩"}),Pt=je({type:N.Skeleton,tooltip:"Extra Spine"}),Bt=je({type:T,tooltip:"贏分"}),Rt=je({type:O,tooltip:"End extra effect delay time"}),Ue(((Ht=function(t){function c(){for(var e,o=arguments.length,r=new Array(o),a=0;a<o;a++)r[a]=arguments[a];return e=t.call.apply(t,[this].concat(r))||this,i(e,"m_spine",Dt,n(e)),i(e,"m_maskSpine",zt,n(e)),i(e,"m_extraSpine",Gt,n(e)),i(e,"m_winLabel",Vt,n(e)),i(e,"m_endExtraDelayTime",Wt,n(e)),e.m_isEnd=!0,e.m_isShowEnd=!0,e.m_isShowAward=!1,e.m_eventCb=null,e.m_showValueCb=null,e.m_cancelCb=null,e.m_lvl=0,e.m_nowLvl=0,e.m_win=0,e.m_showWin=0,e.m_step=0,e.m_isShowingExtraEnd=!1,e}e(c,t);var u=c.prototype;return u.update=function(t){this.m_isShowAward&&(this.m_showWin+=this.m_step*t,this.m_showWin>=this.m_win&&(this.m_showWin=this.m_win,this.m_isShowAward=!1),this.m_winLabel.string=o.FormatNumberThousands(o.strip(this.m_showValueCb?this.m_showValueCb(this.m_showWin):this.m_showWin),o.FORMAT_NUMBER_TYPE.PERMANENT_DOT))},u.Init=function(t,e){this.m_eventCb=t,this.m_showValueCb=e,this.m_maskSpine&&(this.m_maskSpine.node.active=!1)},u.Show=function(t,e,i){if(void 0===i&&(i=!0),t>0&&e>c.Level.NONE&&e<=c.Level.SUPER){this.m_isEnd=!1,this.m_lvl=e,this.m_nowLvl=i?0:e-1,this.m_win=t,this.m_showWin=0,this.m_winLabel.string="0",this.m_isShowEnd=!1;for(var n=0,r=i?c.Level.BIG:this.m_lvl;r<=this.m_lvl;r++){var a="",s="";switch(r){case c.Level.BIG:a=Ve.Start,s=Ve.End;break;case c.Level.MEGA:a=We.Start,s=We.End;break;case c.Level.SUPER:a=He.Start,s=He.End}if(""!==a&&""!==s){var l=this.m_spine.findAnimation(a);l&&(n+=l.duration)}}this.m_step=o.divide(this.m_win,n||5),this.m_isShowAward=!0,this.m_maskSpine&&(this.m_maskSpine.node.active=!0,this.PlayAnimation(this.m_maskSpine,"BigWin_Start")),this.ShowNext()}},u.Stop=function(){this.m_isShowEnd||(this.m_cancelCb&&this.m_cancelCb(),this.ShowEnd())},u.SetSkin=function(t){this.m_spine.setSkin(t)},u.ShowNext=function(){var t=a(s().mark((function t(){var e;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.m_nowLvl!==this.m_lvl){t.next=4;break}this.ShowEnd(),t.next=23;break;case 4:this.m_nowLvl++,e=!1,t.t0=this.m_nowLvl,t.next=t.t0===c.Level.BIG?9:t.t0===c.Level.MEGA?14:t.t0===c.Level.SUPER?18:22;break;case 9:return this.CheckExtraSpineStart(),t.next=12,this.PlayAnimation(this.m_spine,Ve.Start);case 12:return e=t.sent,t.abrupt("break",22);case 14:return t.next=16,this.PlayAnimation(this.m_spine,We.Start);case 16:return e=t.sent,t.abrupt("break",22);case 18:return t.next=20,this.PlayAnimation(this.m_spine,He.Start);case 20:return e=t.sent,t.abrupt("break",22);case 22:e||this.ShowNext();case 23:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),u.ShowEnd=function(){var t=a(s().mark((function t(){var e;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.m_isShowEnd){t.next=2;break}return t.abrupt("return");case 2:this.m_isShowEnd=!0,this.m_isShowAward=!1,this.m_winLabel.string=o.FormatNumberThousands(o.strip(this.m_showValueCb?this.m_showValueCb(this.m_win):this.m_win),o.FORMAT_NUMBER_TYPE.PERMANENT_DOT),this.m_maskSpine&&this.PlayAnimation(this.m_maskSpine,"BigWin_End"),e="",t.t0=this.m_lvl,t.next=t.t0===c.Level.BIG?10:t.t0===c.Level.MEGA?12:t.t0===c.Level.SUPER?14:16;break;case 10:return e=Ve.End,t.abrupt("break",16);case 12:return e=We.End,t.abrupt("break",16);case 14:return e=He.End,t.abrupt("break",16);case 16:if(""===e){t.next=21;break}return t.next=19,Promise.all([this.CheckExtraSpineEnd(),this.PlayAnimation(this.m_spine,e)]);case 19:t.next=22;break;case 21:console.error("BigWinComponent ShowEnd animName is empty!",this.m_lvl);case 22:this.m_maskSpine&&(this.m_maskSpine.node.active=!1),this.m_isEnd=!0;case 24:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),u.CheckExtraSpineStart=function(){var t=this;this.m_extraSpine&&(this.m_extraSpine.node.active=!0,this.PlayAnimation(this.m_extraSpine,De).then((function(){t.m_isShowingExtraEnd||t.PlayAnimation(t.m_extraSpine,ze,!0)})))},u.CheckExtraSpineEnd=function(){var t=a(s().mark((function t(){return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.m_extraSpine){t.next=2;break}return t.abrupt("return");case 2:return this.m_isShowingExtraEnd=!0,t.next=5,l.Wait(this,this.m_endExtraDelayTime);case 5:return t.next=7,this.PlayAnimation(this.m_extraSpine,Ge);case 7:this.m_isShowingExtraEnd=!1;case 8:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),u.PlayAnimation=function(t,e,i,n){var o=this;return void 0===i&&(i=!1),void 0===n&&(n=0),new Promise((function(r){var a=!1;o.m_cancelCb=function(){r(a=!0)},t.clearTrack(n),t.setToSetupPose();var s=t.setAnimation(n,e,i),l=function(){o.m_cancelCb=null,r(a)};s?(t.setTrackEventListener(s,(function(t,i){var n=i.data.name,r=i.stringValue;o.m_eventCb&&o.m_eventCb(n,r,e)})),t.setTrackCompleteListener(s,(function(){t.setTrackCompleteListener(s,(function(){})),l()}))):t.setCompleteListener((function(){t.setCompleteListener(null),l()}))}))},r(c,[{key:"IsEnd",get:function(){return this.m_isEnd},set:function(t){this.m_isEnd=t}}]),c}(k)).Level={NONE:0,BIG:1,MEGA:2,SUPER:3},Dt=t((Mt=Ht).prototype,"m_spine",[Lt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),zt=t(Mt.prototype,"m_maskSpine",[xt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Gt=t(Mt.prototype,"m_extraSpine",[Pt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Vt=t(Mt.prototype,"m_winLabel",[Bt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Wt=t(Mt.prototype,"m_endExtraDelayTime",[Rt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1.5}}),Ft=Mt));C._RF.pop(),C._RF.push({},"84c5byXmKBEJIwVBTwOs7ly","ButtonPro",void 0);var Je,Xe,Ye,qe=E.ccclass,Ke=E.executionOrder,Ze=E.requireComponent,Qe=E.type,$e=E.executeInEditMode,ti=E.property,ei=new A;!function(t){t[t.NONE=0]="NONE",t[t.COLOR=1]="COLOR",t[t.SPRITE=2]="SPRITE",t[t.SCALE=4]="SCALE",t[t.COLOR_SPRITE=3]="COLOR_SPRITE",t[t.COLOR_SCALE=5]="COLOR_SCALE",t[t.SPRITE_SCALE=6]="SPRITE_SCALE",t[t.ALL=7]="ALL"}(Je||(Je={})),I(Je),function(t){t.NORMAL="normal",t.HOVER="hover",t.PRESSED="pressed",t.DISABLED="disabled"}(Xe||(Xe={})),function(t){t.CLICK="click"}(Ye||(Ye={}));var ii,ni,oi,ri,ai,si,li,ci,ui,mi,hi;Ut=qe("ButtonPro"),jt=Ke(110),Jt=Ze(L),Xt=ti({type:x,displayOrder:0,tooltip:"i18n:button.target"}),Yt=ti({displayOrder:1,tooltip:"i18n:button.interactable"}),qt=ti({type:Je,displayOrder:2,tooltip:"i18n:button.transition"}),Kt=ti({group:{name:"COLOR"},displayOrder:3,tooltip:"i18n:button.normal_color"}),Zt=ti({group:{name:"COLOR"},displayOrder:3,tooltip:"i18n:button.pressed_color"}),Qt=ti({group:{name:"COLOR"},displayOrder:3,tooltip:"i18n:button.hover_color"}),$t=ti({group:{name:"COLOR"},displayOrder:3,tooltip:"i18n:button.disabled_color"}),te=ti({group:{name:"SCALE"},displayOrder:4,tooltip:"i18n:button.duration",min:0,max:10}),ee=ti({group:{name:"SCALE"},displayOrder:4,tooltip:"i18n:button.zoom_scale"}),ie=ti({group:{name:"SPRITE"},type:P,displayOrder:3,tooltip:"i18n:button.normal_sprite"}),ne=ti({group:{name:"SPRITE"},type:P,displayOrder:3,tooltip:"i18n:button.pressed_sprite"}),oe=ti({group:{name:"SPRITE"},type:P,displayOrder:3,tooltip:"i18n:button.hover_sprite"}),re=ti({group:{name:"SPRITE"},type:P,displayOrder:3,tooltip:"i18n:button.disabled_sprite"}),ae=Qe([B]),se=ti({serializable:!0,displayOrder:20,tooltip:"i18n:button.click_events"}),le=ti({serializable:!0}),ce=ti({serializable:!0}),ue=ti({serializable:!0}),me=ti({serializable:!0}),he=ti({serializable:!0}),pe=ti({serializable:!0}),_e=ti({serializable:!0}),de=ti({serializable:!0}),fe=ti({serializable:!0}),ye=ti({serializable:!0}),ge=ti({serializable:!0}),Se=ti({serializable:!0}),be=ti({serializable:!0}),Ut(we=jt(we=Jt(we=$e(((Me=function(t){function o(){for(var e,o=arguments.length,r=new Array(o),a=0;a<o;a++)r[a]=arguments[a];return e=t.call.apply(t,[this].concat(r))||this,i(e,"clickEvents",Ce,n(e)),i(e,"_interactable",Ee,n(e)),i(e,"_transition",Ne,n(e)),i(e,"_normalColor",Te,n(e)),i(e,"_hoverColor",Oe,n(e)),i(e,"_pressedColor",ke,n(e)),i(e,"_disabledColor",Ae,n(e)),i(e,"_normalSprite",Ie,n(e)),i(e,"_hoverSprite",Le,n(e)),i(e,"_pressedSprite",xe,n(e)),i(e,"_disabledSprite",Pe,n(e)),i(e,"_duration",Be,n(e)),i(e,"_zoomScale",Re,n(e)),i(e,"_target",Fe,n(e)),e._pressed=!1,e._hovered=!1,e._fromColor=new A,e._toColor=new A,e._time=0,e._transitionFinished=!0,e._fromScale=new R,e._toScale=new R,e._originalScale=null,e._sprite=null,e._targetScale=new R,e}e(o,t);var a=o.prototype;return a.onLoad=function(){if(!this.getComponent(F)){var t=this.addComponent(F);if(t){t.sizeMode=F.SizeMode.CUSTOM,t.type=F.Type.SLICED;var e=this.node.getComponent(L);e&&(e.contentSize=M.size(120,40))}var i=D.assets.get("20835ba4-6145-4fbc-a58a-051ce700aa3e@f9941");i&&(t&&!t.spriteFrame&&(t.spriteFrame=i),this._normalSprite||(this._normalSprite=i),this._hoverSprite||(this._hoverSprite=i));var n=D.assets.get("544e49d6-3f05-4fa8-9a9e-091f98fc2ce8@f9941");n&&(this._pressedSprite||(this._pressedSprite=n));var o=D.assets.get("951249e0-9f16-456d-8b85-a6ca954da16b@f9941");o&&(this._disabledSprite||(this._disabledSprite=o))}if(!this.node.getChildByName("Label")){var r=new x("Label"),a=r.addComponent(T);a.node.layer=this.node.layer,a.string="ButtonPro",r.parent=this.node,a.color=A.BLACK,a.fontSize=20}},a.__preload=function(){this.target||(this.target=this.node);var t=this.node.getComponent(F);t&&(this._normalSprite=t.spriteFrame),this._applyTarget(),this._resetState()},a.onEnable=function(){this._registerNodeEvent()},a.onDisable=function(){this._resetState(),this._unregisterNodeEvent()},a.onDestroy=function(){this.target.isValid&&this._unregisterTargetEvent(this.target)},a.update=function(t){var e=this.target;if(!this._transitionFinished&&e&&(this._transition&Je.COLOR||this._transition&Je.SCALE)){this._time+=t;var i=1;if(this._duration>0&&(i=this._time/this._duration),i>=1&&(i=1),this._transition&Je.COLOR){var n=e._uiProps.uiComp;A.lerp(ei,this._fromColor,this._toColor,i),n&&(n.color=ei)}this.transition&Je.SCALE&&(e.getScale(this._targetScale),this._targetScale.x=z(this._fromScale.x,this._toScale.x,i),this._targetScale.y=z(this._fromScale.y,this._toScale.y,i),e.setScale(this._targetScale)),1===i&&(this._transitionFinished=!0)}},a._resizeNodeToTargetNode=function(){if(this.target)this.target._uiProps.uiTransformComp},a._resetState=function(){this._pressed=!1,this._hovered=!1;var t=this.target;if(t){var e=this._transition;if(e&Je.COLOR&&this._interactable){var i=t.getComponent(G);i&&(i.color=this._normalColor)}e&Je.SCALE&&this._originalScale&&t.setScale(this._originalScale),this._transitionFinished=!0}},a._registerNodeEvent=function(){this.node.on(V.TOUCH_START,this._onTouchBegan,this),this.node.on(V.TOUCH_MOVE,this._onTouchMove,this),this.node.on(V.TOUCH_END,this._onTouchEnded,this),this.node.on(V.TOUCH_CANCEL,this._onTouchCancel,this),this.node.on(V.MOUSE_ENTER,this._onMouseMoveIn,this),this.node.on(V.MOUSE_LEAVE,this._onMouseMoveOut,this)},a._registerTargetEvent=function(t){t.on(V.TRANSFORM_CHANGED,this._onTargetTransformChanged,this)},a._unregisterNodeEvent=function(){this.node.off(V.TOUCH_START,this._onTouchBegan,this),this.node.off(V.TOUCH_MOVE,this._onTouchMove,this),this.node.off(V.TOUCH_END,this._onTouchEnded,this),this.node.off(V.TOUCH_CANCEL,this._onTouchCancel,this),this.node.off(V.MOUSE_ENTER,this._onMouseMoveIn,this),this.node.off(V.MOUSE_LEAVE,this._onMouseMoveOut,this)},a._unregisterTargetEvent=function(t){t.off(V.TRANSFORM_CHANGED)},a._getTargetSprite=function(t){var e=null;return t&&(e=t.getComponent(F)),e},a._applyTarget=function(){this.target&&(this._sprite=this._getTargetSprite(this.target),this._originalScale||(this._originalScale=new R),R.copy(this._originalScale,this.target.getScale()),this._registerTargetEvent(this.target))},a._onTargetSpriteFrameChanged=function(t){this._transition&Je.SPRITE&&this._setCurrentStateSpriteFrame(t.spriteFrame)},a._setCurrentStateSpriteFrame=function(t){if(t)switch(this._getButtonState()){case Xe.NORMAL:this._normalSprite=t;break;case Xe.HOVER:this._hoverSprite=t;break;case Xe.PRESSED:this._pressedSprite=t;break;case Xe.DISABLED:this._disabledSprite=t}},a._onTargetColorChanged=function(t){this._transition&Je.COLOR&&this._setCurrentStateColor(t)},a._setCurrentStateColor=function(t){switch(this._getButtonState()){case Xe.NORMAL:this._normalColor=t;break;case Xe.HOVER:this._hoverColor=t;break;case Xe.PRESSED:this._pressedColor=t;break;case Xe.DISABLED:this._disabledColor=t}},a._onTargetTransformChanged=function(t){t&W.SCALE&&this._originalScale&&this._transition&Je.SCALE&&this._transitionFinished&&R.copy(this._originalScale,this.target.getScale())},a._onTouchBegan=function(t){this._interactable&&this.enabledInHierarchy&&(this._pressed=!0,this._updateState(),t&&(t.propagationStopped=!0))},a._onTouchMove=function(t){if(this._interactable&&this.enabledInHierarchy&&this._pressed&&t){var e=t.touch;if(e){var i,n=this.node._uiProps.uiTransformComp.hitTest(e.getLocation());if(this._transition&Je.SCALE&&this.target&&this._originalScale)n?(R.copy(this._fromScale,this._originalScale),R.multiplyScalar(this._toScale,this._originalScale,this._zoomScale),this._transitionFinished=!1):(this._time=0,this._transitionFinished=!0,this.target.setScale(this._originalScale));else i=n?Xe.PRESSED:Xe.NORMAL,this._applyTransition(i);t&&(t.propagationStopped=!0)}}},a._onTouchEnded=function(t){this._interactable&&this.enabledInHierarchy&&(this._pressed&&(B.emitEvents(this.clickEvents,t),this.node.emit(Ye.CLICK,this)),this._pressed=!1,this._updateState(),t&&(t.propagationStopped=!0))},a._onTouchCancel=function(){this._interactable&&this.enabledInHierarchy&&(this._pressed=!1,this._updateState())},a._onMouseMoveIn=function(){!this._pressed&&this.interactable&&this.enabledInHierarchy&&(this._transition&Je.SPRITE&&!this._hoverSprite||this._hovered||(this._hovered=!0,this._updateState()))},a._onMouseMoveOut=function(){this._hovered&&(this._hovered=!1,this._updateState())},a._updateState=function(){var t=this._getButtonState();this._applyTransition(t)},a._getButtonState=function(){var t=Xe.NORMAL;return this._interactable?this._pressed?t=Xe.PRESSED:this._hovered&&(t=Xe.HOVER):t=Xe.DISABLED,t.toString()},a._updateColorTransition=function(t){var e,i=this[t+"Color"],n=null==(e=this.target)?void 0:e.getComponent(G);n&&(t===Xe.DISABLED?(n.color=i,this._transitionFinished=!0):(this._fromColor=n.color.clone(),this._toColor=i,this._time=0,this._transitionFinished=!1))},a._updateSpriteTransition=function(t){var e=this[t+"Sprite"];this._sprite&&e&&(this._sprite.spriteFrame=e)},a._updateScaleTransition=function(t){this._interactable&&(t===Xe.PRESSED?this._zoomUp():this._zoomBack())},a._zoomUp=function(){this._originalScale&&(R.copy(this._fromScale,this._originalScale),R.multiplyScalar(this._toScale,this._originalScale,this._zoomScale),this._time=0,this._transitionFinished=!1)},a._zoomBack=function(){this.target&&this._originalScale&&(R.copy(this._fromScale,this.target.getScale()),R.copy(this._toScale,this._originalScale),this._time=0,this._transitionFinished=!1)},a._applyTransition=function(t){var e=this._transition;e&Je.COLOR&&this._updateColorTransition(t),e&Je.SPRITE&&this._updateSpriteTransition(t),e&Je.SCALE&&this._updateScaleTransition(t)},a._xrHoverEnter=function(){this._onMouseMoveIn(),this._updateState()},a._xrHoverExit=function(){this._onMouseMoveOut(),this._pressed&&(this._pressed=!1,this._updateState())},a._xrClick=function(){this._interactable&&this.enabledInHierarchy&&(this._pressed=!0,this._updateState())},a._xrUnClick=function(){this._interactable&&this.enabledInHierarchy&&(this._pressed&&(B.emitEvents(this.clickEvents,this),this.node.emit(Ye.CLICK,this)),this._pressed=!1,this._updateState())},r(o,[{key:"target",get:function(){return this._target||this.node},set:function(t){this._target!==t&&(this._target&&this._unregisterTargetEvent(this._target),this._target=t,this._applyTarget())}},{key:"interactable",get:function(){return this._interactable},set:function(t){this._interactable!==t&&(this._interactable=t,this._updateState(),this._interactable||this._resetState())}},{key:"_resizeToTarget",set:function(t){t&&this._resizeNodeToTargetNode()}},{key:"transition",get:function(){return this._transition},set:function(t){this._transition!==t&&(this._transition&Je.COLOR&&this._updateColorTransition(Xe.NORMAL),this._transition&Je.SPRITE&&this._updateSpriteTransition(Xe.NORMAL),this._transition=t,this._updateState())}},{key:"normalColor",get:function(){return this._normalColor},set:function(t){this._normalColor!==t&&(this._normalColor.set(t),this._updateState())}},{key:"pressedColor",get:function(){return this._pressedColor},set:function(t){this._pressedColor!==t&&this._pressedColor.set(t)}},{key:"hoverColor",get:function(){return this._hoverColor},set:function(t){this._hoverColor!==t&&this._hoverColor.set(t)}},{key:"disabledColor",get:function(){return this._disabledColor},set:function(t){this._disabledColor!==t&&(this._disabledColor.set(t),this._updateState())}},{key:"duration",get:function(){return this._duration},set:function(t){this._duration!==t&&(this._duration=t)}},{key:"zoomScale",get:function(){return this._zoomScale},set:function(t){this._zoomScale!==t&&(this._zoomScale=t)}},{key:"normalSprite",get:function(){return this._normalSprite},set:function(t){if(this._normalSprite!==t){this._normalSprite=t;var e=this.node.getComponent(F);e&&(e.spriteFrame=t),this._updateState()}}},{key:"pressedSprite",get:function(){return this._pressedSprite},set:function(t){this._pressedSprite!==t&&(this._pressedSprite=t,this._updateState())}},{key:"hoverSprite",get:function(){return this._hoverSprite},set:function(t){this._hoverSprite!==t&&(this._hoverSprite=t,this._updateState())}},{key:"disabledSprite",get:function(){return this._disabledSprite},set:function(t){this._disabledSprite!==t&&(this._disabledSprite=t,this._updateState())}}]),o}(k)).Transition=Je,Me.EventType=Ye,t((ve=Me).prototype,"target",[Xt],Object.getOwnPropertyDescriptor(ve.prototype,"target"),ve.prototype),t(ve.prototype,"interactable",[Yt],Object.getOwnPropertyDescriptor(ve.prototype,"interactable"),ve.prototype),t(ve.prototype,"transition",[qt],Object.getOwnPropertyDescriptor(ve.prototype,"transition"),ve.prototype),t(ve.prototype,"normalColor",[Kt],Object.getOwnPropertyDescriptor(ve.prototype,"normalColor"),ve.prototype),t(ve.prototype,"pressedColor",[Zt],Object.getOwnPropertyDescriptor(ve.prototype,"pressedColor"),ve.prototype),t(ve.prototype,"hoverColor",[Qt],Object.getOwnPropertyDescriptor(ve.prototype,"hoverColor"),ve.prototype),t(ve.prototype,"disabledColor",[$t],Object.getOwnPropertyDescriptor(ve.prototype,"disabledColor"),ve.prototype),t(ve.prototype,"duration",[te],Object.getOwnPropertyDescriptor(ve.prototype,"duration"),ve.prototype),t(ve.prototype,"zoomScale",[ee],Object.getOwnPropertyDescriptor(ve.prototype,"zoomScale"),ve.prototype),t(ve.prototype,"normalSprite",[ie],Object.getOwnPropertyDescriptor(ve.prototype,"normalSprite"),ve.prototype),t(ve.prototype,"pressedSprite",[ne],Object.getOwnPropertyDescriptor(ve.prototype,"pressedSprite"),ve.prototype),t(ve.prototype,"hoverSprite",[oe],Object.getOwnPropertyDescriptor(ve.prototype,"hoverSprite"),ve.prototype),t(ve.prototype,"disabledSprite",[re],Object.getOwnPropertyDescriptor(ve.prototype,"disabledSprite"),ve.prototype),Ce=t(ve.prototype,"clickEvents",[ae,se],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Ee=t(ve.prototype,"_interactable",[le],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),Ne=t(ve.prototype,"_transition",[ce],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return Je.NONE}}),Te=t(ve.prototype,"_normalColor",[ue],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return A.WHITE.clone()}}),Oe=t(ve.prototype,"_hoverColor",[me],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new A(211,211,211,255)}}),ke=t(ve.prototype,"_pressedColor",[he],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return A.WHITE.clone()}}),Ae=t(ve.prototype,"_disabledColor",[pe],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new A(124,124,124,255)}}),Ie=t(ve.prototype,"_normalSprite",[_e],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Le=t(ve.prototype,"_hoverSprite",[de],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),xe=t(ve.prototype,"_pressedSprite",[fe],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Pe=t(ve.prototype,"_disabledSprite",[ye],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Be=t(ve.prototype,"_duration",[ge],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.1}}),Re=t(ve.prototype,"_zoomScale",[Se],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1.2}}),Fe=t(ve.prototype,"_target",[be],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),we=ve))||we)||we)||we);C._RF.pop(),C._RF.push({},"58afbgi72RCYrg3eW8ahovc","CommonBuyBonusCell",void 0);var pi,_i,di,fi,yi,gi,Si,bi,wi,vi,Ci,Ei,Ni,Ti,Oi,ki,Ai,Ii,Li,xi=E.ccclass,Pi=E.property,Bi=(ii=xi("CommonBuyBonusCell"),ni=Pi({type:F,tooltip:"購買文字"}),oi=Pi({type:F,tooltip:"項目標題"}),ri=Pi({type:H,tooltip:"標題圖片名稱"}),ai=Pi({type:T,tooltip:"金額"}),ii((ci=t((li=function(t){function o(){for(var e,o=arguments.length,r=new Array(o),a=0;a<o;a++)r[a]=arguments[a];return e=t.call.apply(t,[this].concat(r))||this,i(e,"m_buyHintSprite",ci,n(e)),i(e,"m_titleSprite",ui,n(e)),i(e,"m_titlePicName",mi,n(e)),i(e,"m_priceLabel",hi,n(e)),e}e(o,t);var r=o.prototype;return r.start=function(){var t=c.GetGameAtlas();c.CurrLang!==l.Lang.EN&&(this.m_buyHintSprite.spriteFrame=t.getSpriteFrame("Txt_Buy_Feature_Buy"),this.m_titleSprite.spriteFrame=t.getSpriteFrame(this.m_titlePicName))},r.SetPrice=function(t){this.m_priceLabel.string=t},o}(k)).prototype,"m_buyHintSprite",[ni],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ui=t(li.prototype,"m_titleSprite",[oi],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),mi=t(li.prototype,"m_titlePicName",[ri],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),hi=t(li.prototype,"m_priceLabel",[ai],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),si=li))||si);C._RF.pop(),C._RF.push({},"deede8s0zBMX57ZpiWkWMfR","CommonBuyBonus",void 0);var Ri,Fi,Mi,Di,zi,Gi,Vi,Wi,Hi,Ui,ji,Ji,Xi,Yi,qi,Ki,Zi,Qi,$i,tn,en,nn,on,rn,an,sn,ln,cn,un,mn="Buy_Feature_Open",hn="Buy_Feature_Close",pn=E.ccclass,_n=E.property;pi=pn("CommonBuyBonus"),_i=_n({type:x,tooltip:"介面"}),di=_n({type:U,tooltip:"介面開關動畫"}),fi=_n({type:x,tooltip:"開啟按鈕節點"}),yi=_n({type:T,tooltip:"押注金額"}),gi=_n({type:Bi,tooltip:"購買項目"}),Si=_n({type:F,tooltip:"標題"}),bi=_n({type:F,tooltip:"押注"}),wi=_n({type:T,tooltip:"幣別符號"}),pi((Ei=t((Ci=function(t){function f(){for(var e,o=arguments.length,r=new Array(o),a=0;a<o;a++)r[a]=arguments[a];return e=t.call.apply(t,[this].concat(r))||this,i(e,"m_viewNode",Ei,n(e)),i(e,"m_anim",Ni,n(e)),i(e,"m_openBtnNode",Ti,n(e)),i(e,"m_betLabel",Oi,n(e)),i(e,"m_buyBonusCells",ki,n(e)),i(e,"m_titleSprite",Ai,n(e)),i(e,"m_betSprite",Ii,n(e)),i(e,"m_currencyLabel",Li,n(e)),e.m_iGameView=null,e.m_setting=null,e.m_betList=null,e.m_betIdx=0,e.m_bonusType=null,e.m_isPlayingAnim=!1,e}e(f,t);var y=f.prototype;return y.start=function(){this.m_viewNode.active=!0;var t=c.GetGameAtlas();c.CurrLang!==l.Lang.EN&&(this.m_betSprite.spriteFrame=t.getSpriteFrame("Txt_Buy_Feature_Bet"),this.m_titleSprite.spriteFrame=t.getSpriteFrame("Txt_Buy_Feature_Title"))},y.Init=function(t,e){var i=this;if(this.m_viewNode.active=!1,t&&!o.CheckSwitchOff(u.ShopingMall)){this.m_setting=t,this.m_iGameView=e,this.m_betList=JSON.parse(JSON.stringify(m.GetBetList()));for(var n=this.m_betList.length-1;n>=0&&this.m_betList[n]>this.m_setting.MaxBet;n--)this.m_betList.splice(n);this.m_betIdx=m.GetNowBetIndex(),(!this.m_betList[this.m_betIdx]||this.m_betList[this.m_betIdx]>this.m_betList[this.m_betList.length-1])&&(this.m_betIdx=this.m_betList.length-1),this.SetPrice();for(var r=function(t){i.m_buyBonusCells[t].getComponent(X).node.on(x.EventType.TOUCH_END,(function(){_.Play(l.AudioClips.COMMON_BTN),i.m_isPlayingAnim||(d.ForceChangeExtraBetMode(!1),i.m_bonusType=t,i.Hide(),m.SetNowBet(i.m_betList[i.m_betIdx]),i.m_iGameView.ClickSpin())}))},a=0;a<this.m_buyBonusCells.length;a++)r(a);this.m_viewNode.active=!1}else this.SetBuyBtnVisible(!1)},y.SetPrice=function(){var t=this.m_betList[this.m_betIdx];this.m_currencyLabel&&(l.DollarSymbol?this.m_currencyLabel.string="("+l.DollarSymbol+")":this.m_currencyLabel.node.active=!1),this.m_betLabel.string=""+l.DollarSymbol+o.FormatNumberThousands(t,o.FORMAT_NUMBER_TYPE.PERMANENT_DOT);for(var e=0;e<this.m_buyBonusCells.length;e++){var i=o.times(t,this.m_setting.PriceOdd[e]);this.m_buyBonusCells[e].SetPrice(""+l.DollarSymbol+o.FormatNumberThousands(i,o.FORMAT_NUMBER_TYPE.PERMANENT_DOT))}},y.SetBuyBtnVisible=function(t){this.m_openBtnNode.active=!!this.m_setting&&t},y.GetBuyBtnVisible=function(){return this.m_openBtnNode.active},y.GetBuyBonusBet=function(){return this.m_setting&&null!==this.m_bonusType?o.times(this.m_setting.PriceOdd[this.m_bonusType],m.GetNowBetValue()):o.strip(m.GetNowBetValue())},y.CleanInfo=function(){this.m_bonusType=null},y.IsOpen=function(){return this.m_viewNode.active},y.Show=function(){var t=this;if(!(h.Current()!==p.IDLE||l.FreeSpinRemain>0)&&(!this.m_anim.getState(hn).isPlaying&&!this.m_viewNode.active)){j.stopAllByTarget(this.node),this.m_isPlayingAnim=!0,_.Play(l.AudioClips.COMMON_BTN),this.m_viewNode.active=!0,this.m_anim.play(mn);var e=this.m_anim.getState(mn);J(this.node).delay(e.duration).call((function(){t.m_isPlayingAnim=!1})).start();var i="-1",n=0;l.APP&&(i=l.APP.GetAID(),n=Number(l.APP.GetApiID())),l.SendBtnClickEvent(Number(i),n,Number(l.NOW_GAME_ID),this.m_iGameView.Version,l.BTN_CLICK_EVENT.INGAME_BUY_BONUS,0,!1)}},y.Hide=function(){var t=a(s().mark((function t(){var e,i,n,o=this;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=this.m_anim.getState(hn),this.m_viewNode.active&&!e.isPlaying){t.next=3;break}return t.abrupt("return");case 3:return(i=this.m_anim.getState(mn)).isPlaying&&i.stop(),j.stopAllByTarget(this.node),this.m_isPlayingAnim=!0,_.Play(l.AudioClips.COMMON_BTN),this.m_anim.play(hn),e=this.m_anim.getState(hn),J(this.node).delay(i.duration).call((function(){o.m_isPlayingAnim=!1})).start(),n=this.m_anim.getState(hn),t.next=14,l.Wait(this,n.duration);case 14:this.m_viewNode.active=!1;case 15:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),y.AddBet=function(){this.m_betIdx+1>this.m_betList.length-1||(_.Play(l.AudioClips.COMMON_BTN),this.m_betIdx++,this.SetPrice())},y.SubBet=function(){this.m_betIdx-1<0||(_.Play(l.AudioClips.COMMON_BTN),this.m_betIdx--,this.SetPrice())},r(f,[{key:"BonusType",get:function(){return this.m_bonusType}}]),f}(k)).prototype,"m_viewNode",[_i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ni=t(Ci.prototype,"m_anim",[di],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ti=t(Ci.prototype,"m_openBtnNode",[fi],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Oi=t(Ci.prototype,"m_betLabel",[yi],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ki=t(Ci.prototype,"m_buyBonusCells",[gi],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Ai=t(Ci.prototype,"m_titleSprite",[Si],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ii=t(Ci.prototype,"m_betSprite",[bi],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Li=t(Ci.prototype,"m_currencyLabel",[wi],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),vi=Ci));C._RF.pop(),C._RF.push({},"da7972YP9VAta/rfkmC0gmE","ColorText",void 0);var dn,fn,yn,gn,Sn,bn,wn,vn,Cn=E.ccclass,En=E.property,Nn=E.requireComponent,Tn=E.executeInEditMode;Ri=Cn("ColorText"),Fi=Nn(T),Mi=En(Y),Di=En(q),zi=En(A),Gi=En({tooltip:"使用該元件的自定義材質",type:Y}),Vi=En({tooltip:"顏色漸變元件",type:q}),Wi=En({tooltip:"正片疊底顏色",type:A}),Hi=En({tooltip:"顏色漸變貼圖的範圍",range:[0,1,.01],slide:!0}),Ui=En({tooltip:"是否垂直漸變顏色"}),ji=En({tooltip:"上內陰影顏色",type:A}),Ji=En({tooltip:"下內陰影顏色",type:A}),Xi=En({tooltip:"上內陰影顏色高度 (Pixel)"}),Yi=En({tooltip:"下內陰影顏色高度 (Pixel)"}),qi=En({tooltip:"上內陰影插值比例 (0 ~ 1)",range:[0,1,.01],slide:!0}),Ki=En({tooltip:"下內陰影插值比例 (0 ~ 1)",range:[0,1,.01],slide:!0}),Ri(Zi=Fi(Zi=Tn(($i=t((Qi=function(t){function o(){for(var e,o=arguments.length,r=new Array(o),a=0;a<o;a++)r[a]=arguments[a];return e=t.call.apply(t,[this].concat(r))||this,i(e,"_textMaterial",$i,n(e)),i(e,"_gradient",tn,n(e)),i(e,"_gradientMultiply",en,n(e)),i(e,"_gradientShrink",nn,n(e)),i(e,"_isVertical",on,n(e)),i(e,"_innerShadowColor1",rn,n(e)),i(e,"_innerShadowColor2",an,n(e)),i(e,"_innerShadowHeight1",sn,n(e)),i(e,"_innerShadowHeight2",ln,n(e)),i(e,"_innerShadowRate1",cn,n(e)),i(e,"_innerShadowRate2",un,n(e)),e.pixelNum=128,e.colorTexture=null,e.isGradientChanged=!0,e}e(o,t);var a=o.prototype;return a.onLoad=function(){var t=this.node.getComponent(T);null!==t.customMaterial&&(t.customMaterial!==t.sharedMaterial&&t.customMaterial.destroy(),t.customMaterial=null),t.color=A.WHITE,null===this._textMaterial&&console.warn("ColorText.textMaterial should be not null.")},a.onEnable=function(){this.reset()},a.onDestroy=function(){var t;null==(t=this.colorTexture)||t.destroy(),this.colorTexture=null},a.reset=function(){null===this.colorTexture&&(this.colorTexture=this.createColorTexture()),!0===this.isGradientChanged&&(this.isGradientChanged=!1,this.updateColorTexture());var t=this.node.getComponent(T),e=t.customMaterial;if(!e&&this._textMaterial&&((e=new Y).copy(this._textMaterial),t.customMaterial=e),e){e.setProperty("gradientMap",this.colorTexture),e.setProperty("gradientMultiply",this._gradientMultiply),e.setProperty("gradientShrink",this._gradientShrink),e.setProperty("innerShadow1",this._innerShadowColor1),e.setProperty("innerShadow2",this._innerShadowColor2);var i=0,n=0,o=this.node.getComponent(L).contentSize;o.height>0&&(i=this._innerShadowHeight1/o.height,n=this._innerShadowHeight2/o.height);var r=K(i,n,this._innerShadowRate1,this._innerShadowRate2);e.setProperty("innerShadowParam",r)}},a.createColorTexture=function(){var t=new Z,e=this.pixelNum,i=1;return!0===this._isVertical&&(i=e,e=1),t.reset({width:e,height:i,format:Z.PixelFormat.RGBA8888,mipmapLevel:0}),t.setWrapMode(Z.WrapMode.CLAMP_TO_EDGE,Z.WrapMode.CLAMP_TO_EDGE),t.setFilters(Z.Filter.LINEAR,Z.Filter.LINEAR),t},a.updateColorTexture=function(){for(var t=this.pixelNum,e=new Uint8ClampedArray(4*t),i=0,n=this._gradient,o=0;o<t;++o){var r=n.evaluate(o/t);e[i++]=r.r,e[i++]=r.g,e[i++]=r.b,e[i++]=r.a}var a=this.colorTexture;a.uploadData(e,0,0),a.updateImage()},r(o,[{key:"textMaterial",get:function(){return this._textMaterial},set:function(t){this._textMaterial=t,this.reset()}},{key:"gradient",get:function(){return this._gradient},set:function(t){this.isGradientChanged=!0,this._gradient=t,this.reset()}},{key:"gradientMultiply",get:function(){return this._gradientMultiply},set:function(t){this._gradientMultiply=t,this.reset()}},{key:"gradientShrink",get:function(){return this._gradientShrink},set:function(t){this._gradientShrink=t,this.reset()}},{key:"isVertical",get:function(){return this._isVertical},set:function(t){var e;this._isVertical!==t&&(null==(e=this.colorTexture)||e.destroy(),this.colorTexture=null);this._isVertical=t,this.reset()}},{key:"innerShadowColor1",get:function(){return this._innerShadowColor1},set:function(t){this._innerShadowColor1.set(t),this.reset()}},{key:"innerShadowColor2",get:function(){return this._innerShadowColor2},set:function(t){this._innerShadowColor2.set(t),this.reset()}},{key:"innerShadowHeight1",get:function(){return this._innerShadowHeight1},set:function(t){this._innerShadowHeight1=t,this.reset()}},{key:"innerShadowHeight2",get:function(){return this._innerShadowHeight2},set:function(t){this._innerShadowHeight2=t,this.reset()}},{key:"innerShadowRate1",get:function(){return this._innerShadowRate1},set:function(t){this._innerShadowRate1=Q(t),this.reset()}},{key:"innerShadowRate2",get:function(){return this._innerShadowRate2},set:function(t){this._innerShadowRate2=t,this.reset()}}]),o}(k)).prototype,"_textMaterial",[Mi],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),tn=t(Qi.prototype,"_gradient",[Di],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new q}}),en=t(Qi.prototype,"_gradientMultiply",[zi],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return $(255,255,255,255)}}),nn=t(Qi.prototype,"_gradientShrink",[En],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.15}}),on=t(Qi.prototype,"_isVertical",[En],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),t(Qi.prototype,"textMaterial",[Gi],Object.getOwnPropertyDescriptor(Qi.prototype,"textMaterial"),Qi.prototype),t(Qi.prototype,"gradient",[Vi],Object.getOwnPropertyDescriptor(Qi.prototype,"gradient"),Qi.prototype),t(Qi.prototype,"gradientMultiply",[Wi],Object.getOwnPropertyDescriptor(Qi.prototype,"gradientMultiply"),Qi.prototype),t(Qi.prototype,"gradientShrink",[Hi],Object.getOwnPropertyDescriptor(Qi.prototype,"gradientShrink"),Qi.prototype),t(Qi.prototype,"isVertical",[Ui],Object.getOwnPropertyDescriptor(Qi.prototype,"isVertical"),Qi.prototype),rn=t(Qi.prototype,"_innerShadowColor1",[En],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return $(255,255,255,255)}}),an=t(Qi.prototype,"_innerShadowColor2",[En],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return $(255,255,255,255)}}),sn=t(Qi.prototype,"_innerShadowHeight1",[En],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),ln=t(Qi.prototype,"_innerShadowHeight2",[En],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 2}}),cn=t(Qi.prototype,"_innerShadowRate1",[En],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),un=t(Qi.prototype,"_innerShadowRate2",[En],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),t(Qi.prototype,"innerShadowColor1",[ji],Object.getOwnPropertyDescriptor(Qi.prototype,"innerShadowColor1"),Qi.prototype),t(Qi.prototype,"innerShadowColor2",[Ji],Object.getOwnPropertyDescriptor(Qi.prototype,"innerShadowColor2"),Qi.prototype),t(Qi.prototype,"innerShadowHeight1",[Xi],Object.getOwnPropertyDescriptor(Qi.prototype,"innerShadowHeight1"),Qi.prototype),t(Qi.prototype,"innerShadowHeight2",[Yi],Object.getOwnPropertyDescriptor(Qi.prototype,"innerShadowHeight2"),Qi.prototype),t(Qi.prototype,"innerShadowRate1",[qi],Object.getOwnPropertyDescriptor(Qi.prototype,"innerShadowRate1"),Qi.prototype),t(Qi.prototype,"innerShadowRate2",[Ki],Object.getOwnPropertyDescriptor(Qi.prototype,"innerShadowRate2"),Qi.prototype),Zi=Qi))||Zi)||Zi);C._RF.pop(),C._RF.push({},"ccb69RBfI5KBKNPuwywfE10","ColorFadingUI",void 0);var On,kn=E.ccclass,An=E.property,In=E.executeInEditMode;dn=kn("ColorFadingUI"),fn=An({type:tt,tooltip:"Color Fading 預設 shader"}),yn=An({type:et,tooltip:"Gradient Texture Size"}),gn=An({type:it,tooltip:"是否使用alpha test, Spine建議開啟"}),Sn=An({type:O,tooltip:"混合比例，0~1之間"}),bn=An({type:q,tooltip:"當前Gradient"}),dn(wn=In((t((vn=function(t){function i(){for(var e,i=arguments.length,n=new Array(i),o=0;o<i;o++)n[o]=arguments[o];return(e=t.call.apply(t,[this].concat(n))||this).m_colorFadingEffect=null,e.m_gradientTextureSize=64,e.m_currGradient=new q,e.m_mixRate=0,e.m_useAlphaTest=!1,e.m_tex=new Z,e.m_use_colorfading=!0,e.m_renderComponent=null,e.m_copyEffect=null,e}e(i,t);var n=i.prototype;return n.start=function(){this.GenerateMat()},n.onDestroy=function(){this.m_use_colorfading=!1},n.Init=function(t,e,i,n,o,r){void 0===i&&(i=0),void 0===n&&(n=64),void 0===o&&(o=!0),void 0===r&&(r=!1),this.ColorFadingEffect=t,this.CurrentGradient=e,this.UseAlphaTest=r,this.MixRate=i,this.GradientTextureSize=n,this.UseColorFadingAPI(o),this.GenerateMat()},n.UseColorFadingAPI=function(t){this.m_use_colorfading=t,this.GenerateMat()},n.ResetGradient=function(){this.m_mixRate=1,this.m_currGradient=new q,this.LoadTexture()},n.GenerateMat=function(){var t=this.GetRenderComponent();if(null!=t&&null!=this.m_colorFadingEffect){var e=new Y;e.initialize({effectAsset:this.m_colorFadingEffect,technique:0,defines:{USE_COLOR_FADING:this.m_use_colorfading,USE_ALPHA_TEST:this.m_useAlphaTest}}),t.customMaterial=e,this.LoadTexture()}},n.LoadTexture=function(){if(null==this.m_colorFadingEffect)nt("Warning! No effect asset loaded!");else{nt("loadTexture",this.m_currGradient),this.m_gradientTextureSize<=0&&(this.m_gradientTextureSize=1);for(var t=[],e=1/this.m_gradientTextureSize,i=0;i<=1;i++)for(var n=0;n<=this.m_gradientTextureSize;n+=e){var o=new A;o=this.m_currGradient.evaluate(n),t.push(o.r),t.push(o.g),t.push(o.b),t.push(o.a)}this.CreateTexture(t)}},n.CreateTexture=function(t){var e=new Uint8Array(t),i=new ot;this.m_gradientTextureSize<=0&&(this.m_gradientTextureSize=1),i.reset({_data:e,width:this.m_gradientTextureSize,height:1,format:Z.PixelFormat.RGBA8888,_compressed:!1}),this.m_tex.image=i,this.m_tex.setWrapMode(Z.WrapMode.CLAMP_TO_EDGE,Z.WrapMode.CLAMP_TO_EDGE),this.UpdateMaterial()},n.UpdateMaterial=function(){var t=this.GetRenderComponent();if(null!=t){var e=t.customMaterial;e&&(e.setProperty("gradient",this.m_tex),e.setProperty("mixRate",this.m_mixRate))}},n.GetRenderComponent=function(){return null==this.m_renderComponent&&(this.m_renderComponent=this.node.getComponent(F)),null==this.m_renderComponent&&(this.m_renderComponent=this.node.getComponent(N.Skeleton)),null==this.m_renderComponent&&(this.m_renderComponent=this.node.getComponent(T)),this.m_renderComponent},r(i,[{key:"ColorFadingEffect",get:function(){return this.m_copyEffect},set:function(t){null!=t&&(this.m_colorFadingEffect=t),this.m_copyEffect=t}},{key:"GradientTextureSize",get:function(){return this.m_gradientTextureSize},set:function(t){this.m_gradientTextureSize=t,null!=this.m_tex&&this.LoadTexture()}},{key:"UseAlphaTest",get:function(){return this.m_useAlphaTest},set:function(t){this.m_useAlphaTest=t}},{key:"MixRate",get:function(){return this.m_mixRate},set:function(t){if(t>1)this.m_mixRate=1;else if(t<0)this.m_mixRate=0;else{this.m_mixRate=t;var e=this.GetRenderComponent();if(null!=e){var i=e.customMaterial;i?i.setProperty("mixRate",this.m_mixRate):this.GenerateMat()}}}},{key:"CurrentGradient",get:function(){return this.m_currGradient},set:function(t){this.m_currGradient=t,this.LoadTexture()}}]),i}(k)).prototype,"ColorFadingEffect",[fn],Object.getOwnPropertyDescriptor(vn.prototype,"ColorFadingEffect"),vn.prototype),t(vn.prototype,"GradientTextureSize",[yn],Object.getOwnPropertyDescriptor(vn.prototype,"GradientTextureSize"),vn.prototype),t(vn.prototype,"UseAlphaTest",[gn],Object.getOwnPropertyDescriptor(vn.prototype,"UseAlphaTest"),vn.prototype),t(vn.prototype,"MixRate",[Sn],Object.getOwnPropertyDescriptor(vn.prototype,"MixRate"),vn.prototype),t(vn.prototype,"CurrentGradient",[bn],Object.getOwnPropertyDescriptor(vn.prototype,"CurrentGradient"),vn.prototype),wn=vn))||wn);C._RF.pop(),C._RF.push({},"9cd57oopkhBmZJ5o4EZK1tk","EvtReceiver",void 0);var Ln,xn=(0,E.ccclass)(On=function(t){function i(){for(var e,i=arguments.length,n=new Array(i),o=0;o<i;o++)n[o]=arguments[o];return(e=t.call.apply(t,[this].concat(n))||this).m_callback=void 0,e}e(i,t),i.Pack=function(t,e){t.addComponent(i),t.getComponent(i).SetCallback(e)};var n=i.prototype;return n.EvtReciever=function(t){nt("AnimEvtReciever: ",t),this.m_callback?this.m_callback(t):nt("callback沒有設定，無法處理event: ",t)},n.triggerAnimationEvent=function(t){nt("triggerAnimationEvent: ",t),this.m_callback?this.m_callback(t):nt("callback沒有設定，無法處理event: ",t)},n.SetCallback=function(t){this.m_callback=t},n.onDestroy=function(){this.m_callback=null},i}(k))||On;C._RF.pop(),C._RF.push({},"bc3c97zP8pM2I5NAob2S72W","EffectView",void 0);var Pn,Bn,Rn,Fn,Mn,Dn,zn,Gn,Vn,Wn,Hn,Un,jn,Jn,Xn,Yn,qn,Kn,Zn=function(t){function i(){var e;return(e=t.call(this)||this).m_awardBoardFile=i.EFFECT_ROOT+"win/awardBoard",e.m_effectList={},e.m_timeLineList={},e.m_winEffCbFunc=null,e.m_currentWinEffect=null,e.m_currentWinEffectTimeline=null,e.m_awardBoard=null,e.m_awardBoardTimeline=null,e.m_txtWinValue=null,e.m_durRollMoneyTick=i.MONEY_ROLL_TIME,e.m_moneyRealValue=0,e.m_moneyRollValue=0,e.m_bgMaskNode=null,e.m_commonGetCoinCbFunc=null,e.m_commonGetCoinMidCbFunc=null,e.m_commonGetCoinEff=null,e.m_commonGetCoinTline=null,e.m_updateMoneyEff=null,e.m_updateMoneyTline=null,e.m_getCoinParticle=null,e.m_odds=[3,5,10,20,30],e.m_winEffectFiles=[null,null,i.EFFECT_ROOT+i.FILE_PATH.BIG_WIN,i.EFFECT_ROOT+i.FILE_PATH.MEGA_WIN,i.EFFECT_ROOT+i.FILE_PATH.SUPER_WIN],e.m_coinEffects=[2,3,5,5,5],e.m_coinTimes=[2,2,5,5,5],e.m_soundNameByOdds=[],e.m_isAutoCheckFloat=!1,e.m_rotateCoins={},e.m_coinEffectNode=void 0,e.m_loadedSound=void 0,e.m_isLandscape=!1,e.m_LandscapeRate=1,e.m_winType=void 0,e.m_nowPlaySoundID=null,e.m_loadedSound=!1,e}e(i,t);var n=i.prototype;return n.LoadSound=function(){this.m_loadedSound=!0},n.OnUpdate=function(t){this.RollWinMoney(t)},n.ShowWinAndCoinEffect=function(t,e,i){void 0===i&&(i=null),i=i||null;var n=f.GetManagerId(i);this.ShowWinEffect(t,n),void 0!==t.playCoinAtWinEffect&&!0!==t.playCoinAtWinEffect||this.playCoinEffect(e,n),f.StartLoad(n)},n.ShowWinEffect=function(t,e){var n=this;void 0===e&&(e=-1);var r=t.effectFile,a=t.winValue,s=t.cbFunc,c=t.yPos,u=t.deltaY,m=t.cbFuncBtoM,h=t.cbFuncMtoS,p=t.cbFuncPlaying,_=t.isLoop||!1,d=t.rollTime;if(null!=a){var y=function(){n.m_bgMaskNode&&(n.m_bgMaskNode.active=!0),nt("LoadPrefabManager CB",a),c=null!=c&&c||i.DEFAULT_Y,n.m_effectList[r].setPosition(ct(i.DesignSize.width/2,c)),n.m_effectList[r].active=!0,n.m_timeLineList[r].play(i.ANI_LABEL.ACT),n.m_currentWinEffect=n.m_effectList[r],n.m_currentWinEffectTimeline=n.m_timeLineList[r],n.m_currentWinEffectTimeline.name=r,u=r==i.FILE_PATH.JACKPOT?180:null!=u?u:230,n.m_awardBoard.setPosition(ct(i.DesignSize.width/2,c-u)),n.m_awardBoard.active=!0,n.m_awardBoardTimeline.play(i.ANI_LABEL.ACT),n.SetWinValue(a,d),null==p||p()},g=e;-1==e&&(g=f.GetManagerId(y)),this.m_winEffCbFunc=s,null==this.m_effectList[r]?(f.AddLoad(g),l.GameBundle.load(r,(function(t,e){if(t)at(t.message||t);else{var a=st(e);a.active=!1,n.addChild(a),o.SetZIndex(a,i.EFF_ZORDER.WIN_EFFECT);var s=a.getComponent(U);xn.Pack(a,(function(t){if(t==i.ANI_FRAME_EVENT.ENDING)n.m_awardBoard&&n.m_awardBoard.active&&n.m_awardBoardTimeline.play(i.ANI_LABEL.ENDING);else if(t==i.ANI_FRAME_EVENT.LOOP){if(_)s.play(i.ANI_LABEL.LOOP),s.getState(i.ANI_LABEL.LOOP).wrapMode=lt.WrapMode.Loop}else t==i.ANI_FRAME_EVENT.B_TO_M?(n.m_awardBoard&&n.m_awardBoard.active&&J(n.m_txtWinValue).by(.25,{scale:ct(1.5,1.5,1.5)}).by(.1,{scale:ct(.9,.9,.9)}).start(),m&&m()):t==i.ANI_FRAME_EVENT.M_TO_S?(n.m_awardBoard&&n.m_awardBoard.active&&J(n.m_txtWinValue).by(.25,{scale:ct(1.5,1.5,1.5)}).by(.1,{scale:ct(.9,.9,.9)}).start(),null==h||h()):t==i.ANI_FRAME_EVENT.END&&(nt("ANI_FRAME_EVENT.END"),n.OnAnimationEnd(),n.m_winEffCbFunc&&n.m_winEffCbFunc())})),a.active=!1,n.m_effectList[r]=a,n.m_timeLineList[r]=s,f.OnLoaded(g)}})),null==this.m_awardBoard&&(f.AddLoad(g),l.GameBundle.load(this.m_awardBoardFile,(function(t,e){t?at(t.message||t):(n.m_awardBoard=st(e),n.addChild(n.m_awardBoard),o.SetZIndex(n.m_awardBoard,i.EFF_ZORDER.AWARD_BOARD),n.m_awardBoard.active=!1,n.m_awardBoardTimeline=n.m_awardBoard.getComponent(U),n.m_txtWinValue=n.m_awardBoard.getChildByName("win_value_label"),f.OnLoaded(g))}))),-1==e?f.StartLoad(g):f.AddOnLoadedCallback(g,y)):-1==e?y():f.AddOnLoadedCallback(g,y)}else this.m_awardBoard&&(this.m_awardBoard.active=!1,this.m_awardBoardTimeline.stop())},n.WinEffect=function(){this.m_currentWinEffectTimeline&&this.m_currentWinEffectTimeline.play(i.ANI_LABEL.ENDING,!1)},n.SetWinValue=function(t,e,n){void 0===e&&(e=null),void 0===n&&(n=0),this.m_moneyRealValue=o.strip(t),this.m_moneyRollValue=n,e=null==e&&i.MONEY_ROLL_TIME||e,this.m_durRollMoneyTick=o.strip(e)},n.RollWinMoney=function(t){if(this.m_moneyRealValue=o.strip(this.m_moneyRealValue),this.m_moneyRollValue=o.strip(this.m_moneyRollValue),this.m_moneyRollValue<this.m_moneyRealValue){var e=o.divide(this.m_durRollMoneyTick,o.strip(t)),i=o.divide(o.strip(this.m_moneyRealValue-this.m_moneyRollValue),e),n=o.FORMAT_NUMBER_TYPE.DEFINE_DOT;this.m_isAutoCheckFloat&&(n=this.m_moneyRealValue.toString().indexOf(".")>-1?o.FORMAT_NUMBER_TYPE.PERMANENT_DOT:o.FORMAT_NUMBER_TYPE.NONE_DOT),this.m_moneyRollValue=o.strip(this.m_moneyRollValue+i),this.m_moneyRollValue>this.m_moneyRealValue&&(this.m_moneyRollValue=this.m_moneyRealValue),this.SetLabelString(this.m_txtWinValue,this.m_moneyRollValue,n),this.m_durRollMoneyTick=o.strip(this.m_durRollMoneyTick-t)}},n.SetLabelString=function(t,e,i){void 0===i&&(i=null);var n=t.getComponent(T);if(null!=n&&null!=n){if(null==i||null==i)n.string=e.toString();else{var r;if("number"==typeof e)r=e;else{var a=e.replace(/,/g,"");r=isNaN(Number(a))?0:Number(a)}n.string=o.FormatNumberThousands(r,i)}o.SetFont(n)}else nt("Warning!!!!!!!!!! SetLabelString: ",t)},n.SetWinMoneyToMax=function(){},n.IsRollMoneyEnd=function(){return this.m_moneyRollValue==this.m_moneyRealValue},n.StopAnimation=function(t){this.m_currentWinEffectTimeline&&this.m_currentWinEffectTimeline.stop(),this.m_awardBoard&&(this.m_awardBoard.active=!1,this.m_awardBoardTimeline.stop()),1!=t&&this.m_winEffCbFunc&&this.m_winEffCbFunc(),this.m_winEffCbFunc=null,this.OnAnimationEnd()},n.OnAnimationEnd=function(){this.m_currentWinEffect&&(this.m_currentWinEffect.active=!1),this.m_bgMaskNode&&(this.m_bgMaskNode.active=!1),this.m_moneyRealValue=0,this.m_moneyRollValue=0},n.playCoinEffect=function(t,e){var n=this;if(void 0===e&&(e=-1),l.CommonBundle){var r=t.level,a=t.position,s=t.time;null==s&&(s=0);var c=t.zOrder;null==c&&(c=0);var u=t.parent;this.stopCoinEffectImmly();var m=i.COIN_EFFECT_LIST[r];if(m=o.GetFilePath(m)){nt("~~~~~~~~~~~~~~~~~~~~~~",t,s,c);var h=function(){n.m_coinEffectNode.setPosition(ct(a.x,a.y)),null==u||null==u?(n.addChild(n.m_coinEffectNode),o.SetZIndex(n.m_coinEffectNode,0)):(u.addChild(n.m_coinEffectNode),o.SetZIndex(n.m_coinEffectNode,c)),0!=s&&J(n).delay(s).call((function(){n.stopCoinEffect()})).start()};-1!=e&&(f.AddOnLoadedCallback(e,h),f.AddLoad(e)),l.CommonBundle.load(m,(function(t,i){nt("LoadRes ",m),t?at(t.message||t):(n.m_coinEffectNode=st(i),n.m_coinEffectNode?-1==e?h():f.OnLoaded(e):nt("SlotBottomBarView.playCoinEffect m_coinEffect is null"))}))}}},n.stopCoinEffectImmly=function(){null!=this.m_coinEffectNode&&this.m_coinEffectNode.removeFromParent&&(this.m_coinEffectNode.removeFromParent(),this.m_coinEffectNode=null)},n.stopCoinEffect=function(){if(null!=this.m_coinEffectNode&&this.m_coinEffectNode){var t=this.m_coinEffectNode.getChildByName("Particle_1").getComponent(ut),e=this.m_coinEffectNode.getChildByName("Particle_2").getComponent(ut);t&&t.stopSystem(),e&&e.stopSystem()}},n.ShowCommonEffect=function(t,e,n,o){void 0===n&&(n=null),void 0===o&&(o=null),n=n||{},o=o||{};var r=new mt(i.DesignSize.width/2,i.DesignSize.height),a=new mt(i.DesignSize.width/2-10,145),s=void 0,l=t/e;m&&(t=m.GetDisplayValue(t));for(var c=this.m_odds.length-1;c>=0;c--)if(l>=this.m_odds[c]){o.level=this.m_coinEffects[c],5==this.m_coinEffects[c]?o.position=o.position?o.position:r:o.position=o.smallPosition?o.smallPosition:o.position?o.position:a,(null==o.time||o.time<=0)&&(o.time=this.m_coinTimes[c]),5==this.m_coinEffects[c]?(n.effectFile=this.m_winEffectFiles[c],n.winValue=t,this.SetWinType(c),this.ShowWinAndCoinEffect(n,o)):this.playCoinEffect(o),s=this.m_soundNameByOdds[c];break}return null!=s&&(this.m_nowPlaySoundID=_.Play(s,!1)),null==o.time&&(o.time=0),o.time},n.SkipEffect=function(){if(this.stopCoinEffect(),ht.instance.ActionManager.removeAllActionsFromTarget(this),this.m_currentWinEffectTimeline){var t=this.m_currentWinEffectTimeline.name,e=o.FORMAT_NUMBER_TYPE.DEFINE_DOT;t!=i.FILE_PATH.BIG_WIN&&t!=i.FILE_PATH.MEGA_WIN&&t!=i.FILE_PATH.SUPER_WIN||(this.m_moneyRollValue=o.strip(this.m_moneyRollValue),this.m_moneyRealValue=o.strip(this.m_moneyRealValue),this.m_moneyRollValue==this.m_moneyRealValue?(this.m_awardBoardTimeline.play(i.ANI_LABEL.ENDING),this.m_currentWinEffectTimeline.setCurrentTime(5)):(this.m_isAutoCheckFloat&&(e=this.m_moneyRealValue.toString().indexOf(".")>-1?o.FORMAT_NUMBER_TYPE.PERMANENT_DOT:o.FORMAT_NUMBER_TYPE.NONE_DOT),this.SetLabelString(this.m_txtWinValue,this.m_moneyRealValue,e),this.m_currentWinEffectTimeline.setCurrentTime(3.8)),this.m_currentWinEffectTimeline=null),this.m_moneyRollValue=this.m_moneyRealValue}},n.SkipEffectSound=function(){this.m_nowPlaySoundID&&(_.Stop(this.m_nowPlaySoundID),this.m_nowPlaySoundID=null)},n.SetAutoCheckFloat=function(t){this.m_isAutoCheckFloat=t},n.SetOdds=function(t){this.m_odds=t},n.SetWinEffectFiles=function(t){this.m_winEffectFiles=t},n.SetAwardBoardFile=function(t){this.m_awardBoardFile=t},n.SetEffectLevels=function(t){this.m_coinEffects=t},n.SetEffectTimes=function(t){this.m_coinTimes=t},n.SetSoundNameByOdds=function(t){this.m_soundNameByOdds=t},n.SetBGMaskNode=function(t){null!=t&&(this.m_bgMaskNode=t)},n.SetWinTextFontSize=function(t){this.m_txtWinValue&&(this.m_txtWinValue.getComponent(T).fontSize=t)},n.SetWinType=function(t){this.m_winType=t},r(i,[{key:"CoinEffectNode",set:function(t){this.m_coinEffectNode=t}}]),i}(x);Zn.DesignSize={width:1136,height:640},Zn.SOUND_FILE={COMMON_SUPER_WIN:null,COMMON_MEGA_WIN:null,COMMON_COIN_SMALL:null,COMMON_COIN_MEDIUM:null,COMMON_BIG_WIN:null},Zn.EFFECT_ROOT="Astt/%s/effect/GameCommonEffect/",Zn.FILE_PATH={BIG_WIN:"win/big_anim",MEGA_WIN:"win/mega_anim",SUPER_WIN:"win/super_anim",JACKPOT:"win/effect_Jackpot",BIG_TO_MEGA_WIN:"win/bigToMega_anim",BIG_TO_SUPER_WIN:"win/bigToSuper_anim",FIVE_OF_A_KIND:"win/5ofa_anim"},Zn.WIN_EFFECT_SOUND_NAME=((Ln={})[Zn.FILE_PATH.BIG_WIN]="Common_big_win",Ln[Zn.FILE_PATH.MEGA_WIN]="Common_mega_win",Ln[Zn.FILE_PATH.SUPER_WIN]="Common_super_win",Ln[Zn.FILE_PATH.JACKPOT]="Common_JP_win",Ln[Zn.FILE_PATH.BIG_TO_MEGA_WIN]="Common_big_win",Ln[Zn.FILE_PATH.BIG_TO_SUPER_WIN]="Common_big_win",Ln[Zn.FILE_PATH.FIVE_OF_A_KIND]="Common_big_win",Ln),Zn.EffectViewUIName=rt({TXT_WIN_MONEY:"label_final_value",PARTICLE:"Particle_"}),Zn.DEFAULT_Y=400,Zn.PARTICLE_AMOUNT_MAX=2,Zn.MONEY_ROLL_TIME=3,Zn.UPDATE_MONEY_CSB=Zn.EFFECT_ROOT+"common_get_coin/Node_GetCoin01.csb",Zn.COMMON_GET_COIN_CSB=Zn.EFFECT_ROOT+"common_get_coin/Node_GetCoin02.csb",Zn.GET_COIN_PARTICLE_CSB=Zn.EFFECT_ROOT+"common_get_coin/Particle/_V3_GetCoin02.plist",Zn.ROTATE_COIN_CSB=Zn.EFFECT_ROOT+"common_get_coin/Node_CoinRotation01.csb",Zn.TRIAL_COIN_CSB=Zn.EFFECT_ROOT+"common_get_coin/Node_GetTrialCoin.csb",Zn.COIN_APPEAR_PARTICLE_CSB=Zn.EFFECT_ROOT+"common_get_coin/Particle/New_CoinShine03.plist",Zn.COMMON_COIN_AMOUNT=8,Zn.ANI_LABEL={ACT:"main",LOOP:"loop",ENDING:"ending"},Zn.ANI_FRAME_EVENT={MID:"AniMid",B_TO_M:"AniBtoM",M_TO_S:"AniMtoS",ENDING:"AniEnding",END:"AniEnd",LOOP:"AniLoop"},Zn.EFF_ZORDER={COIN_FALL:1,WIN_EFFECT:2,AWARD_BOARD:3,COMMON_GET_COIN:4,GET_TRIAL_COIN:5},Zn.COIN_EFFECT_LIST={1:Zn.EFFECT_ROOT+"coin/1_SmallGoldCoinFX_1",2:Zn.EFFECT_ROOT+"coin/1_SmallGoldCoinFX_2",3:Zn.EFFECT_ROOT+"coin/1_SmallGoldCoinFX_3",4:Zn.EFFECT_ROOT+"coin/2_BigGoldCoinFX_1",5:Zn.EFFECT_ROOT+"coin/3_MegaGoldCoinFX_1",6:Zn.EFFECT_ROOT+"coin/3_MegaGoldCoinFX_2",7:Zn.EFFECT_ROOT+"coin/3_MegaGoldCoinFX_3"},Zn.WIN_TYPE={BIG:2,MEGA:3,SUPER:4},C._RF.pop(),C._RF.push({},"a4b83idlNlHcZQFqX6vJhFz","ExtraBetComponent",void 0);var Qn,$n,to,eo,io,no,oo,ro,ao,so,lo=E.ccclass,co=E.property,uo=0,mo=1;Pn=co({type:x,tooltip:"EX 按鈕最頂層節點(整顆node)"}),Bn=co({type:X,tooltip:"EX 按鈕"}),Rn=co({type:X,tooltip:"按鈕ON"}),Fn=co({type:X,tooltip:"按鈕OFF"}),Mn=co({type:X,tooltip:"提示問號按鈕"}),Dn=co({type:x,tooltip:"提示文字tip面板"}),zn=co({type:T,tooltip:"功能說明文字串Label"}),Gn=co({type:F,tooltip:"本體ExtraBet文字圖片"}),lo((Hn=t((Wn=function(t){function o(){for(var e,o=arguments.length,r=new Array(o),a=0;a<o;a++)r[a]=arguments[a];return e=t.call.apply(t,[this].concat(r))||this,i(e,"m_multiExtraBetNode",Hn,n(e)),i(e,"m_multiBtn",Un,n(e)),i(e,"m_multiBtn_on",jn,n(e)),i(e,"m_multiBtn_off",Jn,n(e)),i(e,"m_multiBtn_TipQuesMark",Xn,n(e)),i(e,"m_multiBtn_Tip",Yn,n(e)),i(e,"m_multiBtn_Description",qn,n(e)),i(e,"m_Txt_Extra_Bet",Kn,n(e)),e.m_isExtendShowBar=!1,e.m_ExtraBetAniPlaying=null,e.m_isExtra=!1,e.m_isForceExtraOnEnd=!1,e.m_isTwoStep=!1,e.m_toStepTwo=!1,e.m_triggerCb=null,e.m_canExtend=!0,e}e(o,t);var u=o.prototype;return u.Init=function(t,e,i,n,o){void 0===n&&(n=!1),void 0===o&&(o=!1),this.m_triggerCb=t,this.m_isTwoStep=n,this.m_multiBtn_Description&&this.m_Txt_Extra_Bet&&(nt(" localeStringManager.CurrLang : "+c.CurrLang),this.m_multiBtn_Description.string=c.GetString(e),this.m_Txt_Extra_Bet.spriteFrame=c.GetGameAtlas().getSpriteFrame(i)),d.Init(o?null:this.node,this.ForceSetExtraBet.bind(this))},u.onLoad=function(){var t=this;nt("ExtraBet onLoad"),this.m_multiBtn&&this.m_multiBtn.node.on(x.EventType.TOUCH_END,(function(){t.m_ExtraBetAniPlaying||(_.Play(l.AudioClips.COMMON_BTN),t.CheckCanUseBtn()?t.ExtendShowBar(!t.m_isExtendShowBar):y.ShowMessageBox(l.StringKey.FREEWINCASH_PLAYING1))}));for(var e=0;e<this.m_multiBtn_on.length;e++)this.m_multiBtn_on[e].node.on(x.EventType.TOUCH_END,(function(){t.m_ExtraBetAniPlaying||(t.CheckCanUseBtn()?t.ChangeBetMode():y.ShowMessageBox(l.StringKey.FREEWINCASH_PLAYING1))})),this.m_multiBtn_off[e]&&this.m_multiBtn_off[e].node.on(x.EventType.TOUCH_END,(function(){t.m_ExtraBetAniPlaying||(_.Play(l.AudioClips.COMMON_BTN),t.CheckCanUseBtn()&&t.ChangeBetMode())}));this.m_multiBtn_TipQuesMark&&this.m_multiBtn_TipQuesMark.node.on(x.EventType.TOUCH_END,a(s().mark((function e(){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.m_ExtraBetAniPlaying){e.next=13;break}if(_.Play(l.AudioClips.COMMON_BTN),h.Current()!=p.IDLE||g.IsBuyBonus){e.next=12;break}if(!t.m_isExtendShowBar){e.next=7;break}t.m_multiBtn_Tip.active=!t.m_multiBtn_Tip.active,e.next=10;break;case 7:return e.next=9,t.ExtendShowBar(!0);case 9:!t.m_multiBtn_Tip.active&&t.m_isExtendShowBar&&(t.m_multiBtn_Tip.active=!0);case 10:e.next=13;break;case 12:y.ShowMessageBox(l.StringKey.FREEWINCASH_PLAYING1);case 13:case"end":return e.stop()}}),e)})))),this.ExtendShowBar(!1)},u.start=function(){nt("ExtraBet start")},u.CheckCanUseBtn=function(){return l.IsInMG()&&h.Current()==p.IDLE&&!l.IsUsingItem&&!g.IsBuyBonus&&!S.IsFeaturesDemoMode},u.OnSpin=function(){this.ExtendShowBar(!1)},u.ShowExtra=function(t){this.m_multiExtraBetNode&&(this.m_multiExtraBetNode.active=t)},u.GoToFeatures=function(){},u.ExtendShowBar=function(){var t=a(s().mark((function t(e){var i;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.m_canExtend){t.next=2;break}return t.abrupt("return");case 2:if(!m||this.m_ExtraBetAniPlaying){t.next=31;break}if(!e){t.next=20;break}if(m.IsAutoSpin||l.IsUsingItem||g.IsBuyBonus){t.next=17;break}if(this.m_isExtendShowBar){t.next=15;break}if(this.m_isExtendShowBar=!0,m.SetSpinState(b.CLICK_SPIN),this.m_ExtraBetAniPlaying=!0,!this.m_multiExtraBetNode){t.next=12;break}return t.next=12,this.PlayAnimation(this.m_multiExtraBetNode.getComponent(U),"ExtraBet_Show");case 12:this.m_ExtraBetAniPlaying=!1,m.SetSpinState(b.IDLE),this.m_isExtra&&this.m_multiExtraBetNode&&this.m_multiExtraBetNode.getComponent(U).play("ExtraBet_Active");case 15:t.next=18;break;case 17:y.ShowMessageBox(l.StringKey.FREEWINCASH_PLAYING1);case 18:t.next=31;break;case 20:if(!this.m_isExtendShowBar){t.next=31;break}if(m.IsAutoSpin||m.SetSpinState(b.CLICK_SPIN),this.m_multiBtn_Tip&&(this.m_multiBtn_Tip.active=!1),this.m_ExtraBetAniPlaying=!0,!this.m_multiExtraBetNode){t.next=27;break}return t.next=27,this.PlayAnimation(this.m_multiExtraBetNode.getComponent(U),"ExtraBet_Close");case 27:this.m_ExtraBetAniPlaying=!1,m.IsAutoSpin||m.SetSpinState(b.IDLE),this.m_multiExtraBetNode&&(this.m_isExtra?this.m_multiExtraBetNode.getComponent(U).play("ExtraBet_Active"):(this.m_multiExtraBetNode.getComponent(U).play("ExtraBet_OFF"),(i=this.m_multiExtraBetNode.getComponent(U).getState("ExtraBet_OFF")).setTime(i.duration))),this.m_isExtendShowBar=!1;case 31:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),u.ChangeBetMode=function(){var t=a(s().mark((function t(){var e;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(nt("ChangeBetMode stateManager.Current() : ",h.Current()),!m||g.IsBuyBonus||h.Current()!==p.IDLE&&!this.m_isExtra){t.next=34;break}if(this.m_isExtra=!this.m_isExtra,e=[],!this.m_isExtra){t.next=22;break}return this.m_isTwoStep?this.m_toStepTwo=!0:m.ChangeMultiBet(mo),1==this.m_multiBtn_on.length&&(this.m_multiBtn_on[0].node.active=!0,this.m_multiBtn_off[0].node.active=!1),this.m_ExtraBetAniPlaying=!0,null==m||m.SetSpinState(b.CLICK_SPIN),null==S||S.SetBuyBonusState(!1),this.m_multiExtraBetNode&&e.push(this.PlayAnimation(this.m_multiExtraBetNode.getComponent(U),"ExtraBet_ON")),e.push(this.m_triggerCb(this.m_isExtra,!1)),t.next=14,Promise.all(e);case 14:return this.m_ExtraBetAniPlaying=!1,null==m||m.SetSpinState(b.IDLE),this.m_multiExtraBetNode&&this.m_multiExtraBetNode.getComponent(U).play("ExtraBet_Active"),t.next=19,l.Wait(this,.2);case 19:null==S||S.SetBuyBonusState(!0),t.next=32;break;case 22:return m.ChangeMultiBet(uo),1==this.m_multiBtn_on.length&&(this.m_multiBtn_on[0].node.active=!1,this.m_multiBtn_off[0].node.active=!0),this.m_ExtraBetAniPlaying=!0,null==m||m.SetSpinState(b.CLICK_SPIN),this.m_multiExtraBetNode&&e.push(this.PlayAnimation(this.m_multiExtraBetNode.getComponent(U),"ExtraBet_OFF")),e.push(this.m_triggerCb(this.m_isExtra,!1)),t.next=30,Promise.all(e);case 30:this.m_ExtraBetAniPlaying=!1,null==m||m.SetSpinState(b.IDLE);case 32:t.next=35;break;case 34:h.Current()!==p.IDLE&&(nt("TRIAL_REFUSED_REASON 1 "),y.ShowMessageBox(l.StringKey.FREEWINCASH_PLAYING1));case 35:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),u.SetTwoStepMulti=function(){var t=a(s().mark((function t(e,i){return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.m_isTwoStep||!this.m_toStepTwo){t.next=13;break}if(!e){t.next=5;break}m.ChangeMultiBet(i),t.next=13;break;case 5:if(this.m_isExtra=!1,1==this.m_multiBtn_on.length&&(this.m_multiBtn_on[0].node.active=!1,this.m_multiBtn_off[0].node.active=!0),this.m_ExtraBetAniPlaying=!0,m&&m.SetSpinState(b.CLICK_SPIN),!this.m_multiExtraBetNode){t.next=12;break}return t.next=12,this.PlayAnimation(this.m_multiExtraBetNode.getComponent(U),"ExtraBet_OFF");case 12:this.m_ExtraBetAniPlaying=!1;case 13:case"end":return t.stop()}}),t,this)})));return function(e,i){return t.apply(this,arguments)}}(),u.ForceSetExtraBet=function(){var t=a(s().mark((function t(e,i){var n;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(void 0===i&&(i=mo),!e){t.next=10;break}return this.m_isExtra=!0,1==this.m_multiBtn_on.length&&(this.m_multiBtn_on[0].node.active=!0,this.m_multiBtn_off[0].node.active=!1),this.m_multiExtraBetNode&&this.m_multiExtraBetNode.getComponent(U).play("ExtraBet_Active"),this.m_isTwoStep?(this.m_toStepTwo=!0,this.SetTwoStepMulti(e,i)):m.ChangeMultiBet(i),t.next=8,this.m_triggerCb(e,!0);case 8:t.next=19;break;case 10:if(!this.m_isExtra){t.next=19;break}return n=[],this.m_isExtra=!1,1==this.m_multiBtn_on.length&&(this.m_multiBtn_on[0].node.active=!1,this.m_multiBtn_off[0].node.active=!0),m.ChangeMultiBet(uo),this.m_multiExtraBetNode&&(this.m_isExtendShowBar?n.push(this.ExtendShowBar(!1)):n.push(this.PlayAnimation(this.m_multiExtraBetNode.getComponent(U),"ExtraBet_OFF"))),n.push(this.m_triggerCb(e,!0)),t.next=19,Promise.all(n);case 19:case"end":return t.stop()}}),t,this)})));return function(e,i){return t.apply(this,arguments)}}(),u.OnRotation=function(){this.m_multiExtraBetNode&&(this.m_isExtra?this.m_multiExtraBetNode.getComponent(U).play("ExtraBet_Active"):this.m_multiExtraBetNode.getComponent(U).play("ExtraBet_Stop")),this.m_multiBtn_Tip&&(this.m_multiBtn_Tip.active=!1)},u.IsExAnimationTouchable=function(){return!this.m_ExtraBetAniPlaying},u.FirstShowBar=function(){},u.PlayAnimation=function(t,e,i){return void 0===i&&(i=!1),new Promise((function(n){if(t.play(e),i){var o=t.getState(e);o&&(o.wrapMode=lt.WrapMode.Loop)}t.once(U.EventType.FINISHED,(function(){n(!0)}))}))},r(o,[{key:"ExtraBetAniPlaying",set:function(t){this.m_ExtraBetAniPlaying=t}},{key:"IsExtra",get:function(){return this.m_isExtra}},{key:"IsForceExtraOnEnd",get:function(){return this.m_isForceExtraOnEnd}},{key:"CanExtend",set:function(t){this.m_canExtend=t}}]),o}(k)).prototype,"m_multiExtraBetNode",[Pn],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Un=t(Wn.prototype,"m_multiBtn",[Bn],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),jn=t(Wn.prototype,"m_multiBtn_on",[Rn],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Jn=t(Wn.prototype,"m_multiBtn_off",[Fn],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Xn=t(Wn.prototype,"m_multiBtn_TipQuesMark",[Mn],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Yn=t(Wn.prototype,"m_multiBtn_Tip",[Dn],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),qn=t(Wn.prototype,"m_multiBtn_Description",[zn],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Kn=t(Wn.prototype,"m_Txt_Extra_Bet",[Gn],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Vn=Wn));C._RF.pop(),C._RF.push({},"5cf68x6BTZHP5QWXU3HRb/c","FeaturePageComponent",void 0);var ho,po,_o,fo,yo,go,So,bo,wo,vo,Co,Eo,No,To,Oo,ko,Ao,Io,Lo,xo,Po,Bo,Ro,Fo,Mo,Do,zo,Go,Vo,Wo,Ho,Uo=E.ccclass,jo=E.property;Qn=jo({type:F,tooltip:"說明文字"}),$n=jo({type:H,tooltip:"圖片名稱"}),to=jo({type:Boolean,tooltip:"圖片名稱"}),eo=jo({type:F,tooltip:"圖片名稱"}),Uo((oo=t((no=function(t){function o(){for(var e,o=arguments.length,r=new Array(o),a=0;a<o;a++)r[a]=arguments[a];return e=t.call.apply(t,[this].concat(r))||this,i(e,"m_hintSprite",oo,n(e)),i(e,"m_imgName",ro,n(e)),i(e,"m_isAD",ao,n(e)),i(e,"m_ADsprite",so,n(e)),e}e(o,t);var r=o.prototype;return r.start=function(){var t=this;if(!this.m_isAD){var e=c.GetGameAtlas();e?this.m_hintSprite.spriteFrame=e.getSpriteFrame(this.m_imgName):c.RegisterOnGameAltasLoadedCb((function(){t.m_hintSprite.spriteFrame=c.GetGameAtlas().getSpriteFrame(t.m_imgName)}))}},r.SetADSprites=function(t){this.m_ADsprite&&(this.m_ADsprite.spriteFrame=t)},o}(k)).prototype,"m_hintSprite",[Qn],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ro=t(no.prototype,"m_imgName",[$n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),ao=t(no.prototype,"m_isAD",[to],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),so=t(no.prototype,"m_ADsprite",[eo],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),io=no));C._RF.pop(),C._RF.push({},"9099fuoIOdA/qc/GkvbZ7rH","GroupNode",void 0);var Jo,Xo,Yo,qo,Ko=E.ccclass,Zo=E.property,Qo=E.menu,$o=E.executeInEditMode,tr="active-in-hierarchy-changed";!function(t){t[t.WIDTH=1]="WIDTH",t[t.HEIGHT=2]="HEIGHT",t[t.BOTH=3]="BOTH"}(Jo||(Jo={})),function(t){t[t.X=1]="X",t[t.Y=2]="Y",t[t.BOTH=3]="BOTH"}(Xo||(Xo={})),function(t){t[t.X=1]="X",t[t.Y=2]="Y",t[t.BOTH=3]="BOTH"}(Yo||(Yo={})),function(t){t[t.R=1]="R",t[t.G=2]="G",t[t.B=4]="B",t[t.RGB=7]="RGB",t[t.A=8]="A",t[t.RGBA=15]="RGBA"}(qo||(qo={}));var er,ir,nr;ho=Qo("Chiron/GroupNode/GroupNode"),po=Zo({displayName:"Sync OnEnable",tooltip:"當 Node 啟用時同步一次所有選定的狀態至屬性 Group Nodes 中"}),_o=Zo({displayName:"Sync OnDisable",tooltip:"當 Node 啟用時同步一次所有選定的狀態至屬性 Group Nodes 中"}),fo=Zo({displayName:"Sync Recursive",tooltip:"是否遞迴同步屬性 Group Nodes 中帶有 GroupNode 元件的節點"}),yo=Zo({type:[x],displayName:"Group Nodes"}),go=Zo({displayName:"Active Aware",tooltip:"當啓閉狀態改變時是否讓群組裡的 Node 跟著啓閉調整"}),So=Zo({displayName:"Position Aware",tooltip:"當位置改變時是否讓群組裡的 Node 跟著調整相對位置"}),bo=Zo({type:rt(Xo),displayName:"Position Mode",tooltip:"當座標改變時子元件跟著調動的參數",visible:function(){return this.m_positionAware}}),wo=Zo({displayName:"Rotation Aware",tooltip:"當旋轉改變時是否讓群組裡的 Node 跟著調整轉角"}),vo=Zo({displayName:"Scale Aware",tooltip:"當縮放比例改變時是否讓群組裡的 Node 跟著改變縮放比例"}),Co=Zo({type:rt(Yo),displayName:"Scale Mode",tooltip:"當縮放改變時子元件跟著調動的參數",visible:function(){return this.m_scaleAware}}),Eo=Zo({displayName:"Color Aware",tooltip:"當顏色改變時是否讓群組裡的 Node 跟著改變顏色"}),No=Zo({type:rt(qo),displayName:"Color Mode",tooltip:"當顏色改變時子元件跟著調動的參數",visible:function(){return this.m_colorAware}}),To=Zo({displayName:"Size Aware",tooltip:"當大小改變時是否讓群組裡的 Node 跟著改變大小"}),Oo=Zo({type:rt(Jo),displayName:"Size Mode",tooltip:"當大小改變時子元件跟著調動的參數",visible:function(){return this.m_sizeAware}}),Ko(ko=$o(ko=ho((Io=t((Ao=function(t){function o(){for(var e,o=arguments.length,r=new Array(o),a=0;a<o;a++)r[a]=arguments[a];return(e=t.call.apply(t,[this].concat(r))||this).m_lastPos=void 0,e.m_lastRotation=void 0,i(e,"m_syncOnEnable",Io,n(e)),i(e,"m_syncOnDisable",Lo,n(e)),i(e,"m_syncRecursive",xo,n(e)),i(e,"m_nodes",Po,n(e)),i(e,"m_activeAware",Bo,n(e)),i(e,"m_positionAware",Ro,n(e)),i(e,"m_positionMode",Fo,n(e)),i(e,"m_rotationAware",Mo,n(e)),i(e,"m_scaleAware",Do,n(e)),i(e,"m_scaleMode",zo,n(e)),i(e,"m_colorAware",Go,n(e)),i(e,"m_colorMode",Vo,n(e)),i(e,"m_sizeAware",Wo,n(e)),i(e,"m_sizeMode",Ho,n(e)),e.m_isRegisted=!1,e}e(o,t);var a=o.prototype;return a.__preload=function(){this.m_isRegisted||(this.m_isRegisted=!0,this.m_lastPos=pt(this.node.position.x,this.node.position.y),this.m_lastRotation=this.node.angle,this.node.on(tr,this.OnActiveChanged,this),this.node.on(x.EventType.COLOR_CHANGED,this.OnColorChanged,this),this.node.on(x.EventType.TRANSFORM_CHANGED,this.OnRotationChanged,this),this.node.on(x.EventType.TRANSFORM_CHANGED,this.OnPositionChanged,this),this.node.on(x.EventType.TRANSFORM_CHANGED,this.OnScaleChanged,this),this.node.on(x.EventType.SIZE_CHANGED,this.OnSizeChanged,this),_t.on(dt.EVENT_BEFORE_DRAW,this.StateCheck,this))},a.ForceInit=function(){this.__preload()},a.onDestroy=function(){t.prototype.onDestroy&&t.prototype.onDestroy.call(this),this.node.off(tr,this.OnActiveChanged,this),this.node.off(x.EventType.TRANSFORM_CHANGED,this.OnPositionChanged,this),this.node.off(x.EventType.COLOR_CHANGED,this.OnColorChanged,this),this.node.off(x.EventType.TRANSFORM_CHANGED,this.OnRotationChanged,this),this.node.off(x.EventType.TRANSFORM_CHANGED,this.OnScaleChanged,this),this.node.off(x.EventType.SIZE_CHANGED,this.OnSizeChanged,this),_t.off(dt.EVENT_BEFORE_DRAW,this.StateCheck,this)},a.onEnable=function(){t.prototype.onEnable&&t.prototype.onEnable.call(this),this.m_syncOnEnable&&this.SyncAware()},a.onDisable=function(){t.prototype.onDisable&&t.prototype.onDisable.call(this),this.m_syncOnDisable&&this.SyncAware()},a.SyncAware=function(){this.SyncActive(),this.SyncSize(),this.SyncPosition(),this.SyncRotation(),this.SyncOpacity(),this.SyncColor(),this.SyncScale()},a.StateCheck=function(){this.node.isValid&&this.node._renderFlag&&this.OnOpacityChanged()},a.SyncGroupChild=function(t,e){var i=e.getComponent(o);this.m_syncRecursive&&i&&t.call(i)},a.SyncScale=function(){if(this.m_scaleAware)for(var t,e=w(this.m_nodes);!(t=e()).done;){var i=t.value;i&&i.isValid&&(i.scale=new R(this.node.scale.x,this.node.scale.y,this.node.scale.z),this.SyncGroupChild(this.SyncScale,i))}},a.OnScaleChanged=function(){this.SyncScale()},a.SyncColor=function(){if(this.m_colorAware)for(var t,e=this.node.getComponent(G).color,i=w(this.m_nodes);!(t=i()).done;){var n=t.value;n&&n.isValid&&(n.getComponent(G).color=e,this.SyncGroupChild(this.SyncColor,n))}},a.OnColorChanged=function(){this.SyncColor()},a.SyncOpacity=function(){if(this.m_colorAware&&this.m_colorMode&qo.A)for(var t,e=w(this.m_nodes);!(t=e()).done;){var i=t.value;i&&i.isValid&&(i.getComponent(ft).opacity=this.node.getComponent(ft).opacity,this.SyncGroupChild(this.SyncOpacity,i))}},a.OnOpacityChanged=function(){this.SyncOpacity()},a.SyncRotation=function(){if(this.m_rotationAware){var t=this.node.angle-this.m_lastRotation;this.m_lastRotation=this.node.angle;for(var e,i=w(this.m_nodes);!(e=i()).done;){var n=e.value;n&&n.isValid&&(n.angle=n.angle+t,this.SyncGroupChild(this.SyncRotation,n))}}},a.OnRotationChanged=function(){this.SyncRotation()},a.SyncActive=function(){if(this.m_activeAware)for(var t,e=this.node.active,i=w(this.m_nodes);!(t=i()).done;){var n=t.value;n&&n.isValid&&(n.active=e,this.SyncGroupChild(this.SyncActive,n))}},a.OnActiveChanged=function(){this.SyncActive()},a.SyncPosition=function(){if(this.m_positionAware){var t=this.node.position.x-this.m_lastPos.x,e=this.node.position.y-this.m_lastPos.y;this.m_lastPos.x=this.node.position.x,this.m_lastPos.y=this.node.position.y;for(var i,n=w(this.m_nodes);!(i=n()).done;){var o=i.value;o&&o.isValid&&(o.setPosition(ct(o.position.x+t,o.position.y+e,o.position.z)),this.SyncGroupChild(this.SyncPosition,o))}}},a.OnPositionChanged=function(){this.SyncPosition()},a.SyncSize=function(){if(this.m_sizeAware)for(var t,e=w(this.m_nodes);!(t=e()).done;){var i=t.value;i&&i.isValid&&(this.m_sizeMode&Jo.WIDTH&&(i.getComponent(L).width=this.node.getComponent(L).width),this.m_sizeMode&Jo.HEIGHT&&(i.getComponent(L).height=this.node.getComponent(L).height),this.SyncGroupChild(this.SyncSize,i))}},a.OnSizeChanged=function(){this.SyncSize()},r(o,[{key:"Nodes",get:function(){return this.m_nodes}}]),o}(k)).prototype,"m_syncOnEnable",[po],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Lo=t(Ao.prototype,"m_syncOnDisable",[_o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),xo=t(Ao.prototype,"m_syncRecursive",[fo],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Po=t(Ao.prototype,"m_nodes",[yo],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Bo=t(Ao.prototype,"m_activeAware",[go],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),Ro=t(Ao.prototype,"m_positionAware",[So],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Fo=t(Ao.prototype,"m_positionMode",[bo],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return Xo.BOTH}}),Mo=t(Ao.prototype,"m_rotationAware",[wo],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Do=t(Ao.prototype,"m_scaleAware",[vo],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),zo=t(Ao.prototype,"m_scaleMode",[Co],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return Yo.BOTH}}),Go=t(Ao.prototype,"m_colorAware",[Eo],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Vo=t(Ao.prototype,"m_colorMode",[No],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return qo.RGBA}}),Wo=t(Ao.prototype,"m_sizeAware",[To],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Ho=t(Ao.prototype,"m_sizeMode",[Oo],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return Jo.BOTH}}),ko=Ao))||ko)||ko);C._RF.pop(),C._RF.push({},"e33faPhWqxMHa92Db40WLqj","LabelSpacingX",void 0);var or,rr,ar,sr,lr,cr,ur,mr,hr,pr,_r,dr,fr,yr=E.ccclass,gr=E.property,Sr=E.executeInEditMode,br=E.requireComponent;yr("LabelSpacingX")(er=br(T)(er=Sr((nr=t((ir=function(t){function o(){for(var e,o=arguments.length,r=new Array(o),a=0;a<o;a++)r[a]=arguments[a];return e=t.call.apply(t,[this].concat(r))||this,i(e,"_spacingX",nr,n(e)),e}e(o,t);var a=o.prototype;return a.onEnable=function(){this.resetSpacingX()},a.resetSpacingX=function(){var t=this.node.getComponent(T);t&&t.cacheMode===T.CacheMode.CHAR&&(t.spacingX=this._spacingX)},r(o,[{key:"spacingX",get:function(){return this._spacingX},set:function(t){this._spacingX=t,this.resetSpacingX()}}]),o}(k)).prototype,"_spacingX",[gr],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),t(ir.prototype,"spacingX",[gr],Object.getOwnPropertyDescriptor(ir.prototype,"spacingX"),ir.prototype),er=ir))||er)||er);C._RF.pop(),C._RF.push({},"a6f15DRaTNJEaqvyk6QuIo3","LangImg",void 0);var wr,vr=E.ccclass,Cr=E.executeInEditMode,Er=E.property,Nr="db://assets/game/Text/en/",Tr="db://assets/otherAsttText/AsttText/en/";!function(t){t[t.PNG=0]="PNG",t[t.JPG=1]="JPG"}(wr||(wr={}));var Or,kr,Ar,Ir,Lr,xr,Pr,Br,Rr,Fr,Mr,Dr,zr,Gr,Vr={PNG:".png",JPG:".jpg"};or=vr("LangImg"),rr=Er({type:H,tooltip:"圖片路徑"}),ar=Er({type:H,tooltip:"額外路徑，如果不是在game/Text/en/或otherAsttText/AsttText/en/下，請填入後續路徑"}),sr=Er({type:rt(wr),tooltip:"圖片類型"}),lr=Er({type:it,tooltip:"是否為通用圖片"}),cr=Er({type:it,tooltip:"是否由這個組件來設定多語系圖片"}),or(ur=Cr((hr=t((mr=function(t){function o(){for(var e,o=arguments.length,r=new Array(o),a=0;a<o;a++)r[a]=arguments[a];return e=t.call.apply(t,[this].concat(r))||this,i(e,"m_path",hr,n(e)),i(e,"m_extraPath",pr,n(e)),i(e,"m_imgTypeNo",_r,n(e)),i(e,"m_isCommon",dr,n(e)),i(e,"m_isUsingSetImage",fr,n(e)),e}e(o,t);var r=o.prototype;return r.start=function(){this.SetImg()},r.SetImg=function(){var t=this;if(this.m_isUsingSetImage){var e=null;if(this.m_isCommon){if(!(e=c.GetCommonAtlas()))return void c.RegisterOnCommonAltasLoadedCb((function(){t.SetImg()}))}else if(!(e=c.GetGameAtlas()))return void c.RegisterOnGameAltasLoadedCb((function(){t.SetImg()}));var i=this.node.getComponent(F);i||(i=this.node.addComponent(F)),i.spriteFrame=e.getSpriteFrame(this.m_path)}},r.SetPreviewImg=function(){this.AdjustComponentOrdering(),this.ReadSpriteFrame(),o.prototype._onBeforeSerialize=function(){return this.OnBeforeSerialize(),!1}},r.AdjustComponentOrdering=function(){},r.ReadSpriteFrame=function(){var t=a(s().mark((function t(){var e,i,n,o,r,a,l=this;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.m_path){t.next=2;break}return t.abrupt("return");case 2:return e=(this.m_isCommon?Tr:Nr)+this.m_extraPath+this.m_path,i=Vr.PNG,n=wr[this.m_imgTypeNo],Object.prototype.hasOwnProperty.call(wr,n)&&(o=wr[n],Number(o)===this.m_imgTypeNo&&(i=Vr[n])),t.next=8,Editor.Message.request("asset-db","query-assets",{importer:"sprite-frame",pattern:e+i});case 8:r=t.sent,a={uuid:r[0].uuid},D.loadAny(a,(function(t,e){if(t)at("Failed to load cc.SpriteFrame resources:",t);else{var i=l.node.getComponent(F);i||(i=l.node.addComponent(F)),i.spriteFrame=e}}));case 11:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),r.OnBeforeSerialize=function(){},o}(k)).prototype,"m_path",[rr],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),pr=t(mr.prototype,"m_extraPath",[ar],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),_r=t(mr.prototype,"m_imgTypeNo",[sr],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return wr.PNG}}),dr=t(mr.prototype,"m_isCommon",[lr],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),fr=t(mr.prototype,"m_isUsingSetImage",[cr],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),ur=mr))||ur);C._RF.pop(),C._RF.push({},"1d950BFoN5LhJJ79uyt+/E+","MarqueeComponent",void 0);var Wr,Hr,Ur,jr,Jr,Xr,Yr,qr,Kr,Zr=E.ccclass,Qr=E.property;Or=Qr({type:O,tooltip:"每秒的位移量"}),kr=Qr({type:O,tooltip:"循環播放的間隔"}),Ar=Qr({type:O,tooltip:"未超出的停留時間"}),Ir=Qr({type:O,tooltip:"超出時的停留時間"}),Lr=Qr({type:O,tooltip:"尾部保留的空間"}),xr=Qr({type:x,tooltip:"跑馬燈內容節點"}),Zr((Rr=t((Br=function(t){function r(){for(var e,o=arguments.length,r=new Array(o),a=0;a<o;a++)r[a]=arguments[a];return e=t.call.apply(t,[this].concat(r))||this,i(e,"m_moveSpeed",Rr,n(e)),i(e,"m_delayTime",Fr,n(e)),i(e,"m_waitTime",Mr,n(e)),i(e,"m_moveDelayTime",Dr,n(e)),i(e,"m_tailLeftSpace",zr,n(e)),i(e,"m_content",Gr,n(e)),e.m_imgs=null,e.m_viewWidth=null,e.m_stringSprite=null,e.m_isStart=!1,e.m_isStop=!1,e.m_scale=1,e.m_imgIndex=-1,e}e(r,t);var c=r.prototype;return c.Init=function(t){this.m_imgs=t,this.m_viewWidth=this.node.getComponent(L).contentSize.width;var e=this.m_content?this.m_content:this.node.children[0];t&&t.length>0&&(e||((e=new x).addComponent(L),this.node.addChild(e)),this.m_stringSprite=e.getComponent(F),this.m_stringSprite||(this.m_stringSprite=e.addComponent(F)),this.m_stringSprite.type=F.Type.SIMPLE,this.m_stringSprite.sizeMode=F.SizeMode.TRIMMED),e.getComponent(L).setAnchorPoint(pt(0,.5)),this.m_scale=e.scale.x},c.ShowOnce=function(){var t=a(s().mark((function t(e){var i,n,r,a,c,u,m,h,p,_;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.m_isStart){t.next=2;break}return t.abrupt("return");case 2:if(this.m_isStart=!0,"string"!=typeof e){t.next=24;break}if(!(i=this.m_content.getComponent(yt))){t.next=19;break}return i.string=e,n=o.times(i.node.getComponent(L).width+this.m_tailLeftSpace,this.m_scale),i.node.active=!0,r=n+this.m_viewWidth,a=o.divide(r,this.m_moveSpeed),c=i.node.position.x,J(i.node).to(a,{position:ct(c-r,0)}).start(),t.next=15,l.Wait(this,a);case 15:i.node.active=!1,i.node.setPosition(ct(this.m_viewWidth,0)),t.next=22;break;case 19:return at("RichText doesn't exist"),this.m_isStart=!1,t.abrupt("return");case 22:t.next=44;break;case 24:if(e?(this.m_imgIndex++,this.m_imgIndex>=this.m_imgs.length&&(this.m_imgIndex=0),u=this.m_imgs[this.m_imgIndex]):u=this.m_imgs[Math.floor(Math.random()*this.m_imgs.length)],this.m_stringSprite.spriteFrame=u,m=o.times(this.m_stringSprite.spriteFrame.rect.width+this.m_tailLeftSpace,this.m_scale),this.m_stringSprite.node.active=!0,!(m>this.m_viewWidth)){t.next=39;break}return this.m_stringSprite.node.position=ct(0,0),t.next=32,l.Wait(this,this.m_moveDelayTime);case 32:return h=m+this.m_viewWidth,p=o.divide(h,this.m_moveSpeed),J(this.m_stringSprite.node).to(p,{position:ct(-m,0)}).start(),t.next=37,l.Wait(this,p);case 37:t.next=43;break;case 39:return _=o.minus(this.m_viewWidth,m),this.m_stringSprite.node.position=ct(o.divide(_,2),0),t.next=43,l.Wait(this,this.m_waitTime);case 43:this.m_stringSprite.node.active=!1;case 44:this.m_isStart=!1;case 45:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),c.ShowForever=function(){var t=a(s().mark((function t(e){return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:void 0===e&&(e=!1);case 1:if(this.m_isStop){t.next=9;break}return t.next=4,this.ShowOnce(e);case 4:if(!(this.m_delayTime&&this.m_delayTime>0)){t.next=7;break}return t.next=7,l.Wait(this,this.m_delayTime);case 7:t.next=1;break;case 9:this.m_isStop=!1;case 10:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),c.Stop=function(){this.m_isStop=!0},c.ChangeTimeSetting=function(t,e,i,n,o){this.m_moveSpeed=t,this.m_delayTime=e,this.m_waitTime=i,this.m_moveDelayTime=n,this.m_tailLeftSpace=o},r}(k)).prototype,"m_moveSpeed",[Or],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Fr=t(Br.prototype,"m_delayTime",[kr],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Mr=t(Br.prototype,"m_waitTime",[Ar],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Dr=t(Br.prototype,"m_moveDelayTime",[Ir],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),zr=t(Br.prototype,"m_tailLeftSpace",[Lr],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Gr=t(Br.prototype,"m_content",[xr],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Pr=Br));C._RF.pop(),C._RF.push({},"93417uqlh9Fm6TH2poz4GO4","NearWinEffectComponent",void 0);var $r,ta,ea,ia,na,oa="FadeIn",ra="FadeOut",aa="NearWin",sa=E.ccclass,la=E.property;Wr=sa("NearWinEffectComponent"),Hr=la({type:Number,tooltip:"淡入時間"}),Ur=la({type:Number,tooltip:"淡出時間"}),jr=la({type:it,tooltip:"是否使用spine動畫"}),Wr((Yr=t((Xr=function(t){function o(){for(var e,o=arguments.length,r=new Array(o),a=0;a<o;a++)r[a]=arguments[a];return e=t.call.apply(t,[this].concat(r))||this,i(e,"m_fadeInTime",Yr,n(e)),i(e,"m_fadeOutTime",qr,n(e)),i(e,"m_isPlaySpine",Kr,n(e)),e.m_cancelCb=null,e.m_spine=null,e}e(o,t);var r=o.prototype;return r.start=function(){this.m_spine||(this.node.active=!1)},r.FadeIn=function(){var t=a(s().mark((function t(e){var i,n=this;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.CheckSpine(),this.node.active=!0,!this.m_isPlaySpine){t.next=9;break}return t.next=5,v.PlayAnimation(this.m_spine,oa);case 5:t.sent||v.PlayAnimation(this.m_spine,aa,!0),t.next=16;break;case 9:return j.stopAllByTarget(this.m_spine.color),null==(i=this.m_cancelCb)||i.call(this),this.node.active=!0,this.m_spine.color=new A(this.m_spine.color.r,this.m_spine.color.g,this.m_spine.color.b,0),null==e||e(),t.next=16,new Promise((function(t){n.m_cancelCb=function(){t()},J(n.m_spine.color).to(n.m_fadeInTime,{a:255}).call((function(){t(),n.m_cancelCb=null})).start()}));case 16:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),r.FadeOut=function(){var t=a(s().mark((function t(){var e,i,n=this;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.CheckSpine(),!this.m_isPlaySpine){t.next=12;break}if(this.node.active){t.next=4;break}return t.abrupt("return",!0);case 4:return this.CheckSpine(),t.next=7,v.PlayAnimation(this.m_spine,ra);case 7:return(e=t.sent)||(this.node.active=!1),t.abrupt("return",!e);case 12:if(!(this.m_spine.color.a<=0)){t.next=14;break}return t.abrupt("return",!1);case 14:return j.stopAllByTarget(this.m_spine.color),null==(i=this.m_cancelCb)||i.call(this),t.next=18,new Promise((function(t){n.m_cancelCb=function(){t(!1)},J(n.m_spine.color).to(n.m_fadeOutTime,{a:0}).call((function(){t(!0),n.m_cancelCb=null,n.node.active=!1})).start()}));case 18:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),r.CheckSpine=function(){this.m_spine||(this.m_spine=this.node.getComponent(N.Skeleton),this.m_isPlaySpine&&this.m_spine.setMix(oa,ra,.05))},o}(k)).prototype,"m_fadeInTime",[Hr],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.1}}),qr=t(Xr.prototype,"m_fadeOutTime",[Ur],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.2}}),Kr=t(Xr.prototype,"m_isPlaySpine",[jr],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Jr=Xr));C._RF.pop(),C._RF.push({},"3638c7rYSpEjZ7x8wtqusdg","RenderDataBump",void 0);var ca,ua,ma,ha,pa,_a=0,da=1,fa=2,ya=E.ccclass,ga=E.property;$r=ya("RenderDataBump"),ta=ga({tooltip:"是否一同影響子節點"}),$r((na=t((ia=function(t){function o(){for(var e,o=arguments.length,r=new Array(o),a=0;a<o;a++)r[a]=arguments[a];return e=t.call.apply(t,[this].concat(r))||this,i(e,"affectsChildren",na,n(e)),e.states=_a,e}e(o,t);var r=o.prototype;return r.onLoad=function(){this.node.on(x.EventType.PARENT_CHANGED,this.checkStates,this)},r.onDestroy=function(){this.node.off(x.EventType.PARENT_CHANGED,this.checkStates,this)},r.checkStates=function(){this.node.parent?this.states===da&&this.requestRenderData():this.states!==fa&&this.states!==_a||this.destroyRenderData()},r.destroyRenderData=function(){var t=this.node.getComponent(G);if(null==t||t.destroyRenderData(),this.affectsChildren)for(var e,i=this.node.getComponentsInChildren(G),n=w(i);!(e=n()).done;){var o=e.value;null==o||o.destroyRenderData()}this.states=da},r.requestRenderData=function(){var t=this.node.getComponent(G);if(null==t||t._flushAssembler(),this.affectsChildren)for(var e,i=this.node.getComponentsInChildren(G),n=w(i);!(e=n()).done;){var o=e.value;null==o||o._flushAssembler()}this.states=fa},o}(k)).prototype,"affectsChildren",[ta],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),ea=ia));C._RF.pop(),C._RF.push({},"75a969XvAFPfax+l1fDcqo9","ScrollEventHandler",void 0);var Sa,ba,wa,va,Ca=E.ccclass,Ea=E.property;ca=Ca("ScrollEventHandler"),ua=Ea({type:x,tooltip:"真實放置內容的節點，有自行分層請把每一層的根節點放進去"}),ca((pa=t((ha=function(t){function o(){for(var e,o=arguments.length,r=new Array(o),a=0;a<o;a++)r[a]=arguments[a];return e=t.call.apply(t,[this].concat(r))||this,i(e,"m_contents",pa,n(e)),e.m_scrollView=null,e.m_redundantSpace_Y=0,e}e(o,t);var a=o.prototype;return a.start=function(){var t=this;this.m_scrollView=this.node.getComponent(gt),this.m_scrollView?this.m_scrollView.node.on(gt.EventType.SCROLLING,(function(){t.CheckCellVisible()})):at("ScrollView is null"),0===this.m_contents.length&&this.m_contents.push(this.m_scrollView.content)},a.CheckCellVisible=function(){if(this.m_scrollView&&this.m_scrollView.view)for(var t=0;t<this.m_contents.length;t++)for(var e=this.m_contents[t].children,i=this.GetTopLeftWorld(this.m_scrollView.view.node),n=this.GetBottomRightWorld(this.m_scrollView.view.node),o=0;o<e.length;o++){var r=e[o],a=r.getComponent(ft);a||(a=r.addComponent(ft));var s=this.GetTopLeftWorld(r),l=this.GetBottomRightWorld(r);this.IsInside(s,i,n)||this.IsInside(l,i,n)?a.opacity=255:a.opacity=0}},a.GetTopLeftWorld=function(t){var e=t.getPosition(),i=t.getComponent(L).contentSize,n=t.getComponent(L).anchorPoint,o=new R(e.x-i.width*n.x,e.y-i.height*n.y,e.z);return t.parent.getComponent(L).convertToWorldSpaceAR(o)},a.GetBottomRightWorld=function(t){var e=t.getPosition(),i=t.getComponent(L).contentSize,n=t.getComponent(L).anchorPoint,o=new R(e.x+i.width*(1-n.x),e.y+i.height*(1-n.y),e.z);return t.parent.getComponent(L).convertToWorldSpaceAR(o)},a.IsInside=function(t,e,i){return t.x>=e.x&&t.y>=e.y-this.m_redundantSpace_Y&&t.x<=i.x&&t.y<=i.y+this.m_redundantSpace_Y},r(o,[{key:"RedundantSpace_Y",set:function(t){this.m_redundantSpace_Y=t}}]),o}(k)).prototype,"m_contents",[ua],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),ma=ha));C._RF.pop(),C._RF.push({},"eb577rwRR5ASa6OivNuPgEY","SeriesComponent",void 0);var Na,Ta,Oa,ka,Aa,Ia,La,xa,Pa,Ba,Ra,Fa,Ma,Da,za,Ga,Va,Wa,Ha,Ua,ja,Ja,Xa,Ya,qa,Ka,Za,Qa,$a,ts,es,is,ns,os,rs,as,ss,ls,cs="GameIntro_L",us="GameIntro_S",ms="FG_Declare_Start_L",hs="FG_Declare_Start_S",ps="FG_Compliment_Start_L",_s="FG_Compliment_Start_S",ds=E.ccclass;Sa=(0,E.property)({type:N.Skeleton,tooltip:"spine"}),ds((va=t((wa=function(t){function o(){for(var e,o=arguments.length,r=new Array(o),a=0;a<o;a++)r[a]=arguments[a];return e=t.call.apply(t,[this].concat(r))||this,i(e,"m_spine",va,n(e)),e}e(o,t);var r=o.prototype;return r.ShowGameIntro=function(){var t=a(s().mark((function t(e,i){var n,o;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e?cs:us,this.node.active=!0,this.m_spine.paused=!1,o=function(t){"AnimationEvent"===t&&(null==i||i())},t.next=6,v.PlayAnimation(this.m_spine,n,!1,0,o);case 6:this.node.active=!1;case 7:case"end":return t.stop()}}),t,this)})));return function(e,i){return t.apply(this,arguments)}}(),r.ShowFGDeclare=function(){var t=a(s().mark((function t(e,i){var n,o;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e?ms:hs,this.node.active=!0,this.m_spine.paused=!1,o=function(t){"AnimationEvent"===t&&(null==i||i())},t.next=6,v.PlayAnimation(this.m_spine,n,!1,0,o);case 6:this.node.active=!1;case 7:case"end":return t.stop()}}),t,this)})));return function(e,i){return t.apply(this,arguments)}}(),r.ShowFGCompliment=function(){var t=a(s().mark((function t(e,i){var n,o;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e?ps:_s,this.node.active=!0,this.m_spine.paused=!1,o=function(t){"AnimationEvent"===t&&(null==i||i())},t.next=6,v.PlayAnimation(this.m_spine,n,!1,0,o);case 6:this.node.active=!1;case 7:case"end":return t.stop()}}),t,this)})));return function(e,i){return t.apply(this,arguments)}}(),r.Prepare=function(t){this.node.active=!0,this.m_spine.paused=!1,this.m_spine.clearTracks(),this.m_spine.setToSetupPose(),v.PlayAnimation(this.m_spine,t?cs:us),this.m_spine.paused=!0},r.Rotation=function(t){if(this.node.active){var e=t?cs:us;this.m_spine.paused=!1,this.m_spine.clearTracks(),this.m_spine.setToSetupPose(),v.PlayAnimation(this.m_spine,e),this.m_spine.paused=!0}},o}(k)).prototype,"m_spine",[Sa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ba=wa));C._RF.pop(),C._RF.push({},"02e880GcB9Jw7QDr8UUWxEV","ShakeComponent",void 0);var fs,ys=E.ccclass,gs=E.property,Ss=E.executeInEditMode,bs=E.help,ws=[{name:"backIn",desc:"回退:緩入"},{name:"backInOut",desc:"回退:緩入緩出"},{name:"backOut",desc:"回退:緩出"},{name:"backOutIn",desc:"回退:緩出緩入"},{name:"bounceIn",desc:"彈跳:緩入"},{name:"bounceInOut",desc:"彈跳:緩入緩出"},{name:"bounceOut",desc:"彈跳:緩出"},{name:"bounceOutIn",desc:"彈跳:緩出緩入"},{name:"circIn",desc:"迴圈:緩入 由慢到快"},{name:"circInOut",desc:"迴圈:緩入緩出 由慢到很快再到慢"},{name:"circOut",desc:"迴圈:緩出 由快到慢"},{name:"circOutIn",desc:"迴圈:緩出緩入 由慢到很快再到慢"},{name:"constant",desc:"constant"},{name:"cubicIn",desc:"立方曲線緩入 由慢到快"},{name:"cubicInOut",desc:"立方曲線緩入緩出 由慢到快再到慢"},{name:"cubicOut",desc:"立方曲線緩出 由快到慢"},{name:"cubicOutIn",desc:"立方曲線緩出緩入 由慢到快再到慢"},{name:"elasticIn",desc:"彈簧回震:緩入"},{name:"elasticInOut",desc:"彈簧回震:緩入緩出"},{name:"elasticOut",desc:"彈簧回震:緩出"},{name:"elasticOutIn",desc:"彈簧回震:緩出緩入"},{name:"expoIn",desc:"指數曲線緩入 由慢到快"},{name:"expoInOut",desc:"指數曲線緩入和緩出 由慢到很快再到慢"},{name:"expoOut",desc:"指數曲線緩出 由快到慢"},{name:"expoOutIn",desc:"指數曲線緩出緩入和 由慢到很快再到慢"},{name:"fade",desc:"漸褪效果"},{name:"linear",desc:"線性"},{name:"quadIn",desc:"平方曲線緩入 由慢到快"},{name:"quadInOut",desc:"平方曲線緩入緩出 由慢到快再到慢"},{name:"quadOut",desc:"平方曲線緩出 由快到慢"},{name:"quadOutIn",desc:"平方曲線緩出緩入 由慢到快再到慢"},{name:"quartIn",desc:"四次方曲線緩入 由慢到快"},{name:"quartInOut",desc:"四次方曲線緩入緩出 由慢到快再到慢"},{name:"quartOut",desc:"四次方曲線緩出 由快到慢"},{name:"quartOutIn",desc:"四次方曲線緩出緩入 由慢到快再到慢"},{name:"quintIn",desc:"五次方曲線緩入 由慢到快"},{name:"quintInOut",desc:"五次方曲線緩入緩出 由慢到快再到慢"},{name:"quintOut",desc:"五次方曲線緩出 由慢到快"},{name:"quintOutIn",desc:"五次方曲線緩出緩入 由慢到快再到慢"},{name:"sineIn",desc:"正弦曲線緩入 由慢到快"},{name:"sineInOut",desc:"正弦曲線緩入緩出 由慢到快再到慢"},{name:"sineOut",desc:"正弦曲線緩出 由快到慢"},{name:"sineOutIn",desc:"正弦曲線緩出緩入 由慢到快再到慢"},{name:"smooth",desc:"平滑效果"}],vs=rt({}),Cs=rt({});!function(t){t[t.None=0]="None",t[t.FadeIn=1]="FadeIn",t[t.FadeOut=2]="FadeOut"}(fs||(fs={}));var Es,Ns=rt({None:fs.None,FadeIn:fs.FadeIn,FadeOut:fs.FadeOut}),Ts=function(t){var e,i=0;if(0===t.length)return i;for(e=0;e<t.length;e++)i=(i<<5)-i+t.charCodeAt(e),i|=0;return i},Os=(Na=ys("_TweenInfo"),Ta=gs({visible:!1,tooltip:"Easing"}),Oa=gs({type:vs,visible:!1}),ka=gs({visible:!0,displayName:"緩動效果",type:vs}),Aa=gs({type:Ns,visible:!1}),Ia=gs({visible:!0,displayName:"fade type",type:Ns}),La=gs({min:0,visible:!0,displayName:"時間"}),Na((Ba=t((Pa=function(){function t(){i(this,"m_EasingName",Ba,this),i(this,"__easingIdx",Ra,this),i(this,"__fadeType",Fa,this),this._EasingEnumList=[],i(this,"duration",Ma,this)}return r(t,[{key:"_easingIdx",get:function(){},set:function(t){}},{key:"_fadeType",get:function(){return this.__fadeType},set:function(t){}}]),t}()).prototype,"m_EasingName",[Ta],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),Ra=t(Pa.prototype,"__easingIdx",[Oa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),t(Pa.prototype,"_easingIdx",[ka],Object.getOwnPropertyDescriptor(Pa.prototype,"_easingIdx"),Pa.prototype),Fa=t(Pa.prototype,"__fadeType",[Aa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),t(Pa.prototype,"_fadeType",[Ia],Object.getOwnPropertyDescriptor(Pa.prototype,"_fadeType"),Pa.prototype),Ma=t(Pa.prototype,"duration",[La],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),xa=Pa))||xa);Da=ys("Shake"),za=bs("https://docs.cocos.com/creator/3.6/manual/zh/tween/tween-function.html#%E5%86%85%E7%BD%AE%E7%BC%93%E5%8A%A8%E5%87%BD%E6%95%B0"),Ga=gs({visible:!1,displayName:"正負交替",tooltip:"重複次數>1時, 正負交替"}),Va=gs({type:St,displayName:"預先定義shake.json",visible:function(){return this.shakeJson&&this._updateShakeEnum(this.shakeJson.json.shakelist),!0}}),Wa=gs({visible:!0,tooltip:"自定義的shake name"}),Ha=gs({type:Cs,visible:!1}),Ua=gs({visible:!0,displayName:"儲存到預先定義.json",tooltip:"若Shakename不為:custom,才會儲存"}),ja=gs({visible:!0,displayName:"預先定義",tooltip:"切換後會以預先定義的數值直接覆蓋所有設定值",type:Cs}),Ja=gs({readonly:!0,displayName:"總震動時間"}),Xa=gs({visible:!0,displayName:"振幅"}),Ya=gs({min:1,step:1,visible:!0,displayName:"震動頻率/秒"}),qa=gs({step:1,visible:!0,displayName:"振幅x/y/z權重:%"}),Ka=gs({visible:!1,type:[Os]}),Za=gs({type:[Os],tooltip:"輸入更改 緩動效果 數量",displayName:"緩動效果"}),Da(Qa=Ss(Qa=za((ts=t(($a=function(t){function o(){for(var e,o=arguments.length,r=new Array(o),a=0;a<o;a++)r[a]=arguments[a];return e=t.call.apply(t,[this].concat(r))||this,i(e,"alternately",ts,n(e)),i(e,"shakeJson",es,n(e)),i(e,"shakename",is,n(e)),i(e,"__ShakeIdx",ns,n(e)),i(e,"Duration",os,n(e)),i(e,"magnitude",rs,n(e)),i(e,"frequency",as,n(e)),i(e,"weight",ss,n(e)),i(e,"_TweenList",ls,n(e)),e._EasingEnumList=[],e._ShakeEnumList=[],e.originPos=new R,e._TestShakeCnt=0,e}e(o,t);var l=o.prototype;return l.updateDuration=function(){for(var t=0,e=0;e<this._TweenList.length;e++)t+=this._TweenList[e].duration;this.Duration=t},l.setTweenJson=function(t){var e=this.shakeJson.json.shakelist;if("custom"!=t)e[t];else console.warn("custom 不會儲存到預先定義.json")},l.getTweenJson=function(){for(var t={magnitude:this.magnitude,frequency:this.frequency,weight:{x:this.weight.x,y:this.weight.y,z:this.weight.z}},e=[],i=0;i<this._TweenList.length;i++){var n=this._TweenList[i];e.push({m_EasingName:n.m_EasingName,_easingIdx:n._easingIdx,_fadeType:n._fadeType,duration:n.duration})}return t._TweenList=e,t},l.getJsonData=function(){var t=a(s().mark((function t(){var e,i,n;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e={},this.shakeJson&&this.shakeJson.json&&(e=this.shakeJson.json),"custom"==this.shakename){t.next=19;break}(i=e.shakelist)[this.shakename]=this.getTweenJson(),e.shakelist=i,t.next=17;break;case 11:n=t.sent,console.log("path",n,"outJson",JSON.stringify(e,null,2)),undefined.writeFileSync(n,JSON.stringify(e,null,2),"utf-8"),t.next=17;break;case 16:console.log("請先指定 '預先定義shake.json'");case 17:t.next=20;break;case 19:console.warn("custom 不會儲存到預先定義.json");case 20:return t.abrupt("return",e);case 21:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),l.onLoad=function(){this.shakeJson&&this.shakeJson.json?(this._updateShakeEnum(this.shakeJson.json.shakelist),this.shakeJson.json):this.getJsonData();for(var t=[],e=0;e<ws.length;++e){var i=ws[e];t.push({name:i.desc,easingName:i.name,value:Ts(i.name)})}t.sort((function(t,e){return t.name<e.name?-1:t.name>e.name?1:0})),this._EasingEnumList=t,this._updateEasingEnum(),this.updateDuration()},l._updateShakeEnum=function(t){var e=[];t&&(Object.keys(t).forEach((function(t){e.push({name:t,value:Ts(t)})})),e.sort((function(t,e){return t.name<e.name?-1:t.name>e.name?1:0}))),this._ShakeEnumList=e},l._updateEasingEnum=function(){for(var t=0;t<this._TweenList.length;t++)this._TweenList[t]._EasingEnumList=this._EasingEnumList},l.start=function(){},l.fade=function(t,e,i,n,o,r,a){this.originPos=this.node.getPosition();for(var s=1/i,l=e/s,c=1;c<=l;c++){var u=n;o==fs.FadeIn?u*=c/l:o==fs.FadeOut&&(u*=(l-c)/l);var m=this.originPos.clone(),h=new R(M.random()-.5,M.random()-.5,M.random()-.5),p=new R(2*u*r.x/100,2*u*r.y/100,2*u*r.z/100);p=p.multiply(h),m=m.add(p),t=t.to(s,{position:m},{easing:a,onStart:function(t){},onUpdate:function(t,e){},onComplete:function(t){}})}return t},l.shake=function(){this._shake(this._TweenList,this.frequency,this.magnitude,this.weight)},l.testShake=function(){if(this.shakeJson&&this.shakeJson.json.shakelist){var t=this.shakeJson.json.shakelist;if(t){var e=Object.keys(t);e.push("ErrorTest");var i=e[this._TestShakeCnt++%e.length];this.ShakeWithName(i)}}else console.log("ShakeWithName shakeJson not assign!")},l.ShakeWithName=function(t){if(this.shakeJson&&this.shakeJson.json.shakelist){var e=this.shakeJson.json.shakelist;if(!e[t])return void console.log("ShakeWithName shakename:"+t+" not found!");var i=e[t],n=i._TweenList,o=i.weight;this._shake(n,i.frequency,i.magnitude,new R(o.x,o.y,o.z))}else console.log("ShakeWithName shakeJson not assign!")},l._shake=function(t,e,i,n){this.originPos=this.node.getPosition();for(var o=J(this.node),r=0;r<t.length;r++){var a=t[r];o=this.fade(o,a.duration,e,i,a._fadeType,n,a.m_EasingName)}(o=o.to(0,{position:this.originPos})).start()},r(o,[{key:"saveshake",get:function(){return!1},set:function(t){this.getJsonData()}},{key:"_ShakeIdx",get:function(){return this.__ShakeIdx},set:function(t){}},{key:"TweenList",get:function(){return this._TweenList},set:function(t){this._TweenList=t,this.updateDuration(),this._updateEasingEnum()}}]),o}(k)).prototype,"alternately",[Ga],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),es=t($a.prototype,"shakeJson",[Va],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),is=t($a.prototype,"shakename",[Wa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"custom"}}),ns=t($a.prototype,"__ShakeIdx",[Ha],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),t($a.prototype,"saveshake",[Ua],Object.getOwnPropertyDescriptor($a.prototype,"saveshake"),$a.prototype),t($a.prototype,"_ShakeIdx",[ja],Object.getOwnPropertyDescriptor($a.prototype,"_ShakeIdx"),$a.prototype),os=t($a.prototype,"Duration",[Ja],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),rs=t($a.prototype,"magnitude",[Xa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 20}}),as=t($a.prototype,"frequency",[Ya],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),ss=t($a.prototype,"weight",[qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new R(0,0,0)}}),ls=t($a.prototype,"_TweenList",[Ka],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),t($a.prototype,"TweenList",[Za],Object.getOwnPropertyDescriptor($a.prototype,"TweenList"),$a.prototype),Qa=$a))||Qa)||Qa);C._RF.pop(),C._RF.push({},"b57cahiKlxMZL7TyWc1iHaf","SloganComponent",void 0);var ks,As,Is,Ls,xs,Ps,Bs,Rs,Fs,Ms,Ds,zs,Gs,Vs,Ws,Hs,Us,js,Js,Xs,Ys,qs,Ks,Zs,Qs,$s,tl,el,il,nl,ol,rl,al,sl,ll,cl=E.ccclass,ul=0,ml=1;cl(Es=function(t){function i(){for(var e,n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(e=t.call.apply(t,[this].concat(o))||this).m_promotePictures=[[],[]],e.m_promoteAni=null,e.m_promotePic=void 0,e.m_promoteLock=!1,e.m_promoteIdx=-1,e.m_adNums=0,e.m_isLandscape=void 0,e.m_curAniName="",e.m_changePictureCallback=void 0,e.m_revertPictureCallback=void 0,e.m_cycle=[[8,12],[8,8]],e.m_promoting=!1,e.m_animationName={start:"AdSlogan_Start",loop:"AdSlogan_Loop",end:"AdSlogan_End"},e.ChangePic=function(){var t,n;if(!e.m_promoteLock){e.m_promoting=!0,e.m_changePictureCallback&&e.m_changePictureCallback(),e.m_promoteIdx++,e.m_promoteIdx>=e.m_adNums&&(e.m_promoteIdx=0),e.m_promotePic.spriteFrame=e.m_promotePictures[e.m_isLandscape?ul:ml][e.m_promoteIdx];var o=c.GetGameAtlas().getSpriteFrame(null==(t=e.m_promotePic)||null==(n=t.spriteFrame)?void 0:n.name);o&&(e.m_promotePic.spriteFrame=o),e.PlayAni(e.m_animationName.start),e.m_promoteAni.once(U.EventType.FINISHED,(function(){e.m_promoteLock||e.PlayAni(e.m_animationName.loop)})),e.scheduleOnce(e.RevertPic,e.m_cycle[1][0]==e.m_cycle[1][1]?e.m_cycle[1][0]:i.GetRandomInt(e.m_cycle[1][0],e.m_cycle[1][1]+1))}},e.RevertPic=function(){e.m_revertPictureCallback&&e.m_revertPictureCallback(),e.PlayAni(e.m_animationName.end),e.m_promoteAni.once(U.EventType.FINISHED,(function(){e.m_curAniName=""})),e.m_promoting=!1,e.scheduleOnce(e.ChangePic,e.m_cycle[0][0]==e.m_cycle[0][1]?e.m_cycle[0][0]:i.GetRandomInt(e.m_cycle[0][0],e.m_cycle[0][1]+1))},e}e(i,t),i.GetRandomInt=function(t,e){return Math.floor(Math.random()*(e-t)+t)};var n=i.prototype;return n.Init=function(t,e,i,n){void 0===n&&(n=Astarte.Define.GameBundle);var o=this.LoadSlogans(t[0],t[1],n);return this.m_promoteAni=e,this.m_promotePic=i,o},n.LoadSlogans=function(t,e,i){var n=this,o=t.length;this.m_adNums=o;for(var r=[],a=function(o){r.push(new Promise((function(e){i.load(t[o],P,(function(t,i){t||(n.m_promotePictures[ul][o]=i),e()}))}))),e&&e[o]&&r.push(new Promise((function(t){i.load(e[o],P,(function(e,i){e||(n.m_promotePictures[ml][o]=i),t()}))})))},s=0;s<o;s++)a(s);return Promise.all(r).then((function(){for(var t=0;t<o;t++)n.m_promotePictures[ml][t]||(n.m_promotePictures[ml][t]=n.m_promotePictures[ul][t]);nt("loadSlogans",n.m_promotePictures)}))},n.PlayAni=function(t){this.m_promoteAni&&(this.m_promoteAni.play(t),this.m_curAniName=t)},n.StartPromote=function(){this.m_promoteLock=!1,this.scheduleOnce(this.ChangePic,this.m_cycle[0][0]==this.m_cycle[0][1]?this.m_cycle[0][0]:i.GetRandomInt(this.m_cycle[0][0],this.m_cycle[0][1]+1))},n.StopPromote=function(){this.m_promoteLock=!0,this.unschedule(this.RevertPic),this.unschedule(this.ChangePic),this.EndPromote()},n.EndPromote=function(){var t=this;this.m_promoting&&(this.m_promoting=!1,this.PlayAni(this.m_animationName.end),this.m_promoteAni.once(U.EventType.FINISHED,(function(){t.m_curAniName=""})))},n.SetAnimationName=function(t){this.m_animationName=t},n.SetPromoteCycle=function(t){this.m_cycle=t},n.GetAniState=function(){return this.m_promoteAni.getState(this.m_curAniName)},n.OnRotation=function(t){var e,i;if(this.m_isLandscape!=t){this.m_isLandscape=t,this.m_promotePic.spriteFrame=this.m_promotePictures[this.m_isLandscape?ul:ml][this.m_promoteIdx>=this.m_adNums?this.m_promoteIdx=0:this.m_promoteIdx];var n=c.GetGameAtlas().getSpriteFrame(null==(e=this.m_promotePic)||null==(i=e.spriteFrame)?void 0:i.name);n&&(this.m_promotePic.spriteFrame=n)}},r(i,[{key:"CurAniName",get:function(){return this.m_curAniName}},{key:"ChangePictureCallback",set:function(t){this.m_changePictureCallback=t}},{key:"RevertPictureCallback",set:function(t){this.m_revertPictureCallback=t}},{key:"Promoting",get:function(){return this.m_promoting}}]),i}(k));C._RF.pop(),C._RF.push({},"18f47v83XtI64h+ISwRgq3A","BoneFollow",void 0);var hl=E.ccclass,pl=E.property,_l=E.menu,dl={None:0},fl=rt(dl),yl=3.1415927,gl=yl/180;function Sl(t,e,i,n,o){var r,a=(r=o,Math.sin(r*gl)),s=function(t){return Math.cos(t*gl)}(o);return 57.29577866666166*Math.atan2(s*i+a*n,s*t+a*e)}var bl,wl,vl,Cl,El,Nl,Tl,Ol,kl,Al,Il,Ll,xl,Pl,Bl,Rl,Fl,Ml,Dl,zl,Gl,Vl,Wl,Hl,Ul,jl,Jl,Xl,Yl,ql,Kl,Zl,Ql,$l,tc,ec,ic,nc,oc,rc;ks=hl("BoneFollow"),As=_l("Chiron/Spine/BoneFollow"),Is=pl({type:N.Skeleton,tooltip:"目標 Spine 骨架"}),Ls=pl({tooltip:"目標同步骨骼名稱"}),xs=pl({tooltip:"是否快取旋轉及縮放的上層資料，預設開啟。如果父層以上會有動態調整旋轉及縮放則需取消勾選此選項，或是維持啟用狀態但於需要的時刻呼叫 CacheUpdate 方法"}),Ps=pl({tooltip:"是否同步位置"}),Bs=pl({tooltip:"是否同步旋轉"}),Rs=pl({tooltip:"是否將目標旋轉角度轉換成區域旋轉角度"}),Fs=pl({tooltip:"是否同步縮放"}),Ms=pl({tooltip:"是否將目標縮放量轉換成區域縮放量"}),Ds=pl({visible:!1}),zs=pl({type:fl,visible:!0,displayName:"Bone"}),Gs=pl({visible:!0,displayName:"Preview"}),Vs=pl({displayName:"Cache Ancestors",tooltip:"是否快取旋轉及縮放的上層資料，預設開啟。如果父層以上會有動態調整旋轉及縮放則需取消勾選此選項，或是維持啟用狀態但於需要的時刻呼叫 CacheUpdate 方法"}),Ws=pl({displayName:"Scale Factor",tooltip:"額外本體大小縮放",visible:function(){return this.m_isFollowScale}}),Hs=pl({type:mt,displayName:"Position Offset",tooltip:"額外本體位置偏移",visible:function(){return this.m_isFollowPosition}}),Us=pl({displayName:"Rotation Factor",tooltip:"額外本體旋轉",visible:function(){return this.m_isFollowRotation}}),ks(js=As(((ll=function(t){function o(){for(var e,o=arguments.length,r=new Array(o),a=0;a<o;a++)r[a]=arguments[a];return(e=t.call.apply(t,[this].concat(r))||this).editor=void 0,i(e,"m_spineSkeleton",Xs,n(e)),i(e,"m_boneName",Ys,n(e)),i(e,"m_isCacheData",qs,n(e)),i(e,"m_isFollowPosition",Ks,n(e)),i(e,"m_isFollowRotation",Zs,n(e)),i(e,"m_isRotationLocalization",Qs,n(e)),i(e,"m_isFollowScale",$s,n(e)),i(e,"m_isScaleLocalization",tl,n(e)),i(e,"__boneIndex",el,n(e)),i(e,"_boneIndex",il,n(e)),i(e,"m_preview",nl,n(e)),i(e,"m_cacheAncestors",ol,n(e)),i(e,"m_scaleFactor",rl,n(e)),i(e,"m_positionOffset",al,n(e)),i(e,"m_rotationFactor",sl,n(e)),e._oldAngle=0,e._oldScaleX=1,e._oldScaleY=1,e._isCached=!1,e._cachedRotation=0,e._cachedScaleX=1,e._cachedScaleY=1,e}e(o,t);var r=o.prototype;return r.__preload=function(){},r.onLoad=function(){this._oldAngle=this.node.angle,this._oldScaleX=this.node.scale.x,this._oldScaleY=this.node.scale.y},r.update=function(){if(this.m_spineSkeleton&&""!=this.m_boneName&&(this.m_isFollowPosition||this.m_isFollowRotation||this.m_isFollowScale)){var t=null;if(t=this.m_spineSkeleton.findBone(this.m_boneName)){var e,i,n;if(!this.m_cacheAncestors||!this._isCached){for(var o=0,r=0,a=1,s=1,l=1,c=1,u=this.m_spineSkeleton.node;u;)a*=u.scale.x,s*=u.scale.y,o+=u.angle,u=u.parent;for(u=this.node.parent;u;)l*=u.scale.x,c*=u.scale.y,r-=u.angle,u=u.parent;this._cachedRotation=o+r,this._cachedScaleX=a/l,this._cachedScaleY=s/c,this._isCached=!0}if(e=this.m_isRotationLocalization?this._cachedRotation:this._oldAngle,i=this.m_isScaleLocalization?this._cachedScaleX:this._oldScaleX,n=this.m_isScaleLocalization?this._cachedScaleY:this._oldScaleY,this.m_isFollowRotation){var m=t.parent,h=t.arotation;this.node.angle=e+(bt(m)?Sl(m.a,m.b,m.c,m.d,h):t.arotation)+this.m_rotationFactor}if(this.m_isFollowScale&&this.node.setScale(i*t.getWorldScaleX()*this.m_scaleFactor.x,n*t.getWorldScaleY()*this.m_scaleFactor.y),this.m_isFollowPosition){var p=this.m_spineSkeleton.node.getComponent(L).convertToWorldSpaceAR(ct(t.worldX,t.worldY,0)),_=this.node.parent.getComponent(L).convertToNodeSpaceAR(p);this.node.setPosition(ct(_.x+this.m_positionOffset.x,_.y+this.m_positionOffset.y))}}}},r.onDestroy=function(){this._oldAngle=null,this._oldScaleX=null,this._oldScaleY=null,this._isCached=null,this._cachedRotation=null,this._cachedScaleX=null,this._cachedScaleY=null,this.m_spineSkeleton=null,this.m_boneName=null,this.m_cacheAncestors=null,this.m_isFollowPosition=null,this.m_isFollowRotation=null,this.m_isRotationLocalization=null,this.m_isFollowScale=null,this.m_isScaleLocalization=null},r.CacheUpdate=function(){this._isCached=!1},r._refreshInspector=function(){this._updateBoneEnum()},r._boneEnum=function(){var t=st(dl);return this.m_spineSkeleton,t},r._updateBoneEnum=function(){},o}(k)).BoneFollow="BoneFollow",Xs=t((Js=ll).prototype,"m_spineSkeleton",[Is],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ys=t(Js.prototype,"m_boneName",[Ls],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),qs=t(Js.prototype,"m_isCacheData",[xs],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Ks=t(Js.prototype,"m_isFollowPosition",[Ps],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Zs=t(Js.prototype,"m_isFollowRotation",[Bs],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Qs=t(Js.prototype,"m_isRotationLocalization",[Rs],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),$s=t(Js.prototype,"m_isFollowScale",[Fs],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),tl=t(Js.prototype,"m_isScaleLocalization",[Ms],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),el=t(Js.prototype,"__boneIndex",[Ds],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),il=t(Js.prototype,"_boneIndex",[zs],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return fl.None}}),nl=t(Js.prototype,"m_preview",[Gs],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),ol=t(Js.prototype,"m_cacheAncestors",[Vs],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),rl=t(Js.prototype,"m_scaleFactor",[Ws],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return pt(1,1)}}),al=t(Js.prototype,"m_positionOffset",[Hs],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return pt(0,0)}}),sl=t(Js.prototype,"m_rotationFactor",[Us],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),js=Js))||js);C._RF.pop(),C._RF.push({},"44834DdFVNM2reoglp7HL82","NewBoneFollow",void 0);var ac,sc=E.ccclass,lc=E.property,cc=E.executeInEditMode;!function(t){t[t.default=1]="default"}(ac||(ac={}));var uc=rt({}),mc=3.1415927,hc=mc/180;function pc(t,e,i,n,o){var r,a=(r=o,Math.sin(r*hc)),s=function(t){return Math.cos(t*hc)}(o);return 57.29577866666166*Math.atan2(s*i+a*n,s*t+a*e)}var _c,dc,fc,yc,gc,Sc,bc,wc,vc,Cc,Ec,Nc,Tc,Oc,kc,Ac,Ic,Lc;bl=sc("NewBoneFollow"),wl=lc({visible:!1,tooltip:"目標 Spine 骨架"}),vl=lc({visible:!1,tooltip:"是否快取旋轉及縮放的上層資料，預設開啟。如果父層以上會有動態調整旋轉及縮放則需取消勾選此選項，或是維持啟用狀態但於需要的時刻呼叫 CacheUpdate 方法"}),Cl=lc({visible:!1,tooltip:"是否同步位置"}),El=lc({visible:!1,tooltip:"是否同步旋轉"}),Nl=lc({visible:!1,tooltip:"是否將目標旋轉角度轉換成區域旋轉角度"}),Tl=lc({visible:!1,tooltip:"是否同步縮放"}),Ol=lc({visible:!1,tooltip:"是否將目標縮放量轉換成區域縮放量"}),kl=lc({visible:!0,displayName:"Preview"}),Al=lc({type:N.Skeleton,visible:!1}),Il=lc({visible:!0,type:N.Skeleton,displayName:"Skeleton",tooltip:"目標 Spine 骨架"}),Ll=lc({visible:!1}),xl=lc({visible:!0,displayName:"BoneName",tooltip:"請輸入要跟隨的 Spine 骨頭名稱或從下拉選單選擇"}),Pl=lc({type:uc,visible:!1}),Bl=lc({type:uc,visible:!0,displayName:"SelectFromList",tooltip:"可從此下拉選單選擇骨頭"}),Rl=lc({displayName:"Cache Ancestors",tooltip:"是否快取旋轉及縮放的上層資料，預設開啟。如果父層以上會有動態調整旋轉及縮放則需取消勾選此選項，或是維持啟用狀態但於需要的時刻呼叫 CacheUpdate 方法"}),Fl=lc({displayName:"Position",tooltip:"是否同步位置"}),Ml=lc({displayName:"Position Offset",tooltip:"額外本體位置偏移",visible:function(){return this.m_followPosition}}),Dl=lc({displayName:"Rotation",tooltip:"是否同步旋轉"}),zl=lc({displayName:"Rotation Localization",tooltip:"是否將目標旋轉角度轉換成區域旋轉角度",visible:function(){return this.m_followRotation}}),Gl=lc({displayName:"Rotation Factor",tooltip:"額外本體旋轉",visible:function(){return this.m_followRotation}}),Vl=lc({displayName:"Scale",tooltip:"是否同步縮放"}),Wl=lc({displayName:"Scale Localization",tooltip:"是否將目標縮放量轉換成區域縮放量",visible:function(){return this.m_followScale}}),Hl=lc({displayName:"Scale Factor",tooltip:"額外本體大小縮放",visible:function(){return this.m_followScale}}),bl(Ul=cc(((rc=function(t){function o(){for(var e,o=arguments.length,r=new Array(o),a=0;a<o;a++)r[a]=arguments[a];return(e=t.call.apply(t,[this].concat(r))||this)._oldAngle=0,e._oldScaleX=1,e._oldScaleY=1,e._isCached=!1,e._cachedRotation=0,e._cachedScaleX=1,e._cachedScaleY=1,e._BoneEnumList=[],i(e,"m_preview",Jl,n(e)),i(e,"m_spineSkeleton",Xl,n(e)),i(e,"m_boneName",Yl,n(e)),i(e,"__boneIndex",ql,n(e)),i(e,"m_cacheAncestors",Kl,n(e)),i(e,"m_followPosition",Zl,n(e)),i(e,"m_positionOffset",Ql,n(e)),i(e,"m_followRotation",$l,n(e)),i(e,"m_rotationLocalization",tc,n(e)),i(e,"m_rotationFactor",ec,n(e)),i(e,"m_followScale",ic,n(e)),i(e,"m_scaleLocalization",nc,n(e)),i(e,"m_scaleFactor",oc,n(e)),e}e(o,t);var a=o.prototype;return a.CacheUpdate=function(){this._isCached=!1},a.__preload=function(){},a.onLoad=function(){this._oldAngle=this.node.angle,this._oldScaleX=this.node.scale.x,this._oldScaleY=this.node.scale.y},a.start=function(){},a.onEnable=function(){this.BoneSync(),_t.on(dt.EVENT_BEFORE_DRAW,this.BoneSync,this)},a.onDisable=function(){_t.off(dt.EVENT_BEFORE_DRAW,this.BoneSync,this)},a.onDestroy=function(){this._oldAngle=null,this._oldScaleX=null,this._oldScaleY=null,this._isCached=null,this._cachedRotation=null,this._cachedScaleX=null,this._cachedScaleY=null,this.m_spineSkeleton=null,this.m_boneName=null,this.m_cacheAncestors=null,this.m_followPosition=null,this.m_followRotation=null,this.m_rotationLocalization=null,this.m_followScale=null,this.m_scaleLocalization=null},a.BoneSync=function(){if(this.m_spineSkeleton&&""!=this.m_boneName&&(this.m_followPosition||this.m_followRotation||this.m_followScale)){var t=this.m_spineSkeleton.findBone(this.m_boneName);if(t){var e,i,n;if(!this.m_cacheAncestors||!this._isCached){for(var o=0,r=0,a=1,s=1,l=1,c=1,u=this.m_spineSkeleton.node;u;)a*=u.scale.x,s*=u.scale.y,u.angle&&(o+=u.angle),u=u.parent;for(u=this.node.parent;u;)l*=u.scale.x,c*=u.scale.y,u.angle&&(r-=u.angle),u=u.parent;this._cachedRotation=o+r,this._cachedScaleX=a/l,this._cachedScaleY=s/c,this._isCached=!0}if(e=this.m_rotationLocalization?this._cachedRotation:this._oldAngle,i=this.m_scaleLocalization?this._cachedScaleX:this._oldScaleX,n=this.m_scaleLocalization?this._cachedScaleY:this._oldScaleY,this.m_followRotation){var m=t.parent,h=t.arotation,p=e+(bt(m)?pc(m.a,m.b,m.c,m.d,h):t.arotation)+this.m_rotationFactor;this.node.setRotationFromEuler(ct(0,0,p))}if(this.m_followScale&&this.node.setScale(i*t.getWorldScaleX()*this.m_scaleFactor.x,n*t.getWorldScaleY()*this.m_scaleFactor.y),this.m_followPosition){var _=this.m_spineSkeleton.node.getComponent(L).convertToWorldSpaceAR(ct(t.worldX+this.m_positionOffset.x,t.worldY+this.m_positionOffset.y,0)),d=this.node.parent.getComponent(L).convertToNodeSpaceAR(_);this.node.setPosition(ct(d.x,d.y))}}}},a._refreshInspector=function(){},a._updateBoneEnum=function(){},r(o,[{key:"Skeleton",get:function(){return this.m_spineSkeleton},set:function(t){this.m_spineSkeleton=t}},{key:"CacheData",get:function(){return this.m_cacheData},set:function(t){this.m_cacheData=t}},{key:"FollowPosition",get:function(){return this.m_followPosition},set:function(t){this.m_followPosition=t}},{key:"FollowRotation",get:function(){return this.m_followRotation},set:function(t){this.m_followRotation=t}},{key:"RotationLocalization",get:function(){return this.m_rotationLocalization},set:function(t){this.m_rotationLocalization=t}},{key:"FollowScale",get:function(){return this.m_followScale},set:function(t){this.m_followScale=t}},{key:"ScaleLocalization",get:function(){return this.m_scaleLocalization},set:function(t){this.m_scaleLocalization=t}},{key:"_spineSkeleton",get:function(){return this.m_spineSkeleton},set:function(t){console.log("set _spineSkeleton ",this.m_spineSkeleton,"value",t),this.m_spineSkeleton=t,this._refreshInspector()}},{key:"BoneName",get:function(){return this.m_boneName},set:function(t){this.m_boneName=t;var e=!1;this._BoneEnumList.forEach((function(i){i.name!=t||(e=!0)})),0==e?console.log("[spBoneFollow] 輸入的骨頭",t,"並不存在！請檢查名稱是否正確！"):console.log("[spBoneFollow] 輸入的骨頭",t,"已找到！")}},{key:"_boneIndex",get:function(){return this.__boneIndex},set:function(t){var e=this;this.__boneIndex=t,this._BoneEnumList.forEach((function(i){i.value==t&&(e.m_boneName=i.name)})),this.__boneIndex=0,console.log("set __boneIndex ",t,"m_boneName:",this.m_boneName)}}]),o}(k)).NewBoneFollow="NewBoneFollow",t((jl=rc).prototype,"Skeleton",[wl],Object.getOwnPropertyDescriptor(jl.prototype,"Skeleton"),jl.prototype),t(jl.prototype,"CacheData",[vl],Object.getOwnPropertyDescriptor(jl.prototype,"CacheData"),jl.prototype),t(jl.prototype,"FollowPosition",[Cl],Object.getOwnPropertyDescriptor(jl.prototype,"FollowPosition"),jl.prototype),t(jl.prototype,"FollowRotation",[El],Object.getOwnPropertyDescriptor(jl.prototype,"FollowRotation"),jl.prototype),t(jl.prototype,"RotationLocalization",[Nl],Object.getOwnPropertyDescriptor(jl.prototype,"RotationLocalization"),jl.prototype),t(jl.prototype,"FollowScale",[Tl],Object.getOwnPropertyDescriptor(jl.prototype,"FollowScale"),jl.prototype),t(jl.prototype,"ScaleLocalization",[Ol],Object.getOwnPropertyDescriptor(jl.prototype,"ScaleLocalization"),jl.prototype),Jl=t(jl.prototype,"m_preview",[kl],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),Xl=t(jl.prototype,"m_spineSkeleton",[Al],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),t(jl.prototype,"_spineSkeleton",[Il],Object.getOwnPropertyDescriptor(jl.prototype,"_spineSkeleton"),jl.prototype),Yl=t(jl.prototype,"m_boneName",[Ll],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),t(jl.prototype,"BoneName",[xl],Object.getOwnPropertyDescriptor(jl.prototype,"BoneName"),jl.prototype),ql=t(jl.prototype,"__boneIndex",[Pl],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return ac.default}}),t(jl.prototype,"_boneIndex",[Bl],Object.getOwnPropertyDescriptor(jl.prototype,"_boneIndex"),jl.prototype),Kl=t(jl.prototype,"m_cacheAncestors",[Rl],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),Zl=t(jl.prototype,"m_followPosition",[Fl],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Ql=t(jl.prototype,"m_positionOffset",[Ml],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return pt(0,0)}}),$l=t(jl.prototype,"m_followRotation",[Dl],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),tc=t(jl.prototype,"m_rotationLocalization",[zl],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),ec=t(jl.prototype,"m_rotationFactor",[Gl],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),ic=t(jl.prototype,"m_followScale",[Vl],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),nc=t(jl.prototype,"m_scaleLocalization",[Wl],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),oc=t(jl.prototype,"m_scaleFactor",[Hl],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return pt(1,1)}}),Ul=jl))||Ul);C._RF.pop(),C._RF.push({},"2da2cEqApNLm7hZxNo+Lfkx","NewSlotColorFollow",void 0);var xc,Pc=E.ccclass,Bc=E.property,Rc=E.executeInEditMode;!function(t){t[t.default=1]="default"}(xc||(xc={}));var Fc,Mc,Dc,zc,Gc,Vc,Wc=rt({});_c=Pc("NewSlotColorFollow"),dc=Bc({visible:!1,tooltip:"目標 Spine 骨架"}),fc=Bc({visible:!0,displayName:"Preview"}),yc=Bc({visible:!1}),gc=Bc({type:N.Skeleton,visible:!1}),Sc=Bc({visible:!0,type:N.Skeleton,displayName:"Skeleton",tooltip:"目標 Spine 骨架"}),bc=Bc({visible:!1}),wc=Bc({visible:!0,displayName:"SlotName",tooltip:"請輸入要跟隨的 Spine 插槽名稱或從下拉選單選擇"}),vc=Bc({type:Wc,visible:!1}),Cc=Bc({visible:!0,displayName:"SelectFromList",type:Wc,tooltip:"可從此下拉選單選擇插槽"}),_c(Ec=Rc(((Lc=function(t){function o(){for(var e,o=arguments.length,r=new Array(o),a=0;a<o;a++)r[a]=arguments[a];return e=t.call.apply(t,[this].concat(r))||this,i(e,"m_preview",Tc,n(e)),i(e,"_colorCache",Oc,n(e)),i(e,"m_spineSkeleton",kc,n(e)),i(e,"m_slotName",Ac,n(e)),i(e,"__slotIndex",Ic,n(e)),e._SlotEnumList=[],e}e(o,t);var a=o.prototype;return a.__preload=function(){},a.onLoad=function(){this._colorCache=null},a.start=function(){},a.onEnable=function(){this.ColorSync(),_t.on(dt.EVENT_BEFORE_DRAW,this.ColorSync,this)},a.onDisable=function(){_t.off(dt.EVENT_BEFORE_DRAW,this.ColorSync,this)},a.onDestroy=function(){this._colorCache=null,this.m_spineSkeleton=null,this.m_slotName=null},a.ColorSync=function(){if(this.m_spineSkeleton&&""!=this.m_slotName){var t=this.m_spineSkeleton.findSlot(this.m_slotName),e=t?255*t.color.r:this._colorCache.r,i=t?255*t.color.g:this._colorCache.g,n=t?255*t.color.b:this._colorCache.b,o=t?255*t.color.a:this._colorCache.a;null!=this._colorCache&&t.color.r==this._colorCache.r&&t.color.g==this._colorCache.g&&t.color.b==this._colorCache.b&&t.color.a==this._colorCache.a||(this._colorCache=this._colorCache||new M.Color(M.Color.WHITE),this.node.getComponent(F)?(this.node.getComponent(F).color=$(e,i,n,o),this._colorCache.set(this.node.getComponent(F).color)):this.node.getComponent(T)&&(this.node.getComponent(T).color=$(e,i,n,o),this._colorCache.set(this.node.getComponent(T).color)),this.node.getComponent(ft)&&(this.node.getComponent(ft).opacity=o),this._colorCache.a=o)}},a._refreshInspector=function(){},a._updateSlotEnum=function(){},r(o,[{key:"Skeleton",get:function(){return this.m_spineSkeleton},set:function(t){this.m_spineSkeleton=t}},{key:"_spineSkeleton",get:function(){return this.m_spineSkeleton},set:function(t){}},{key:"SlotName",get:function(){return this.m_slotName},set:function(t){this.m_slotName=t;var e=!1;this._SlotEnumList.forEach((function(i){i.name!=t||(e=!0)})),0==e?console.log("[spSlotColorFollow] 輸入的插槽",t,"並不存在！請檢查名稱是否正確！"):console.log("[spSlotColorFollow] 輸入的插槽",t,"已找到！")}},{key:"_slotIndex",get:function(){},set:function(t){}}]),o}(k)).NewSlotColorFollow="NewSlotColorFollow",t((Nc=Lc).prototype,"Skeleton",[dc],Object.getOwnPropertyDescriptor(Nc.prototype,"Skeleton"),Nc.prototype),Tc=t(Nc.prototype,"m_preview",[fc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),Oc=t(Nc.prototype,"_colorCache",[yc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new M.Color(M.Color.WHITE)}}),kc=t(Nc.prototype,"m_spineSkeleton",[gc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),t(Nc.prototype,"_spineSkeleton",[Sc],Object.getOwnPropertyDescriptor(Nc.prototype,"_spineSkeleton"),Nc.prototype),Ac=t(Nc.prototype,"m_slotName",[bc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),t(Nc.prototype,"SlotName",[wc],Object.getOwnPropertyDescriptor(Nc.prototype,"SlotName"),Nc.prototype),Ic=t(Nc.prototype,"__slotIndex",[vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return xc.default}}),t(Nc.prototype,"_slotIndex",[Cc],Object.getOwnPropertyDescriptor(Nc.prototype,"_slotIndex"),Nc.prototype),Ec=Nc))||Ec);C._RF.pop(),C._RF.push({},"866f1RjwMhFfapt6JLtipxM","SkeletonSync",void 0);var Hc,Uc,jc=E.ccclass,Jc=E.property,Xc=E.menu;Fc=jc("SkeletonSync"),Mc=Xc("Chiron/Spine/SkeletonSync"),Dc=Jc({displayName:"Overlap",tooltip:"是否交疊並同步座標、旋轉及縮放"}),Fc(zc=Mc((Vc=t((Gc=function(t){function o(){for(var e,o=arguments.length,r=new Array(o),a=0;a<o;a++)r[a]=arguments[a];return(e=t.call.apply(t,[this].concat(r))||this).m_skeleton=null,i(e,"m_overlap",Vc,n(e)),e}e(o,t);var a=o.prototype;return a.__preload=function(){this.m_skeleton=this.getComponent(N.Skeleton)},a.Sync=function(t){if(t&&this.m_overlap){for(var e=0,i=1,n=1,o=t;o;)i*=o.scale.x,n*=o.scale.y,e+=o.angle,o=o.parent;this.node.angle=e,this.node.scale=ct(i,n,0);var r=t.parent.getComponent(L).convertToWorldSpaceAR(t.position),a=this.node.parent.getComponent(L).convertToNodeSpaceAR(r);this.node.setPosition(a)}},r(o,[{key:"Skeleton",get:function(){return this.m_skeleton}}]),o}(k)).prototype,"m_overlap",[Dc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),zc=Gc))||zc);C._RF.pop(),C._RF.push({},"e2171n/i+xGsoWeQMXewobE","SlotActivator",void 0);var Yc,qc,Kc,Zc,Qc,$c,tu,eu,iu,nu,ou,ru,au,su,lu,cu,uu,mu,hu,pu=E.ccclass,_u=(E.property,E.menu);pu("SlotActivator")(Hc=_u("Chiron/Spine/SlotActivator")(((Uc=function(t){function i(){return t.apply(this,arguments)||this}return e(i,t),r(i,[{key:"Identifier",get:function(){return this.identifier},set:function(t){this.identifier=t}},{key:"Active",get:function(){return this.active},set:function(t){this.active=t}}]),i}(k)).SlotActivator="SlotActivator",Hc=Uc))||Hc);C._RF.pop(),C._RF.push({},"e23desmKVBLjKgDg5KLcySp","SlotColorFollow",void 0);var du=E.ccclass,fu=E.property,yu=E.menu,gu=(E.inspector,rt({None:0}));var Su,bu,wu,vu,Cu,Eu,Nu,Tu;Yc=du("SlotColorFollow"),qc=yu("Chiron/Spine/SlotColorFollow"),Kc=fu({visible:!1,tooltip:"目標 Spine 骨架"}),Zc=fu({visible:!1,tooltip:"目標同步 slot 名稱"}),Qc=fu({visible:!0,displayName:"Preview"}),$c=fu({visible:!1,type:M.Color}),tu=fu({visible:!1,type:N.Skeleton}),eu=fu({visible:!0,displayName:"Skeleton",tooltip:"目標 Spine 骨架",type:N.Skeleton}),iu=fu({visible:!1,tooltip:"目標同步 slot 名稱"}),nu=fu({visible:!1}),ou=fu({visible:!0,displayName:"Slot",type:gu}),Yc(ru=qc(((hu=function(t){function o(){for(var e,o=arguments.length,r=new Array(o),a=0;a<o;a++)r[a]=arguments[a];return(e=t.call.apply(t,[this].concat(r))||this).editor=void 0,i(e,"m_preview",su,n(e)),i(e,"_colorCache",lu,n(e)),i(e,"m_spineSkeleton",cu,n(e)),i(e,"m_slotName",uu,n(e)),i(e,"__slotIndex",mu,n(e)),e}e(o,t);var a=o.prototype;return a.__preload=function(){},a.onLoad=function(){this.node.getComponent(F)?this._colorCache=this.node.getComponent(F).color:this.node.getComponent(T)&&(this._colorCache=this.node.getComponent(T).color)},a.update=function(){if(this.m_spineSkeleton&&""!=this.m_slotName){var t=this.m_spineSkeleton.findSlot(this.m_slotName),e=t?255*t.color.r:this._colorCache.r,i=t?255*t.color.g:this._colorCache.g,n=t?255*t.color.b:this._colorCache.b,o=t?255*t.color.a:this._colorCache.a;e==this._colorCache.r&&i==this._colorCache.g&&n==this._colorCache.b&&o==this._colorCache.a||(this.node.getComponent(F)?(this.node.getComponent(F).color=$(e,i,n,o),this._colorCache.set(this.node.getComponent(F).color)):this.node.getComponent(T)&&(this.node.getComponent(T).color=$(e,i,n,o),this._colorCache.set(this.node.getComponent(T).color)),this.node.getComponent(ft)&&(this.node.getComponent(ft).opacity=o),this._colorCache.a=o)}},a.onDestroy=function(){this._colorCache=null,this.m_spineSkeleton=null,this.m_slotName=null},a._refreshInspector=function(){},a._slotEnum=function(){},a._updateSlotEnum=function(){var t,e,i,n,o=this._slotEnum();t=this,e="_slotIndex",i=o||gu,n=rt.getList(rt(i)),wt.Attr.setClassAttr(t,e,"type","Enum"),wt.Attr.setClassAttr(t,e,"enumList",n)},a.notify=function(){},r(o,[{key:"Skeleton",get:function(){return this.m_spineSkeleton},set:function(t){this.m_spineSkeleton=t}},{key:"SlotName",get:function(){return this.m_slotName},set:function(t){this.m_slotName=t}},{key:"_spineSkeleton",get:function(){},set:function(t){}},{key:"_slotIndex",get:function(){},set:function(t){}}]),o}(k)).SlotColorFollow="SlotColorFollow",t((au=hu).prototype,"Skeleton",[Kc],Object.getOwnPropertyDescriptor(au.prototype,"Skeleton"),au.prototype),t(au.prototype,"SlotName",[Zc],Object.getOwnPropertyDescriptor(au.prototype,"SlotName"),au.prototype),su=t(au.prototype,"m_preview",[Qc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),lu=t(au.prototype,"_colorCache",[$c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new M.Color(M.Color.WHITE)}}),cu=t(au.prototype,"m_spineSkeleton",[tu],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),t(au.prototype,"_spineSkeleton",[eu],Object.getOwnPropertyDescriptor(au.prototype,"_spineSkeleton"),au.prototype),uu=t(au.prototype,"m_slotName",[iu],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),mu=t(au.prototype,"__slotIndex",[nu],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),t(au.prototype,"_slotIndex",[ou],Object.getOwnPropertyDescriptor(au.prototype,"_slotIndex"),au.prototype),ru=au))||ru);C._RF.pop(),C._RF.push({},"ff032nME8lBJKBpMlK8O/1z","SlotCulling",void 0);var Ou=E.ccclass,ku=E.property,Au=E.menu;Su=Ou("SlotCulling"),bu=Au("Chiron/Spine/SlotCulling"),wu=ku({visible:!1,tooltip:"目標 Spine 骨架"}),vu=ku({visible:!1,tooltip:"反向剔除 Slot 項目(勾選的不會被剔除，未勾選的將被剔除)"}),Cu=ku({visible:!1,tooltip:"遭剔除的 Slot 項目名稱"}),Su(Eu=bu(((Tu=function(t){function i(){return t.apply(this,arguments)||this}return e(i,t),r(i,[{key:"Skeleton",get:function(){return this.m_spineSkeleton},set:function(t){this.m_spineSkeleton=t}},{key:"Invert",get:function(){return this.m_invert},set:function(t){this.m_invert=t}},{key:"CullingList",get:function(){return this._cullingSlotNames}}],[{key:"Name",get:function(){return i.SlotCulling}}]),i}(k)).SlotCulling="SlotCulling",t((Nu=Tu).prototype,"Skeleton",[wu],Object.getOwnPropertyDescriptor(Nu.prototype,"Skeleton"),Nu.prototype),t(Nu.prototype,"Invert",[vu],Object.getOwnPropertyDescriptor(Nu.prototype,"Invert"),Nu.prototype),t(Nu.prototype,"CullingList",[Cu],Object.getOwnPropertyDescriptor(Nu.prototype,"CullingList"),Nu.prototype),Eu=Nu))||Eu);C._RF.pop(),C._RF.push({},"c6e0eKOKjtNwJBDq/hJOYgn","index",void 0),C._RF.pop(),C._RF.push({},"f8b5e4BLTJNX7FPcFOEaBkq","ZipBundleLoader",void 0);var Iu,Lu,xu,Pu,Bu,Ru,Fu,Mu,Du,zu,Gu,Vu,Wu,Hu,Uu,ju,Ju,Xu,Yu,qu,Ku,Zu,Qu,$u,tm,em,im,nm,om,rm,am,sm,lm,cm,um,mm,hm,pm,_m,dm,fm,ym,gm,Sm,bm,wm,vm,Cm,Em,Nm,Tm,Om,km,Am,Im,Lm,xm,Pm,Bm,Rm,Fm,Mm,Dm,zm,Gm,Vm,Wm,Hm,Um,jm,Jm,Xm,Ym=new Map,qm=new Map,Km=new Map,Zm=function(){function t(){this.loadedZipNames=new Array}var e=t.prototype;return e.downloadZip=function(t,e){return new Promise((function(i){var n=t.match(/[^/]+$/);if(null!==n){var o=""+n[0]+e+".zip";D.downloader.downloadFile(t+"/"+o,{xhrResponseType:"arraybuffer"},null,(function(t,e){i(e)}))}else i(null)}))},e.loadZip=function(){var t=a(s().mark((function t(e,i){var n,o,r;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=i?"."+i:"",t.next=3,this.downloadZip(e,n);case 3:null!==(o=t.sent)&&(r=e.replace(/(.*?)\/assets\//,"assets/"),globalThis.fflate.unzip(new Uint8Array(o),(function(t,i){t?console.warn("Unzip failed:",t.message):Object.keys(i).forEach((function(t){Ym.set(e+"/"+t,i[t]),Ym.set(r+"/"+t,i[t])}))})));case 5:case"end":return t.stop()}}),t,this)})));return function(e,i){return t.apply(this,arguments)}}(),e.init=function(){if(globalThis.fflate){var t=Object.getOwnPropertyDescriptor(XMLHttpRequest.prototype,"response");Object.defineProperty(XMLHttpRequest.prototype,"response",{get:function(){return this.ZipCacheUrl?qm.get(this.ZipCacheUrl):t.get.call(this)},set:function(t){},configurable:!0});var e=XMLHttpRequest.prototype.open;XMLHttpRequest.prototype.open=function(t,i,n,o,r){return Ym.has(i)&&(this.ZipCacheUrl=i),e.apply(this,arguments)};var i=XMLHttpRequest.prototype.send;XMLHttpRequest.prototype.send=a(s().mark((function t(e){var n,o,r,a,l,c,u,m,h=arguments;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.ZipCacheUrl){t.next=26;break}if(qm.has(this.ZipCacheUrl)){t.next=24;break}n=this.responseType,o=Ym.get(this.ZipCacheUrl),r=null,t.t0=n,t.next="arraybuffer"===t.t0?8:"json"===t.t0?10:"text"===t.t0?14:17;break;case 8:return r=o.buffer?o.buffer:o,t.abrupt("break",18);case 10:return a=new TextDecoder,l=a.decode(o),r=JSON.parse(l),t.abrupt("break",18);case 14:return c=new TextDecoder,r=c.decode(o),t.abrupt("break",18);case 17:console.error("Unknown type in zipCache:",n);case 18:(u=Km.get(this.ZipCacheUrl))&&(qm.delete(this.ZipCacheUrl+"@version"+u),Km.delete(this.ZipCacheUrl)),m=performance.now(),Km.set(this.ZipCacheUrl,m),this.ZipCacheUrl=this.ZipCacheUrl+"@version"+m,qm.set(this.ZipCacheUrl,r);case 24:return this.onload(),t.abrupt("return");case 26:return t.abrupt("return",i.apply(this,h));case 27:case"end":return t.stop()}}),t,this)})))}else console.error("fflate is not found.")},t}(),Qm=globalThis.__zipBundleLoader;globalThis.fflate&&!Qm&&(Qm=new Zm,globalThis.__zipBundleLoader=Qm,Qm.init()),C._RF.pop(),C._RF.push({},"c933866GvpLKaZlVxLlOz0C","FeatureManagerComponent",void 0);var $m,th=["game"],eh=E.ccclass,ih=E.property;!function(t){t[t.CommonMainBundle=0]="CommonMainBundle",t[t.CommonBundle=1]="CommonBundle",t[t.OtherBundle=2]="OtherBundle",t[t.DefaultLangBundle=3]="DefaultLangBundle",t[t.LangTextBundle=4]="LangTextBundle",t[t.GameBundle=5]="GameBundle"}($m||($m={}));var nh,oh,rh={CN:"zh-CN",EN:"en-US",TH:"th-TH",VN:"vi-VN",ID:"id-ID",HI:"hi-IN",TA:"ta-IN",MM:"my-MM",JP:"ja-JP",MS:"ms-MY",KO:"ko-KR",BN:"bn-IN",ES:"es-AR",PT:"pt-BR",IT:"it-IT",SE:"sv-SE",DE:"de-DE",DADK:"da-DK",RORO:"ro-RO",NLNL:"nl-NL",TRTR:"tr-TR",RURU:"ru-RU",GRGR:"gr-GR",FRFR:"fr-FR"},ah={CN:"cn",EN:"en",TH:"th",VN:"vn",ID:"id",HI:"hi",TA:"ta",MM:"mm",JP:"jp",MS:"ms",KO:"ko",BN:"bn",ES:"es",PT:"pt",IT:"it",SE:"se",DE:"de",DADK:"da",RORO:"ro",NLNL:"nl",TRTR:"trTR",RURU:"ruRU",GRGR:"grGR",FRFR:"frFR"},sh=ah.EN,lh=[10263],ch=[3],uh={JILI:0,TADA:1,ACE_ROYALE:2,JILI_START:3,TADA_CASINO:4,NONE:5,UFA:6};!function(t){t[t.None=0]="None",t[t.AutoPlaySettingPanel=1]="AutoPlaySettingPanel",t[t.AutoPlaySettingPanel_DFI=2]="AutoPlaySettingPanel_DFI",t[t.AutoPlaySettingPanel_DFIII=3]="AutoPlaySettingPanel_DFIII",t[t.AutoPlaySettingPanel_BS=4]="AutoPlaySettingPanel_BS",t[t.AutoPlaySetting_AG2=5]="AutoPlaySetting_AG2",t[t.AutoPlaySetting_FD=6]="AutoPlaySetting_FD",t[t.AutoPlaySettingPanel_MS=7]="AutoPlaySettingPanel_MS"}(nh||(nh={})),function(t){t[t.None=0]="None",t[t.Dark=1]="Dark"}(oh||(oh={}));var mh,hh,ph,_h,dh,fh,yh,gh,Sh,bh,wh,vh,Ch=(Iu=eh("StyleSetting"),Lu=ih({type:it,tooltip:"是否有骰子造型"}),xu=ih({type:it,tooltip:"是否有萬聖造型"}),Pu=ih({type:it,tooltip:"是否有聖誕造型"}),Bu=ih({type:it,tooltip:"是否有OKBET廠商造型"}),Ru=ih({type:rt(oh),tooltip:"系列"}),Iu((Du=t((Mu=function(){i(this,"HasDice",Du,this),i(this,"HasHolloween",zu,this),i(this,"HasXmas",Gu,this),i(this,"HasOkbet",Vu,this),i(this,"Series",Wu,this)}).prototype,"HasDice",[Lu],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),zu=t(Mu.prototype,"HasHolloween",[xu],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Gu=t(Mu.prototype,"HasXmas",[Pu],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Vu=t(Mu.prototype,"HasOkbet",[Bu],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Wu=t(Mu.prototype,"Series",[Ru],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return oh.None}}),Fu=Mu))||Fu),Eh=(Hu=eh("PlayTypeSetting"),Uu=ih({type:it,tooltip:"Match"}),ju=ih({type:it,tooltip:"Break"}),Hu((Yu=t((Xu=function(){i(this,"Match",Yu,this),i(this,"Break",qu,this)}).prototype,"Match",[Uu],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),qu=t(Xu.prototype,"Break",[ju],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Ju=Xu))||Ju);Ku=ih({type:H,tooltip:"遊戲縮寫(server位置)"}),Zu=ih({type:String,tooltip:"遊戲主場prefab路徑"}),Qu=ih({type:String,tooltip:"遊戲多語系圖片路徑"}),$u=ih({type:String,tooltip:"遊戲ID"}),tm=ih({type:String,tooltip:"Logo名稱，只要給到底線之前"}),em=ih({type:Boolean,tooltip:"鎖定橫版"}),im=ih({type:Boolean,tooltip:"鎖定直版"}),nm=ih({type:Boolean,tooltip:"是否為街機"}),om=ih({type:P,tooltip:"不分語系LOGO"}),rm=ih({type:vt,tooltip:"遊戲Logo合圖"}),am=ih({type:H,tooltip:"展示頁"}),sm=ih({type:String,tooltip:"敘述圖名稱"}),lm=ih({type:P,tooltip:"特色圖"}),cm=ih({type:P,tooltip:"背景圖，0:直,1:橫"}),um=ih({type:P,tooltip:"腳色"}),mm=ih({type:Number,tooltip:"辣椒數"}),hm=ih({type:Number,tooltip:"最大贏分倍率"}),pm=ih({type:rt(nh),tooltip:"自動玩介面"}),_m=ih({type:it,tooltip:"是否開啟晚3秒ShowGameScene進入遊戲"}),dm=ih({type:it,tooltip:"可以跳過前導動畫"}),fm=ih({type:Ch,tooltip:"是否有其他特色樣式"}),ym=ih({type:Eh,tooltip:"是否有其他特色樣式"}),gm=ih({type:it,tooltip:"是否為遠程包"}),Sm=ih({type:it,tooltip:"是否是SSS版"}),bm=ih({type:H,tooltip:"使用哪個遠程包版本"}),eh((Cm=t((vm=function(t){function o(){for(var e,o=arguments.length,r=new Array(o),a=0;a<o;a++)r[a]=arguments[a];return e=t.call.apply(t,[this].concat(r))||this,i(e,"m_gameShortName",Cm,n(e)),i(e,"m_scenePrefabPath",Em,n(e)),i(e,"m_gameImgPath",Nm,n(e)),i(e,"m_gameId",Tm,n(e)),i(e,"m_logoName",Om,n(e)),i(e,"m_isLockLandScope",km,n(e)),i(e,"m_isLockPortrait",Am,n(e)),i(e,"m_isStreet",Im,n(e)),i(e,"m_singleLogo",Lm,n(e)),i(e,"m_logoSpriteAtlas",xm,n(e)),i(e,"m_pagePrefabPaths",Pm,n(e)),i(e,"m_infoNames",Bm,n(e)),i(e,"m_featureSpriteFrames",Rm,n(e)),i(e,"m_bgSpriteFrames",Fm,n(e)),i(e,"m_characterSpriteFrame",Mm,n(e)),i(e,"m_chilliNum",Dm,n(e)),i(e,"m_maxWinNum",zm,n(e)),i(e,"m_autoplayPanelNo",Gm,n(e)),i(e,"m_isWatting",Vm,n(e)),i(e,"m_skipIntro",Wm,n(e)),i(e,"m_styleSetting",Hm,n(e)),i(e,"m_playTypeSetting",Um,n(e)),i(e,"m_isRemote",jm,n(e)),i(e,"m_isSSS",Jm,n(e)),i(e,"m_ReomveVersion",Xm,n(e)),e.m_startSceneTime=-1,e.m_otherBundle=null,e.m_commonBundle=null,e.m_commonPath="",e.m_commonVersion="",e.m_langTextBundle=null,e.m_defaultLangPath="",e.m_defaultLangVersion="",e.m_commonMainBundle=null,e.m_gameBundle=null,e.m_pagePrefabs=[],e.m_apiId=0,e.m_isTaDa=!1,e.m_viewNode=null,e.m_lang="en",e.m_loadOldType=!0,e.m_isForceLite=!1,e}e(o,t);var r=o.prototype;return r.onLoad=function(){this.m_isTaDa=this.IsTada(),this.Config(),this.Log(100),null==window.SetProgressInterval||window.SetProgressInterval(60),"109"===this.m_gameId&&(D.downloader.maxConcurrency=12,D.downloader.maxRequestsPerFrame=12)},r.start=function(){var t=a(s().mark((function t(){return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.m_startSceneTime=this.m_isWatting?Date.now():-1,t.next=3,this.LoadVersion("game");case 3:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),r.Config=function(){G.prototype.fillBuffers=function(t){this._renderFlag&&t._pOpacity>0&&this._render(t)}},r.update=function(){},r.LoadZip=function(){var t=a(s().mark((function t(e,i,n,o){var r,a,l;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(void 0===n&&(n=""),void 0===o&&(o=""),Qm){t.next=4;break}return t.abrupt("return");case 4:if(!(Qm.loadedZipNames.indexOf(e)>=0)){t.next=6;break}return t.abrupt("return");case 6:if(i||-1!==th.indexOf(e)){t.next=8;break}return t.abrupt("return");case 8:return r=n,a=o,i||(l=Tt.querySettings(Ot.Category.ASSETS,"bundleVers"),r="./assets/"+e,a=l[e]),Qm.loadedZipNames.push(e),t.next=13,Qm.loadZip(r,a);case 13:case"end":return t.stop()}}),t)})));return function(e,i,n,o){return t.apply(this,arguments)}}(),r.LoadVersion=function(){var t=a(s().mark((function t(e){var i,n,o,r,l,c,u,m,h,p,_,d,f,y,g,S,b,w,v,C,E,N,T,O;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:i=globalThis.LobbyData,n=this.m_isTaDa?"tada":"jili",this.m_commonPath="assets/common/Astt/"+n,o="assets/common/Astt/"+n+"Main",r="assets/common/Astt/other",l="AsttText/AsttText/en",this.m_defaultLangPath="AsttText/AsttText/en",c="assets/"+e,this.m_commonVersion="",u="",m="",this.m_defaultLangVersion="",h="",p="",_="",d="";try{void 0!==i&&(console.error("lobbyData",JSON.stringify(i)),c=i.bundleDomin+e,p=i.versionJson[e],this.m_commonPath=i.bundleDomin+n,this.m_commonVersion=i.versionJson[n],r=i.bundleDomin+"other",h=i.versionJson.other)}catch(t){}if(!this.m_isRemote){t.next=55;break}return f=/(\d+)\.(\d+)/,y=kt.match(f),g=y[1]+"."+y[2],S="https://"+window.location.host+"/",b="astarte2",w="web-mobile",Nt.isNative&&(w="android",g="app"+g),this.m_ReomveVersion.length>0&&(w=w+"-"+this.m_ReomveVersion),i&&(S=i.cdnHost),this.m_isSSS&&(b="astarte3"),(v=this.GetLinkParameterByName("remoteVersion"))&&v.length>0&&(g=""+v+y[1]+"."+y[2]),t.next=33,new Promise((function(t){D.loadRemote(""+S+b+"/"+g+"/"+w+"/assets/versions.json?"+(Date.now()/600).toFixed(0),{reload:!0,cacheAsset:!1,cacheEnabled:!1},a(s().mark((function e(i,n){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t(n);case 1:case"end":return e.stop()}}),e)}))))}));case 33:if(C=t.sent,E=""+S+b+"/"+g+"/"+w+"/src/chunks/bundle."+C.json["bundle.js"]+".js",!Nt.isNative){t.next=40;break}return t.next=38,new Promise((function(t,e){D.downloader.downloadScript(E,{systemJs:!0},(function(i){i?(console.error("load bundle error",i),e(i)):t()}))}));case 38:t.next=42;break;case 40:return t.next=42,System.import(E);case 42:r=""+S+b+"/"+g+"/"+w+"/assets/other",h=C.json.other,this.m_commonPath=""+S+b+"/"+g+"/"+w+"/assets/"+n,this.m_commonVersion=C.json[n],o=""+S+b+"/"+g+"/"+w+"/assets/"+n+"Main",u=C.json[n+"Main"],this.m_lang=this.GetLanguage(),l=""+S+b+"/"+g+"/"+w+"/assets/"+this.m_lang,m=C.json[this.m_lang],this.m_defaultLangPath=""+S+b+"/"+g+"/"+w+"/assets/en",this.m_defaultLangVersion=C.json.en,_=""+S+b+"/"+g+"/"+w+"/assets/extra",d=C.json.extra;case 55:if((""!=u&&null!=u||!this.m_isRemote)&&(this.m_loadOldType=!1),!this.m_loadOldType){t.next=71;break}return t.next=59,Promise.all([this.LoadZip(n,this.m_isRemote,this.m_commonPath,this.m_commonVersion),this.LoadZip(e,!1)]);case 59:return(N=[this.LoadBundleSync(r,h),this.LoadBundleSync(c,p,void 0,{bundleName:void 0!==i?this.m_gameShortName+e:void 0})]).push(this.LoadBundleSync(o,u),this.LoadBundleSync(l,m)),t.next=63,Promise.all(N);case 63:T=t.sent,this.m_otherBundle=T[0],this.m_gameBundle=T[1],this.m_commonMainBundle=T[2],this.m_langTextBundle=T[3],this.CheckBundles(),t.next=76;break;case 71:return O=[this.LoadBundleSync(_,d),this.LoadBundleSync(o,u,$m.CommonMainBundle),this.LoadBundleSync(r,h,$m.OtherBundle),this.LoadBundleSync(l,m,$m.LangTextBundle),this.LoadZip(n+"Main",this.m_isRemote,o,u),this.LoadBundleSync(this.m_commonPath,this.m_commonVersion,$m.CommonBundle)],this.m_isForceLite?O.push(this.LoadBundleSync("assets/gameLite","",$m.GameBundle)):this.m_isTaDa||O.push(this.LoadBundleSync("assets/game","",$m.GameBundle)),t.next=75,Promise.all(O);case 75:this.CheckBundles();case 76:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),r.CheckBundles=function(){this.m_loadOldType?this.m_otherBundle&&this.m_gameBundle&&this.m_commonBundle&&this.LoadIntroResources():this.m_commonMainBundle&&this.m_otherBundle&&this.m_langTextBundle&&(!this.m_isForceLite||this.m_isForceLite&&this.m_gameBundle)&&this.LoadIntroResources()},r.LoadBundle=function(t,e,i,n){var o=this;n||(n={}),n.version=e,D.loadBundle(t,n,(function(n,r){n?o.LoadBundle(t,e,i):i(r)}))},r.LoadBundleSync=function(t,e,i,n){var o=this;return new Promise((function(r){o.LoadBundle(t,e,(function(t){if(void 0!==i)switch(i){case $m.CommonMainBundle:o.m_commonMainBundle=t;break;case $m.CommonBundle:o.m_commonBundle=t;break;case $m.OtherBundle:o.m_otherBundle=t;break;case $m.LangTextBundle:o.m_langTextBundle=t;break;case $m.GameBundle:o.m_gameBundle=t}r(t)}),n)}))},r.LoadIntroResources=function(){if("109"==this.m_gameId&&(window.DiffTime961=Date.now()-window.StartTime),this.LoadIntroView(),this.m_gameBundle&&this.m_pagePrefabPaths.length>0)for(var t=0;t<this.m_pagePrefabPaths.length;t++)this.LoadIntroCell(t)},r.LoadIntroView=function(){var t=this,e="Astt/%s/Intro/Prefab/IntroView";e=this.m_isTaDa?Ct.formatStr(e,"framework_americas"):Ct.formatStr(e,"framework");var i=this.m_commonMainBundle;this.m_loadOldType&&(i=this.m_commonBundle),i.load(e,Et,(function(t,e){null==window.SetProgressInterval||window.SetProgressInterval(t/e*40+60)}),(function(e,i){if(e)return console.error("LoadIntroView ERROR",e),void t.LoadIntroView();t.m_viewNode=st(i),t.node.addChild(t.m_viewNode),t.CheckIntroResources()}))},r.LoadIntroCell=function(t){var e=this;this.m_gameBundle.load(this.m_pagePrefabPaths[t],Et,(function(i,n){i?e.LoadIntroCell(t):(e.m_pagePrefabs[t]=n,e.CheckIntroResources())}))},r.CheckIntroResources=function(){if(this.m_viewNode){if(this.m_gameBundle&&this.m_pagePrefabPaths.length>0)for(var t=0;t<this.m_pagePrefabPaths.length;t++)if(!this.m_pagePrefabs[t])return;this.Complete()}},r.Complete=function(){"109"==this.m_gameId&&(window.DiffTime962=Date.now()-window.StartTime),this.m_viewNode.emit("Init",{ScenePrefabPath:this.m_scenePrefabPath,GameImgPath:this.m_gameImgPath,GameId:this.m_gameId,LogoName:this.m_logoName,PagePrefabs:this.m_pagePrefabs,PagePrefabPaths:this.m_pagePrefabPaths,FeatureSpriteFrames:this.m_featureSpriteFrames,IsLockLandScope:this.m_isLockLandScope,IsLockPortrait:this.m_isLockPortrait,LogoSpriteAtlas:this.m_logoSpriteAtlas,BgSpriteFrames:this.m_bgSpriteFrames,CharacterSpriteFrame:this.m_characterSpriteFrame,InfoNames:this.m_infoNames,ChilliNum:this.m_chilliNum,MaxWinNum:this.m_maxWinNum,SingleLogo:this.m_singleLogo,IsStreet:this.m_isStreet,StartSceneTime:this.m_startSceneTime,OtherBundle:this.m_otherBundle,CommonBundle:this.m_commonBundle,CommonPath:this.m_commonPath,CommonVersion:this.m_commonVersion,CommonMainBundle:this.m_commonMainBundle,LangTextBundle:this.m_langTextBundle,DefaultLangPath:this.m_defaultLangPath,DefaultLangVersion:this.m_defaultLangVersion,GameBundle:this.m_gameBundle,ApiID:this.m_apiId.toString(),IsTaDa:this.m_isTaDa,GameShortName:this.m_gameShortName,AutoplayPanelNo:this.m_autoplayPanelNo,StyleSetting:this.m_styleSetting,PlayTypeSetting:this.m_playTypeSetting,lstZipBundleName:th,IsRemote:this.m_isRemote,LoadLessRes:!1,SkipIntro:this.m_skipIntro,IsSSS:this.m_isSSS})},r.GetLanguage=function(){var t,e,i,n=this.GetLinkParameterByName("lang")||this.GetLinkParameterByName("ln");if(null!=(t=window)&&null!=(e=t.location)&&null!=(i=e.href)&&i.includes("/sss-")&&(n=rh.EN),n){var o=this.FormatLang(n);if(""!==o)return o}if(!Nt.isNative){var r=this.FormatLang(navigator.language);if(""!==r&&null!=r)return r}return sh},r.IsTada=function(){var t=(this.GetLinkParameterByName("gs")||"gnidnawcs").split("").reverse().join(""),e=Number(this.GetLinkParameterByName("apiId")),i=-1!==t.search("tada");if(!isNaN(e)){this.m_apiId=Number(e),this.m_isForceLite=-1!==th.indexOf("gameLite")&&lh.includes(this.m_apiId);for(var n=0;n<ch.length;n++)if(e===ch[n]){i=!0;break}}var o=this.GetLinkParameterByName("tadaSkin");o&&"1"===o&&(i=!0);var r=this.GetLinkParameterByName("skin");return!r||r!=uh.TADA.toString()&&r!=uh.TADA_CASINO.toString()||(i=!0),i},r.GetLinkParameterByName=function(t,e){if(void 0===e&&(e=null),!e)if("undefined"!=typeof LobbyData)try{""===(e=LobbyData.url)&&at("No URL!")}catch(t){t(JSON.stringify(t))}else e=this.CheckReplayUrlAndDecode();t=t.replace(/[[\]]/g,"\\$&");var i=new RegExp("[?&]"+t+"(=([^&#]*)|&|#|$)").exec(e);return i?i[2]?decodeURIComponent(i[2].replace(/\+/g," ")):"":null},r.CheckReplayUrlAndDecode=function(){var t=window.location.href,e=this.GetLinkParameterByName("replaydata",t);if(!e)return t;for(var i="0".charCodeAt(0),n="9".charCodeAt(0),o="a".charCodeAt(0),r="z".charCodeAt(0),a="A".charCodeAt(0),s="Z".charCodeAt(0),l="",c=0;c<e.length;c++){var u=e.charCodeAt(c);u>=i&&u<=n?(u=n-(u-i),l+=String.fromCharCode(u)):u>=o&&u<=r&&c%2==0?(u=r-(u-o),l+=String.fromCharCode(u)):u>=a&&u<=s&&c%3==0?(u=s-(u-a),l+=String.fromCharCode(u)):l+=String.fromCharCode(u)}var m=t.split("replaydata="+e);return m.join(""),m+atob(l)},r.Log=function(t){if(!Nt.isNative){var e="https://"+window.location.host+"/";if(-1==e.indexOf("localhost")&&1!=/^http(s)?:\/\/([0-9]{1,3}\.){3}[0-9]{1,3}(:[0-9]+)?\/.*?$/.test(e)){var i=this.GetLinkParameterByName("apiId"),n=this.GetLinkParameterByName("ssoKey"),o="https://"+(this.GetLinkParameterByName("domain_platform")||this.GetLinkParameterByName("gs")||"gnidnawcs").split("").reverse().join("")+"/webservice/event/trigger?";o+="AccountID=-1&BrowserSystem=-1&DeviceSystem=-1&GameID="+this.m_gameId+"&GameVersion="+(new Date).getTime()+"&EventID="+t+"&EventStatus=0&SSOKey="+n+"&CreateTime="+(new Date).toISOString()+"&ApiId="+i,this.Send(o),window.DiffTime960=Date.now()-window.StartTime}}},r.Send=function(t){var e={Accept:"application/json, text/javascript, text/plain"},i=new XMLHttpRequest;i.open("GET",t,!0),e&&Object.keys(e).forEach((function(t){return i.setRequestHeader(t,e[t])})),i.timeout=5e3,i.onload=function(){},i.onerror=function(){},i.ontimeout=function(){},i.send()},r.FormatLang=function(t){return(t=t.toLocaleLowerCase())==ah.CN||t==rh.CN.toLocaleLowerCase()?ah.CN:t==ah.EN||t==rh.EN.toLocaleLowerCase()?ah.EN:t==ah.TH||t==rh.TH.toLocaleLowerCase()?ah.TH:t==ah.VN||t==rh.VN.toLocaleLowerCase()?ah.VN:t==ah.ID||t==rh.ID.toLocaleLowerCase()?ah.ID:t==ah.HI||t==rh.HI.toLocaleLowerCase()?ah.HI:t==ah.TA||t==rh.TA.toLocaleLowerCase()?ah.TA:t==ah.MM||t==rh.MM.toLocaleLowerCase()?ah.MM:t==ah.JP||t==rh.JP.toLocaleLowerCase()?ah.JP:t==ah.MS||t==rh.MS.toLocaleLowerCase()?ah.MS:t==ah.KO||t==rh.KO.toLocaleLowerCase()?ah.KO:t==ah.BN||t==rh.BN.toLocaleLowerCase()?ah.BN:t==ah.ES||t==rh.ES.toLocaleLowerCase()?ah.ES:t==ah.PT||t==rh.PT.toLocaleLowerCase()?ah.PT:t==ah.IT||t==rh.IT.toLocaleLowerCase()?ah.IT:t==ah.SE||t==rh.SE.toLocaleLowerCase()?ah.SE:t==ah.DE||t==rh.DE.toLocaleLowerCase()?ah.DE:t==ah.DADK||t==rh.DADK.toLocaleLowerCase()?ah.DADK:t==ah.RORO||t==rh.RORO.toLocaleLowerCase()?ah.RORO:t==ah.NLNL||t==rh.NLNL.toLocaleLowerCase()?ah.NLNL:t==ah.TRTR.toLocaleLowerCase()||t==rh.TRTR.toLocaleLowerCase()?ah.TRTR:t==ah.RURU.toLocaleLowerCase()||t==rh.RURU.toLocaleLowerCase()?ah.RURU:t==ah.GRGR.toLocaleLowerCase()||t==rh.GRGR.toLocaleLowerCase()?ah.GRGR:t==ah.FRFR.toLocaleLowerCase()||t==rh.FRFR.toLocaleLowerCase()?ah.FRFR:""},o}(k)).prototype,"m_gameShortName",[Ku],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),Em=t(vm.prototype,"m_scenePrefabPath",[Zu],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),Nm=t(vm.prototype,"m_gameImgPath",[Qu],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),Tm=t(vm.prototype,"m_gameId",[$u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),Om=t(vm.prototype,"m_logoName",[tm],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),km=t(vm.prototype,"m_isLockLandScope",[em],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Am=t(vm.prototype,"m_isLockPortrait",[im],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Im=t(vm.prototype,"m_isStreet",[nm],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Lm=t(vm.prototype,"m_singleLogo",[om],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),xm=t(vm.prototype,"m_logoSpriteAtlas",[rm],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Pm=t(vm.prototype,"m_pagePrefabPaths",[am],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Bm=t(vm.prototype,"m_infoNames",[sm],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Rm=t(vm.prototype,"m_featureSpriteFrames",[lm],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Fm=t(vm.prototype,"m_bgSpriteFrames",[cm],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Mm=t(vm.prototype,"m_characterSpriteFrame",[um],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Dm=t(vm.prototype,"m_chilliNum",[mm],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),zm=t(vm.prototype,"m_maxWinNum",[hm],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Gm=t(vm.prototype,"m_autoplayPanelNo",[pm],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return nh.None}}),Vm=t(vm.prototype,"m_isWatting",[_m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Wm=t(vm.prototype,"m_skipIntro",[dm],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Hm=t(vm.prototype,"m_styleSetting",[fm],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new Ch}}),Um=t(vm.prototype,"m_playTypeSetting",[ym],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new Eh}}),jm=t(vm.prototype,"m_isRemote",[gm],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Jm=t(vm.prototype,"m_isSSS",[Sm],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Xm=t(vm.prototype,"m_ReomveVersion",[bm],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),wm=vm));C._RF.pop(),C._RF.push({},"89025dALbBFj7AFo+6o3xYM","SwipeScreen",void 0);var Nh=E.ccclass,Th=E.property,Oh=function(t,e,i,n,o,r){this.name=t,this.height=e,this.width=i,this.ratio=n,this.statusHeight=o,this.homeHeight=r},kh=[new Oh("iPhone 6.5-inch",896,414,3,44,34),new Oh("iPhone 6.1-inch",896,414,2,44,34),new Oh("iPhone 5.8-inch",812,375,3,44,34),new Oh("iPhone 5.5-inch",736,414,3,18,0),new Oh("iPhone 4.7-inch",667,375,2,20,0),new Oh("iPhone 4-inch",568,320,2,20,0),new Oh("iPhone 3.5-inch",480,320,2,20,0),new Oh("iPhone(Legacy) & iPod Touch",480,320,1,20,0),new Oh("iPad Pro 12.9-inch",1366,1024,2,20,0),new Oh("iPad Pro 10.5-inch",1112,834,2,20,0),new Oh("iPad 9.7-inch Retina",1024,768,2,20,0),new Oh("iPad",1024,768,1,20,0),new Oh("iPad Mini Retina",1024,768,2,20,0),new Oh("iPad Mini",1024,768,1,20,0)],Ah="mask",Ih="mask_close_tip",Lh="mask_close",xh="bar",Ph={tw:["滑動無效時, 請點擊此處進入遊戲. ❎","請解除豎排方向鎖定, 並將手機水平放置."],cn:["滑动无效时, 请点击此处进入游戏. ❎","请解除竖排方向锁定, 并将手机水平放置."],th:["เมื่อสไลด์ไม่ถูกต้อง กรุณาคลิกที่นี่เพื่อเข้าสู่เกม ❎","โปรดทำการปลดล็อกรูปแบบทิศทาง เพื่อสามารถเปลี่ยนรูปแบบทิศทางตามระดับโทรศัพท์ได้"],vn:["Nếu không thể lthao tác, hãy chạm vào đây để vào game. ❎","Hãy mở khóa xoay hướng, đồng thời xoay ngang màn hình."],id:["Klik di sini untuk masuk ke permainan, ketika tidak bisa di scroll. ❎","Silakan buka kunci posisi vertikal, dan letakkan telepon seluler secara horizontal."],mm:["When the slide is invalid, please click here. ❎","Please unlock the vertical direction and place the phone horizontally."],jp:["スライドで入れない場合は、ここをタップしてください。 ❎","垂直固定を解除し、端末を水平方向に置いてください。"],en:["If swiping does not work, please tap here. ❎","Please unlock screen rotation and hold the phone horizontally."]},Bh=["tw","zh-TW"],Rh=["cn","zh-CN"],Fh=["en","en-US"],Mh=["th","th-TH"],Dh=["vn","vi-VN"],zh=["id","id-ID"],Gh=["hi","hi-IN"],Vh=["ta","ta-IN"],Wh=["mm","my-MM"],Hh=["jp","ja-JP"],Uh=[1131],jh=[1864,1002];mh=Th(Boolean),hh=Th(Boolean),ph=Th(Boolean),_h=Th(Boolean),dh=Th(Number),Nh((gh=t((yh=function(t){function o(){for(var e,o=arguments.length,r=new Array(o),a=0;a<o;a++)r[a]=arguments[a];return e=t.call.apply(t,[this].concat(r))||this,i(e,"isLandscape",gh,n(e)),i(e,"isPortrait",Sh,n(e)),i(e,"isIOS",bh,n(e)),i(e,"isAndroid",wh,n(e)),i(e,"android_Apiid",vh,n(e)),e.m_mask=null,e.m_isScrolling=!1,e.m_isblock=!1,e.m_scrollInterval=void 0,e.m_scrollTimeOut=void 0,e.m_backGround=null,e.m_isLandscape=!0,e}e(o,t);var r=o.prototype;return r.onLoad=function(){Nt.isNative||this.Init()},r.GetDeviceName=function(){if(Nt.os===Nt.OS.IOS){var t=this.GetiOSDevice();if(t)return t.name}else if(Nt.os===Nt.OS.ANDROID){var e=/Mozilla\/5.0\s*\([^()]*?(Android[^()]*?);\s*([^()]*?)\)/g.exec(navigator.userAgent);if(e&&e.length>2)return e[2].split(" Build")[0]}return"unknown"},r.CreateHtmlTag=function(){if(!this.m_backGround){this.node.active=!0;var t=document.body;t.style.overflow="visible";var e=document.getElementById("Cocos3dGameContainer");e.style.overflow="hidden",e.style.position="fixed";var i=document.createElement("div");i.id=xh,i.style.position="absolute",i.style.height="100vh";var n=document.createElement("div");n.id=Ah,n.style.backgroundColor="rgba(0, 0, 0, 0.7)",n.style.height="150vh",n.style.width="100vw",n.style.zIndex="99",n.style.display="none",n.style.position="absolute",n.style.top="0%",n.style.left="0%",this.m_backGround=n;var o=document.createElement("div");o.id=Ih,o.style.width="70vw",o.style.top="28vh",o.style.left="50vw",o.style.transform="translate(-50%, -50%)",o.style.fontSize="18px",o.style.fontWeight="bold",o.style.color="#FFFFFF",o.style.position="fixed";var r=document.createElement("div");r.style.top="16vh",r.style.left="50vw",r.style.transform="translate(-50%, -50%)",r.style.position="fixed";var a=document.createElement("div");a.id=Lh,a.style.width="90vw",a.style.fontSize="24px",a.style.fontWeight="bold",a.style.color="#EEE8AA",a.style.wordWrap="break-word";var s=document.createElement("div");s.style.fontSize="48px",s.style.fontWeight="bold",s.style.color="#EEE8AA";var l=document.createElementNS("http://www.w3.org/2000/svg","svg");l.style.width="150px",l.style.height="150px",l.style.position="fixed",l.style.top="75vh",l.style.left="50vw",l.style.transform="translate(-50%, -50%)",l.style.animationDuration="2s",l.style.animationName="fullscreen-swipe",l.style.animationIterationCount="infinite";var c=document.createElement("style"),u=document.createTextNode("@keyframes fullscreen-swipe {from { top:80% }to { top:50% }}");c.appendChild(u),l.appendChild(c),l.setAttribute("viewBox","0 0 547.371 547.371");var m=document.createElementNS("http://www.w3.org/2000/svg","path");m.setAttribute("fill","#FFFFFF"),m.setAttribute("d","M136.623,52.13v164.027l-23.875,23.877c-54.503,54.479-54.503,143.151,0,197.627l57.317,57.292c33.806,33.808,78.743,52.416,126.521,52.416c98.658,0,178.912-80.254,178.912-178.911V208.522c0-28.752-23.381-52.131-52.156-52.131c-10.713,0-20.695,3.258-28.984,8.836c-7.143-20.308-26.51-34.902-49.211-34.902c-10.713,0-20.695,3.26-28.984,8.838c-7.141-20.307-26.509-34.901-49.21-34.901c-9.487,0-18.402,2.555-26.065,7.012V52.132c0-28.75-23.38-52.131-52.131-52.131C160.003,0.001,136.623,23.38,136.623,52.13z M214.845,52.13v169.425c0,7.192,5.839,13.032,13.033,13.032s13.033-5.84,13.033-13.032v-65.162c0-14.39,11.703-26.066,26.064-26.066c14.362,0,26.063,11.678,26.063,26.066v39.098c0,7.193,5.84,13.033,13.033,13.033s13.033-5.84,13.033-13.033v-13.033c0-14.389,11.703-26.063,26.064-26.063c14.363,0,26.064,11.676,26.064,26.063v26.064c0,7.192,5.84,13.033,13.033,13.033s13.033-5.841,13.033-13.033c0-14.39,11.703-26.064,26.064-26.064c14.359,0,26.064,11.676,26.064,26.064v159.938c0,84.27-68.578,152.848-152.848,152.848c-40.819,0-79.188-15.899-108.066-44.78l-57.317-57.292c-22.155-22.183-33.233-51.271-33.233-80.385c0-29.115,11.078-58.203,33.233-80.387l5.448-5.446v72.8c0,7.192,5.839,13.033,13.032,13.033c7.194,0,13.033-5.841,13.033-13.033V52.13c0-14.389,11.704-26.065,26.065-26.065C203.141,26.063,214.845,37.743,214.845,52.13z"),t.appendChild(n),n.appendChild(o),n.appendChild(r),l.appendChild(m),n.appendChild(l),r.appendChild(a),r.appendChild(s),t.appendChild(i)}},r.Init=function(){var t=this,e=!1;"undefined"!=typeof LobbyData&&(e=LobbyData.pwa);var i=Math.floor(Number(this.GetLinkParameterByName("apiId")));if(this.isPortrait?this.m_isblock=Uh.indexOf(i)>=0:this.isAndroid&&this.android_Apiid.length>0&&this.android_Apiid.indexOf(i)>=0&&(this.isAndroid=!1),this.m_isblock||(this.m_isblock=jh.indexOf(i)>=0),!e&&!this.m_isblock)if(this.AddGameViewMask(),this.isIOS=!1,Nt.os==Nt.OS.IOS&&0==this.IsWebview()&&this.isIOS)if(this.CreateHtmlTag(),this.SetCloseContent(),this.m_backGround.style.display="inline",this.SetShowMask(),1==this.IsChrome()){var n=this.GetiOSDevice();if(null!=n){var o=.99*(screen.height-n.statusHeight-n.homeHeight-20),r=.99*(screen.width-n.statusHeight-20);document.body.onresize=function(){(window.innerHeight>=window.innerWidth?o:r)<=window.innerHeight?t.HideMask():t.ShowMask()},window.addEventListener("scroll",(function(){return t.m_isScrolling=!0}),{capture:!1,passive:!0}),this.m_backGround.addEventListener("touchend",(function(){return t.ScrollReset()}))}else this.HideMask()}else{var a=document.body.onresize;document.body.onresize=function(){a&&a(null,null);var e=document.documentElement.scrollWidth,i=document.documentElement.scrollHeight,n=e>i;document.getElementById(xh).clientHeight==window.innerHeight?t.HideMask():t.SetShowMask(n),window.addEventListener("scroll",(function(){return t.m_isScrolling=!0}),{capture:!1,passive:!0}),t.m_backGround.addEventListener("touchend",(function(){return t.ScrollReset()})),t.m_isLandscape=e>i}}else if(Nt.os==Nt.OS.ANDROID&&0==this.IsWebview()&&this.isAndroid)if(Nt.browserType==Nt.BrowserType.MOBILE_QQ||Nt.browserType==Nt.BrowserType.UC);else{var s=function(){t.HasFullscreen()&&!t.IsFullscreen()&&(t.m_mask.active=!0)};document.body.onresize=s,s()}},r.SetShowMask=function(t){if(void 0===t&&(t=void 0),this.IsIOS15orOver())if(void 0===t){var e=document.documentElement.scrollWidth,i=document.documentElement.scrollHeight;this.m_isLandscape=e>i,this.m_isLandscape?this.IsIOS15Version(0)||this.IsIOS15Version(1)||this.IsIOS15Version(2)||this.IsIOS15Version(3)?this.m_backGround.style.visibility="hidden":this.m_backGround.style.visibility="visible":this.IsIOS15Version(0)||this.IsIOS15Version(1)||this.IsIOS15Version(2)||this.IsIOS15Version(3)?this.m_backGround.style.visibility="visible":this.m_backGround.style.visibility="hidden"}else document.getElementById(xh).clientHeight,window.innerHeight,t===this.m_isLandscape&&document.getElementById(xh).clientHeight===window.innerHeight||(t?this.IsIOS15Version(0)||this.IsIOS15Version(1)||this.IsIOS15Version(2)||this.IsIOS15Version(3)?this.m_backGround.style.visibility="hidden":this.m_backGround.style.visibility="visible":this.IsIOS15Version(0)||this.IsIOS15Version(1)||this.IsIOS15Version(2)||this.IsIOS15Version(3)?this.m_backGround.style.visibility="visible":this.m_backGround.style.visibility="hidden");else this.ShowMask()},r.SetCloseContent=function(){var t=this,e=this.GetLang("lang");e=this.ChangeLang(e);var i=document.getElementById(Lh),n=this.isLandscape?document.getElementById(Ih):null;Ph[e]?(i.textContent=Ph[e][0],n&&(n.textContent=Ph[e][1])):(i.textContent=Ph[Fh[0]][0],n&&(n.textContent=Ph[Fh[0]][1])),i.onclick||(i.onclick=function(){t.HideMask()})},r.GetLang=function(t){var e=Nt.localStorage.getItem("LobbyLanguage");if(!e||""==e){if(-1!=(e="undefined"!=typeof LobbyData?LobbyData.url:window.location.href).indexOf("?"))for(var i=e.split("?")[1].split("&"),n=0;n<i.length;n++)if(i[n].split("=")[0]==t)return i[n].split("=")[1];return Fh[0]}return e},r.ChangeLang=function(t){switch(t){case Bh[1]:return Bh[0];case Rh[1]:return Rh[0];case Mh[1]:return Mh[0];case Dh[1]:return Dh[0];case zh[1]:return zh[0];case Gh[1]:return Gh[0];case Vh[1]:return Vh[0];case Wh[1]:return Wh[0];case Hh[1]:return Hh[0];default:return Fh[0]}},r.ShowMask=function(){for(var t=this,e=document.getElementById("Cocos3dGameContainer").getElementsByTagName("div"),i=0,n=0;n<e.length;n++){var o=e[n].getElementsByTagName("iframe");if(o&&o.length>0){i=n;break}}var r=e[i];r&&"hidden"!==r.style.visibility||(this.m_backGround.style.visibility="visible",this.m_mask&&(this.m_mask.active=!0),window.scrollTo(0,0),this.m_scrollInterval&&clearInterval(this.m_scrollInterval),this.m_scrollInterval=setInterval((function(){t.m_isScrolling&&(t.m_isScrolling=!1,t.ScrollReset())}),250))},r.ScrollReset=function(){var t=this;window.scrollTo(0,0),this.m_scrollTimeOut&&clearTimeout(this.m_scrollTimeOut),this.m_scrollTimeOut=setTimeout((function(){window.scrollTo(0,0),clearInterval(t.m_scrollInterval),t.m_scrollInterval=null}),250)},r.HideMask=function(){var t=this;window.scrollTo(0,0),this.m_backGround&&(this.m_backGround.style.visibility="hidden"),this.scheduleOnce((function(){t.m_mask&&(t.m_mask.active=!1)}),0)},r.AddGameViewMask=function(){var t=this,e=_t.getScene();this.m_mask||e.getChildByName("ScrollForMask")||Nt.browserType==Nt.BrowserType.FIREFOX?!this.m_mask&&e.getChildByName("ScrollForMask")&&(this.m_mask=At("ScrollForMask")):(this.m_mask=new x,this.m_mask.name="ScrollForMask",this.m_mask.addComponent(L).setContentSize(new It(2e3,2e3)),this.m_mask.addComponent(X),this.m_mask.active=!1,e.addChild(this.m_mask),this.m_mask.setSiblingIndex(e.children.length),this.m_mask.on(x.EventType.TOUCH_END,(function(){if(Nt.os==Nt.OS.IOS&&0==t.IsWebview()){var e=t.m_backGround;e&&"hidden"==e.style.visibility&&(t.m_mask.active=!1)}else Nt.os==Nt.OS.ANDROID&&0==t.IsWebview()&&t.Fullscreen()})))},r.IsWebview=function(){var t=navigator.userAgent,e=new RegExp("("+["WebView","(iPhone|iPod|iPad)(?!.*Safari/)","Android.*(wv|.0.0.0)"].join("|")+")","ig");return Boolean(t.match(e))},r.IsChrome=function(){return/CriOS/.test(navigator.userAgent)},r.GetiOSDevice=function(){for(var t,e=w(kh);!(t=e()).done;){var i=t.value;if(screen.height===i.height&&screen.width===i.width&&window.devicePixelRatio===i.ratio)return i}return null},r.HasFullscreen=function(){return null!=(document.fullscreenEnabled||document.mozFullScreenEnabled||document.webkitFullscreenEnabled||document.msFullscreenEnabled)},r.IsFullscreen=function(){return null!=(document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement)},r.Fullscreen=function(){try{var t=document.documentElement.requestFullscreen||document.documentElement.webkitRequestFullscreen||document.documentElement.mozRequestFullScreen||document.documentElement.msRequestFullscreen,e=document.exitFullscreen||document.webkitExitFullscreen||document.mozCancelFullScreen||document.msExitFullscreen;if(this.HasFullscreen())if(this.IsFullscreen())e.call(document);else try{var i=t.call(document.documentElement);i instanceof Promise&&i.catch((function(){}))}catch(t){}else console.log("not support fullscreen.");this.m_mask.active=!1}catch(t){this.m_mask.active=!1}},r.GetLinkParameterByName=function(t){var e=window.location.href;t=t.replace(/[[]]/g,"\\$&");var i=new RegExp("[?&]"+t+"(=([^&#]*)|&|#|$)").exec(e);return i?i[2]?decodeURIComponent(i[2].replace(/\+/g," ")):"":null},r.IsIOS15orOver=function(){return Nt.os==Nt.OS.IOS&&/iPhone OS 15/.test(window.navigator.userAgent)},r.IsIOS15Version=function(t){return Nt.os==Nt.OS.IOS&&-1!==window.navigator.userAgent.search("iPhone OS 15_"+t)},o}(k)).prototype,"isLandscape",[mh],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Sh=t(yh.prototype,"isPortrait",[hh],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),bh=t(yh.prototype,"isIOS",[ph],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),wh=t(yh.prototype,"isAndroid",[_h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),vh=t(yh.prototype,"android_Apiid",[dh],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),fh=yh));C._RF.pop()}}}));

(function(r) {
  r('virtual:///prerequisite-imports/main', 'chunks:///main.js'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});